(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?s:e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("mrSG"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.F)(t),n=new o.d;n.update(e);var r=n.digest();return o.g.encodeByteArray(r)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=m.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},y=null,v=!0,b=function(t,e){Object(o.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=s.a.VERBOSE,y=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,d.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===y&&!0===d.get("logging_enabled")&&b(!0)),y){var n=m.apply(null,t);y(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],Object(i.e)(e)))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(i.f)([],Object(i.e)(t)));f.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(i.f)([],Object(i.e)(t)));throw f.error(n),new Error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(i.f)([],Object(i.e)(t)));f.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===T||e===I)return-1;if(e===T||t===I)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},j=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=j(t[e[i]]);return r+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var N=function(t){var e,n,r,i,s;Object(o.e)(!S(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),L=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},F=function(t){try{t()}catch(e){setTimeout(function(){throw O("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},M=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},U=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function V(){return new U("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function B(t){return t.pieces_.length-t.pieceNum_}function H(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new U(t.pieces_,e)}function Q(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function z(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function G(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function W(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new U(e,0)}function K(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof U)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new U(n,0)}function $(t){return t.pieceNum_>=t.pieces_.length}function Y(t,e){var n=q(t),r=q(e);if(null===n)return e;if(n===r)return Y(H(t),H(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function X(t,e){for(var n=G(t,0),r=G(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Z(t,e){if(B(t)!==B(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function J(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(B(t)>B(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tt=function(){return function(t,e){this.errorPrefix_=e,this.parts_=G(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);et(this)}}();function et(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nt(t))}function nt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var rt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,it="websocket",ot="long_polling",st=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function at(t,e,n){var r;if(Object(o.e)("string"==typeof e,"typeof type must == string"),Object(o.e)("object"==typeof n,"typeof params must == object"),e===it)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==ot)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return R(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var ut,ct,lt,ht,dt,ft,pt,gt=function(t,e){var n=mt(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new st(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new U(n.pathString)}},mt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.g)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):O("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},yt=/[\[\].#$\/\u0000-\u001F\u007F]/,vt=/[\[\].#$\u0000-\u001F\u007F]/,bt=10485760,_t=function(t){return"string"==typeof t&&0!==t.length&&!yt.test(t)},wt=function(t){return"string"==typeof t&&0!==t.length&&!vt.test(t)},Ct=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&Object(o.i)(t,".sv")},Et=function(t,e,n,r,i){i&&void 0===n||Ot(Object(o.m)(t,e,i),n,r)},Ot=function(t,e,n){var r=n instanceof U?new tt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+nt(r));if("function"==typeof e)throw new Error(t+"contains a function "+nt(r)+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+nt(r));if("string"==typeof e&&e.length>bt/3&&Object(o.E)(e)>bt)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+nt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(R(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!_t(e)))throw new Error(t+" contains an invalid key ("+e+") "+nt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;u=e,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(u),a.byteLength_+=Object(o.E)(u),et(a),Ot(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=Object(o.E)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+nt(r)+" in addition to actual children.")}},St=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.m)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];R(n,function(t,e){var n=new U(t);if(Ot(s,e,K(r,n)),".priority"===Q(n)&&!Ct(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=G(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!_t(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(X);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&J(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},Tt=function(t,e,n,r){if(!r||void 0!==n){if(S(n))throw new Error(Object(o.m)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ct(n))throw new Error(Object(o.m)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},It=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.m)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},xt=function(t,e,n,r){if(!(r&&void 0===n||_t(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},kt=function(t,e,n,r){if(!(r&&void 0===n||wt(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},At=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),kt(t,e,n,r)},jt=function(t,e){if(".info"===q(e))throw new Error(t+" failed = Can't modify data under /.info/")},Pt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!_t(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wt(t)}(r))throw new Error(Object(o.m)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Rt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.m)(t,e,r)+"must be a boolean.")},Nt=function(t){return"number"==typeof t?"number:"+N(t):"string:"+t},Dt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.i)(e,".sv"),"Priority must be a string or number.")}else Object(o.e)(t===ut||t.isEmpty(),"priority of unexpected type.");Object(o.e)(t===ut||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Lt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Dt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return ct},set:function(t){ct=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return $(e)?this:".priority"===q(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=q(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.e)(".priority"!==r||1===B(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(H(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Nt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?N(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.e)(i>=0,"Unknown leaf type: "+n),Object(o.e)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Ft=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Mt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ut=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Mt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Mt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ft(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ft(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ut,t}(),qt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Bt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new qt(T,t),r=new qt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return qt.MIN},t}(),Ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return new qt(I,new Lt("[PRIORITY-POST]",ht))},e.prototype.makePost=function(t,e){var n=lt(t);return new qt(e,new Lt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Bt)),Qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return dt},set:function(t){dt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return new qt(I,dt)},e.prototype.makePost=function(t,e){return Object(o.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new qt(t,dt)},e.prototype.toString=function(){return".key"},e}(Bt),zt=new Qt,Gt=Math.log(2),Wt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Gt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Kt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Mt(s,o.node,Mt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Mt(s,o.node,Mt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Mt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Mt.BLACK):(a(h,Mt.BLACK),a(h,Mt.RED))}return o}(new Wt(t.length));return new Vt(r||e,o)},$t={},Yt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.e)($t&&Ht,"ChildrenNode.ts has not been loaded"),ft=ft||new t({".priority":$t},{".priority":Ht})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(o.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.e)(e!==zt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(qt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Kt(s,e.getCompare()):$t;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var d=Object(i.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.e)(s,"Missing index implementation for "+i),t===$t){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(qt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Kt(a,s.getCompare())}return $t}var l=n.get(e.name),h=t;return l&&(h=h.remove(new qt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,function(t){if(t===$t)return t;var r=n.get(e.name);return r?t.remove(new qt(e.name,r)):t}),this.indexSet_)},t}();function Xt(t,e){return x(t.name,e.name)}function Zt(t,e){return x(t,e)}var Jt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Dt(this.priorityNode_),this.children_.isEmpty()&&Object(o.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return pt||(pt=new t(new Vt(Zt),null,Yt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||pt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?pt:e},t.prototype.getChild=function(t){var e=q(t);return null===e?this:this.getImmediateChild(e).getChild(H(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new qt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?pt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=q(t);if(null===n)return e;Object(o.e)(".priority"!==q(t)||1===B(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(H(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ht,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Nt(this.getPriority().val())+":"),this.forEachChild(Ht,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new qt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new qt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new qt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,qt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,qt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===te?-1:0},t.prototype.withIndex=function(e){if(e===zt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===zt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ht),r=e.getIterator(Ht),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===zt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),te=new(function(t){function e(){return t.call(this,new Vt(Zt),Jt.EMPTY_NODE,Yt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Jt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Jt));function ee(t,e){if(void 0===e&&(e=null),null===t)return Jt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Lt(t,ee(e));if(t instanceof Array){var n=Jt.EMPTY_NODE;return R(t,function(e,r){if(Object(o.i)(t,e)&&"."!==e.substring(0,1)){var i=ee(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(ee(e))}var r=[],i=!1;if(R(t,function(t,e){if("."!==t.substring(0,1)){var n=ee(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new qt(t,n)))}}),0===r.length)return Jt.EMPTY_NODE;var s=Kt(r,Xt,function(t){return t.name},Zt);if(i){var a=Kt(r,Ht.getCompare());return new Jt(s,ee(e),new Yt({".priority":a},{".priority":Ht}))}return new Jt(s,ee(e),Yt.Default)}Object.defineProperties(qt,{MIN:{value:new qt(T,Jt.EMPTY_NODE)},MAX:{value:new qt(I,te)}}),Qt.__EMPTY_NODE=Jt.EMPTY_NODE,Lt.__childrenNodeConstructor=Jt,ut=te,ht=te,lt=ee;var ne=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function re(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var ie,oe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ne.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if($(this.path)){if(null!=this.affectedTree.value)return Object(o.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new U(e));return new t(V(),n,this.revert)}return Object(o.e)(q(this.path)===e,"operationForChild called for unrelated child."),new t(H(this.path),this.affectedTree,this.revert)},t}(),se=function(){function t(t,e){void 0===e&&(ie||(ie=new Vt(k)),e=ie),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return R(e,function(t,e){n=n.set(new U(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:V(),value:this.value};if($(t))return null;var n=q(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(H(t),e);return null!=i?{path:K(new U(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if($(e))return this;var n=q(e),r=this.children.get(n);return null!==r?r.subtree(H(e)):new t(null)},t.prototype.set=function(e,n){if($(e))return new t(n,this.children);var r=q(e),i=(this.children.get(r)||new t(null)).set(H(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if($(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=q(e),r=this.children.get(n);if(r){var i=r.remove(H(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if($(t))return this.value;var e=q(t),n=this.children.get(e);return n?n.get(H(t)):null},t.prototype.setTree=function(e,n){if($(e))return n;var r,i=q(e),o=(this.children.get(i)||new t(null)).setTree(H(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(V(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(K(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,V(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if($(t))return null;var i=q(t),o=this.children.get(i);return o?o.findOnPath_(H(t),K(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,V(),e)},t.prototype.foreachOnPath_=function(e,n,r){if($(e))return this;this.value&&r(n,this.value);var i=q(e),o=this.children.get(i);return o?o.foreachOnPath_(H(e),K(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(V(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(K(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),ae=function(){function t(t,e){this.source=t,this.path=e,this.type=ne.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,V()):new t(this.source,H(this.path))},t}(),ue=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ne.OVERWRITE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,V(),this.snap.getImmediateChild(e)):new t(this.source,H(this.path),this.snap)},t}(),ce=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ne.MERGE}return t.prototype.operationForChild=function(e){if($(this.path)){var n=this.children.subtree(new U(e));return n.isEmpty()?null:n.value?new ue(this.source,V(),n.value):new t(this.source,V(),n)}return Object(o.e)(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,H(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),le=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if($(t))return this.isFullyInitialized()&&!this.filtered_;var e=q(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}();function he(t,e){return{eventCache:t,serverCache:e}}function de(t,e,n,r){return he(new le(e,n,r),t.serverCache)}function fe(t,e,n,r){return he(t.eventCache,new le(e,n,r))}function pe(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ge(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}function me(t){return{type:"value",snapshotNode:t}}function ye(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ve(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function be(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var _e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ve(e,a)):Object(o.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ye(e,n)):s.trackChildChange(be(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ht,function(t,r){e.hasChild(t)||n.trackChildChange(ve(t,r))}),e.isLeafNode()||e.forEachChild(Ht,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(be(e,r,i))}else n.trackChildChange(ye(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Jt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),we=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.e)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,be(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ve(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ye(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,be(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ce=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new se(null))},t}();function Ee(t,e,n){if($(e))return new Ce(new se(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Y(i,e);return o=o.updateChild(s,n),new Ce(t.writeTree_.set(i,o))}var a=new se(n),u=t.writeTree_.setTree(e,a);return new Ce(u)}function Oe(t,e,n){var r=t;return R(n,function(t,n){r=Ee(r,K(e,t),n)}),r}function Se(t,e){if($(e))return Ce.empty();var n=t.writeTree_.setTree(e,new se(null));return new Ce(n)}function Te(t,e){return null!=Ie(t,e)}function Ie(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Y(n.path,e)):null}function xe(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ht,function(t,n){e.push(new qt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new qt(t,n.value))}),e}function ke(t,e){if($(e))return t;var n=Ie(t,e);return new Ce(null!=n?new se(n):t.writeTree_.subtree(e))}function Ae(t){return t.writeTree_.isEmpty()}function je(t,e){return Pe(V(),t.writeTree_,e)}function Pe(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.e)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Pe(K(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(K(t,".priority"),r)),n}function Re(t,e){return Qe(e,t)}function Ne(t,e){if(t.snap)return J(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&J(K(t.path,n),e))return!0;return!1}function De(t){return t.visible}function Le(t,e,n){for(var r=Ce.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)J(n,a)?r=Ee(r,u=Y(n,a),s.snap):J(a,n)&&(u=Y(a,n),r=Ee(r,V(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.f)("WriteRecord should have .snap or .children");if(J(n,a))r=Oe(r,u=Y(n,a),s.children);else if(J(a,n))if($(u=Y(a,n)))r=Oe(r,V(),s.children);else{var c=Object(o.D)(s.children,q(u));if(c){var l=c.getChild(H(u));r=Ee(r,V(),l)}}}}}return r}function Fe(t,e,n,r,i){if(r||i){var o=ke(t.visibleWrites,e);return!i&&Ae(o)?n:i||null!=n||Te(o,V())?je(Le(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(J(t.path,e)||J(e,t.path))},e),n||Jt.EMPTY_NODE):null}var s=Ie(t.visibleWrites,e);if(null!=s)return s;var a=ke(t.visibleWrites,e);return Ae(a)?n:null!=n||Te(a,V())?je(a,n||Jt.EMPTY_NODE):null}function Me(t,e,n,r){return Fe(t.writeTree,t.treePath,e,n,r)}function Ue(t,e){return function(t,e,n){var r=Jt.EMPTY_NODE,i=Ie(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ht,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=ke(t.visibleWrites,e);return n.forEachChild(Ht,function(t,e){var n=je(ke(o,new U(t)),e);r=r.updateImmediateChild(t,n)}),xe(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return xe(ke(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function Ve(t,e,n,r){return function(t,e,n,r,i){Object(o.e)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=K(e,n);if(Te(t.visibleWrites,s))return null;var a=ke(t.visibleWrites,s);return Ae(a)?i.getChild(n):je(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function qe(t,e){return function(t,e){return Ie(t.visibleWrites,e)}(t.writeTree,K(t.treePath,e))}function Be(t,e,n){return function(t,e,n,r){var i=K(e,n),o=Ie(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?je(ke(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function He(t,e){return Qe(K(t.treePath,e),t.writeTree)}function Qe(t,e){return{treePath:t,writeTree:e}}var ze=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ge=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new le(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Be(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ge(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=ke(t.visibleWrites,e),c=Ie(u,V());if(null!=c)a=c;else{if(null==n)return[];a=je(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function We(t,e,n,r,i,s){var a=e.eventCache;if(null!=qe(r,n))return e;var u=void 0,c=void 0;if($(n))if(Object(o.e)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=ge(e),h=Ue(r,l instanceof Jt?l:Jt.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=Me(r,ge(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=q(n);if(".priority"===f){Object(o.e)(1===B(n),"Can't have a priority with additional path components");var p=a.getNode(),g=Ve(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=H(n),y=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=Ve(r,n,a.getNode(),c);y=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else y=Be(r,f,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),f,y,m,i,s):a.getNode()}}return de(e,u,a.isFullyInitialized()||$(n),t.filter.filtersNodes())}function Ke(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if($(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=q(n);if(!c.isCompleteForPath(n)&&B(n)>1)return e;var f=H(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,ze,null)}var g=fe(e,u,c.isFullyInitialized()||$(n),l.filtersNodes());return We(t,g,n,i,new Ge(i,g,o),a)}function $e(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Ge(i,e,o);if($(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=de(e,u,!0,t.filter.filtersNodes());else{var h=q(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=de(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=H(n),f=c.getNode().getImmediateChild(h),p=void 0;if($(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===Q(d)&&g.getChild(W(d)).isEmpty()?g:g.updateChild(d,r):Jt.EMPTY_NODE}a=f.equals(p)?e:de(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Ye(t,e){return t.eventCache.isCompleteForChild(e)}function Xe(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Ze(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=$(n)?r:new se(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=Xe(0,e.serverCache.getNode().getImmediateChild(n),r);c=Ke(t,c,new U(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Xe(0,e.serverCache.getNode().getImmediateChild(n),r);c=Ke(t,c,new U(n),h,i,o,s,a)}}),c}var Je=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function tn(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.f)("Should only compare child_ events.");var r=new qt(e.childName,e.snapshotNode),i=new qt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}var en,nn,rn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",on=(en=0,nn=[],function(t){var e,n=t===en;en=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=rn.charAt(t%64),t=Math.floor(t/64);Object(o.e)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===nn[e];e--)nn[e]=0;nn[e]++}else for(e=0;e<12;e++)nn[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=rn.charAt(nn[e]);return Object(o.e)(20===i.length,"nextPushId: Length should be 20."),i}),sn=function(t){if("2147483647"===t)return"-";var e=L(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=rn.charAt(rn.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},an=function(t){if("-2147483648"===t)return T;var e=L(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=rn.charAt(rn.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},un=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return qt.MAX},e.prototype.makePost=function(t,e){var n=ee(t);return new qt(e,n)},e.prototype.toString=function(){return".value"},e}(Bt)),cn=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.e)(!$(e)&&".priority"!==q(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ee(t),r=Jt.EMPTY_NODE.updateChild(this.indexPath_,n);return new qt(e,r)},e.prototype.maxPost=function(){var t=Jt.EMPTY_NODE.updateChild(this.indexPath_,te);return new qt(I,t)},e.prototype.toString=function(){return G(this.indexPath_,0).join("/")},e}(Bt),ln=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new qt(e,n))||(n=Jt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Jt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Jt.EMPTY_NODE);var i=this;return e.forEachChild(Ht,function(t,e){i.matches(new qt(t,e))||(r=r.updateImmediateChild(t,Jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),hn=function(){function t(t){this.rangedFilter_=new ln(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new qt(e,n))||(n=Jt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Jt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Jt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Jt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.e)(u.numChildren()===this.limit_,"");var c=new qt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(be(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ve(e,d));var g=u.updateImmediateChild(e,Jt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(ye(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ve(l.name,l.node)),i.trackChildChange(ye(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Jt.EMPTY_NODE)):t},t}(),dn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ht}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ht},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function fn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function pn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function gn(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function mn(t,e,n){var r;return t.index_===zt?("string"==typeof e&&(e=sn(e)),r=gn(t,e,n)):r=gn(t,e,null==n?I:sn(n)),r.startAfterSet_=!0,r}function yn(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function vn(t,e,n){var r;return t.index_===zt?("string"==typeof e&&(e=an(e)),r=yn(t,e,n)):r=yn(t,e,null==n?T:an(n)),r.endBeforeSet_=!0,r}function bn(t,e){var n=t.copy();return n.index_=e,n}function _n(t){var e,n={};return t.isDefault()||(t.index_===Ht?e="$priority":t.index_===un?e="$value":t.index_===zt?e="$key":(Object(o.e)(t.index_ instanceof cn,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.G)(e),t.startSet_&&(n.startAt=Object(o.G)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.G)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.G)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.G)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var wn,Cn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new hn(n):new ln(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(Jt.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(Jt.EMPTY_NODE,a.getNode(),null),l=new le(u,s.isFullyInitialized(),i.filtersNodes()),h=new le(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=he(h,l),this.eventGenerator_=new Je(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function En(t,e){var n=ge(t.viewCache_);return n&&(t.query.getQueryParams().loadsAllData()||!$(e)&&!n.getImmediateChild(q(e)).isEmpty())?n.getChild(e):null}function On(t){return 0===t.eventRegistrations_.length}function Sn(t,e,n){var r=[];if(n){Object(o.e)(null==e,"A cancel should cancel all event registrations.");var i=t.query.path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Tn(t,e,n,r){e.type===ne.MERGE&&null!==e.source.queryId&&(Object(o.e)(ge(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.e)(pe(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new we;if(n.type===ne.OVERWRITE){var c=n;c.source.fromUser?s=$e(t,e,c.path,c.snap,r,i,u):(Object(o.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!$(c.path),s=Ke(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===ne.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=K(n,r);Ye(e,q(c))&&(a=$e(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=K(n,r);Ye(e,q(c))||(a=$e(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):(Object(o.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Ze(t,e,l.path,l.children,r,i,a,u))}else if(n.type===ne.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=qe(r,n))return e;var u=new Ge(r,e,i),c=e.eventCache.getNode(),l=void 0;if($(n)||".priority"===q(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=Me(r,ge(e));else{var d=e.serverCache.getNode();Object(o.e)(d instanceof Jt,"serverChildren would be complete if leaf node"),h=Ue(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=q(n),p=Be(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,H(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,Jt.EMPTY_NODE,H(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Me(r,ge(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=qe(r,V()),de(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=qe(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if($(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ke(t,e,n,u.getNode().getChild(n),i,o,a,s);if($(n)){var c=new se(null);return u.getNode().forEachChild(zt,function(t,e){c=c.set(new U(t),e)}),Ze(t,e,n,c,i,o,a,s)}return e}var l=new se(null);return r.foreach(function(t,e){var r=K(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),Ze(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ne.LISTEN_COMPLETE)throw Object(o.f)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return We(t,fe(e,o.getNode(),o.isFullyInitialized()||$(n),o.isFiltered()),n,r,ze,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=pe(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(me(pe(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,Object(o.e)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.e)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.e)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,In(t,u.changes,u.viewCache.eventCache.getNode(),null)}function In(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),tn(t,i,"child_removed",e,r,n),tn(t,i,"child_added",e,r,n),tn(t,i,"child_moved",o,r,n),tn(t,i,"child_changed",e,r,n),tn(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var xn=function(){return function(){this.views=new Map}}();function kn(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.e)(null!=c,"SyncTree gave us an op for an invalid query."),Tn(c,e,n,r)}var l=[];try{for(var h=Object(i.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Tn(c=d.value,e,n,r))}catch(f){s={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function An(t,e,n,r,i){var o=e.queryIdentifier(),s=t.views.get(o);if(!s){var a=Me(n,i?r:null),u=!1;a?u=!0:r instanceof Jt?(a=Ue(n,r),u=!1):(a=Jt.EMPTY_NODE,u=!1);var c=he(new le(a,u,!1),new le(r,i,!1));return new Cn(e,c)}return s}function jn(t){var e,n,r=[];try{for(var o=Object(i.g)(t.views.values()),s=o.next();!s.done;s=o.next()){var a=s.value;a.query.getQueryParams().loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function Pn(t,e){var n,r,o=null;try{for(var s=Object(i.g)(t.views.values()),a=s.next();!a.done;a=s.next())o=o||En(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function Rn(t,e){if(e.getQueryParams().loadsAllData())return Ln(t);var n=e.queryIdentifier();return t.views.get(n)}function Nn(t,e){return null!=Rn(t,e)}function Dn(t){return null!=Ln(t)}function Ln(t){var e,n;try{for(var r=Object(i.g)(t.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;if(s.query.getQueryParams().loadsAllData())return s}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Fn=1,Mn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new se(null),this.pendingWriteTree_={visibleWrites:Ce.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Un(t,e,n,r,i){return function(t,e,n,r,i){Object(o.e)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ee(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?zn(t,new ue({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Vn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(o.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&Ne(u,r.path)?i=!1:J(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=Le(t.allWrites,De,V()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Se(t.visibleWrites,r.path):R(r.children,function(e){t.visibleWrites=Se(t.visibleWrites,K(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new se(null);return null!=r.snap?i=i.set(V(),!0):R(r.children,function(t){i=i.set(new U(t),!0)}),zn(t,new oe(r.path,i,n))}return[]}function qn(t,e,n){return zn(t,new ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Bn(t,e,n,r){var s=e.path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e.queryIdentifier()||Nn(a,e))){var c=function(t,e,n,r){var s,a,u=e.queryIdentifier(),c=[],l=[],h=Dn(t);if("default"===u)try{for(var d=Object(i.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(i.e)(f.value,2),m=g[0];l=l.concat(Sn(p=g[1],n,r)),On(p)&&(t.views.delete(m),p.query.getQueryParams().loadsAllData()||c.push(p.query))}}catch(y){s={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(Sn(p,n,r)),On(p)&&(t.views.delete(u),p.query.getQueryParams().loadsAllData()||c.push(p.query)));return h&&!Dn(t)&&c.push(new(Object(o.e)(wn,"Reference.ts has not been loaded"),wn)(e.repo,e.path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t.getQueryParams().loadsAllData()}),d=t.syncPointTree_.findOnPath(s,function(t,e){return Dn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(s);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Dn(e))return[Ln(e)];var r=[];return e&&(r=jn(e)),R(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var m=p[g],y=m.query,v=Kn(t,m);t.listenProvider_.startListening(tr(y),$n(t,y),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(tr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(Yn(e));t.listenProvider_.stopListening(tr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=Yn(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Hn(t,e,n){var r=e.path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=Y(t,r);i=i||Pn(e,n),s=s||Dn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Dn(u),i=i||Pn(u,V())):(u=new xn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Jt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Pn(e,V());n&&(i=i.updateImmediateChild(t,n))}));var c=Nn(u,e);if(!c&&!e.getQueryParams().loadsAllData()){var l=Yn(e);Object(o.e)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Fn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=An(t,e,r,i,o);return t.views.has(e.queryIdentifier())||t.views.set(e.queryIdentifier(),s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ht,function(t,e){r.push(ye(t,e))}),n.isFullyInitialized()&&r.push(me(n.getNode())),In(t,r,n.getNode(),e)}(s,n)}(u,e,n,Re(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=Rn(u,e);d=d.concat(function(t,e,n){var r=e.path,i=$n(t,e),s=Kn(t,n),a=t.listenProvider_.startListening(tr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.e)(!Dn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!$(t)&&e&&Dn(e))return[Ln(e).query];var r=[];return e&&(r=r.concat(jn(e).map(function(t){return t.query}))),R(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(tr(h),$n(t,h))}return a}(t,e,f))}return d}function Qn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Pn(n,Y(t,e));if(r)return r});return Fe(r,e,i,n,!0)}function zn(t,e){return Gn(e,t.syncPointTree_,null,Re(t.pendingWriteTree_,V()))}function Gn(t,e,n,r){if($(t.path))return Wn(t,e,n,r);var i=e.get(V());null==n&&null!=i&&(n=Pn(i,V()));var o=[],s=q(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=He(r,s);o=o.concat(Gn(a,u,c,l))}return i&&(o=o.concat(kn(i,t,r,n))),o}function Wn(t,e,n,r){var i=e.get(V());null==n&&null!=i&&(n=Pn(i,V()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=He(r,e),u=t.operationForChild(e);u&&(o=o.concat(Wn(u,i,s,a)))}),i&&(o=o.concat(kn(i,t,r,n))),o}function Kn(t,e){var n=e.query,r=$n(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||Jt.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=Xn(t,n);if(r){var i=Zn(r),o=i.path,s=i.queryId,a=Y(o,e);return Jn(t,o,new ae(re(s),a))}return[]}(t,n.path,r):function(t,e){return zn(t,new ae({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Bn(t,n,null,i)}}}function $n(t,e){var n=Yn(e);return t.queryToTagMap.get(n)}function Yn(t){return t.path.toString()+"$"+t.queryIdentifier()}function Xn(t,e){return t.tagToQueryMap.get(e)}function Zn(t){var e=t.indexOf("$");return Object(o.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new U(t.substr(0,e))}}function Jn(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.e)(r,"Missing sync point for query tag that we're tracking"),kn(r,n,Re(t.pendingWriteTree_,e),null)}function tr(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var er=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),nr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=K(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Qn(this.syncTree_,this.path_)},t}(),rr=function(t,e,n){return t&&"object"==typeof t?(Object(o.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ir(t[".sv"],e,n):"object"==typeof t[".sv"]?or(t[".sv"],e):void Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ir=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.e)(!1,"Unexpected server value: "+t)}},or=function(t,e,n){t.hasOwnProperty("increment")||Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.e)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.e)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},sr=function(t,e,n,r){return ur(e,new nr(n,t),r)},ar=function(t,e,n){return ur(t,new er(e),n)};function ur(t,e,n){var r,i=t.getPriority().val(),o=rr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=rr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Lt(a,ee(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Lt(o))),u.forEachChild(Ht,function(t,i){var o=ur(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}function cr(){return{value:null,children:new Map}}function lr(t,e,n){if($(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=q(e);t.children.has(r)||t.children.set(r,cr()),lr(t.children.get(r),e=H(e),n)}}function hr(t,e){if($(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Ht,function(e,n){lr(t,new U(e),n)}),hr(t,e)}if(t.children.size>0){var r=q(e);return e=H(e),t.children.has(r)&&hr(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function dr(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){dr(r,new U(e.toString()+"/"+t),n)})}var fr=function(){function t(){this.rootNode_=Jt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),pr=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.k)(this.counters_)},t}(),gr={},mr={};function yr(t){var e=t.toString();return gr[e]||(gr[e]=new pr),gr[e]}var vr=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&R(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),br=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new vr(t);var n=1e4+2e4*Math.random();M(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,function(e,i){i>0&&Object(o.i)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),M(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),_r=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function wr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Z(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Cr(t,e,n){wr(t,n),Or(t,function(t){return Z(t,e)})}function Er(t,e,n){wr(t,n),Or(t,function(t){return J(t,e)||J(e,t)})}function Or(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Sr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Sr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();y&&_("event: "+n.toString()),F(r)}}}var Tr=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)([],Object(i.e)(this.listeners_[t])),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.e)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),Ir=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Tr),xr=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Tr),kr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&F(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Ar="start",jr="close",Pr=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=yr(e),this.urlFn=function(t){return at(e,ot,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new kr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Rr(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Ar)n.id=s,n.password=a;else{if(o!==jr)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.h)(e),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Rr=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Nr="";function Dr(t){Nr=t}var Lr=null;"undefined"!=typeof MozWebSocket?Lr=MozWebSocket:"undefined"!=typeof WebSocket&&(Lr=WebSocket);var Fr=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=yr(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),at(t,it,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+Nr+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Lr(this.connURL,[],r)}else this.mySock=new Lr(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Lr&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Mr=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Pr,Fr]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Fr&&Fr.isAvailable(),s=o&&!Fr.previouslyFailed();if(e.webSocketOnly&&(o||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Fr];else{var a=this.transports_=[];try{for(var u=Object(i.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ur=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Mr(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=M(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),M(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):M(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Vr=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),qr=1e3,Br=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=qr,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Ir.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&xr.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.e)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.i)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();O("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=qr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.e)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new Ur(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){O(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&O(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return j(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new U(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.g)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Nr.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=xr.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Vr),Hr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.e)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=_n(t.getQueryParams());this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=_n(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){O("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&O("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(Vr),Qr=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),kt("DataSnapshot.child",1,e,!1);var n=new U(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ht)},t.prototype.hasChild=function(t){Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),kt("DataSnapshot.hasChild",1,t,!1);var e=new U(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Ht))})},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),zr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function Gr(t,e){for(var n=e instanceof U?e:new U(e),r=t,i=q(n);null!==i;){var s=Object(o.D)(r.node.children,i)||{children:{},childCount:0};r=new zr(i,r,s),i=q(n=H(n))}return r}function Wr(t){return t.node.value}function Kr(t,e){t.node.value=e,Jr(t)}function $r(t){return t.node.childCount>0}function Yr(t,e){R(t.node.children,function(n,r){e(new zr(n,t,r))})}function Xr(t,e,n,r){n&&!r&&e(t),Yr(t,function(t){Xr(t,e,!0,r)}),n&&r&&e(t)}function Zr(t){return new U(null===t.parent?t.name:Zr(t.parent)+"/"+t.name)}function Jr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Wr(t)&&!$r(t)}(n),i=Object(o.i)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Jr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Jr(t))}(t.parent,t.name,t)}var ti="repo_interrupt",ei=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _r,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cr(),this.transactionQueueTree_=new zr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function ni(t){var e=t.infoData_.getNode(new U(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ri(t){return(e=(e={timestamp:ni(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ii(t,e,n,r,i){t.dataUpdateCount++;var s=new U(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.B)(n,function(t){return ee(t)});a=function(t,e,n,r){var i=Xn(t,r);if(i){var o=Zn(i),s=o.path,a=o.queryId,u=Y(s,e),c=se.fromObject(n);return Jn(t,s,new ce(re(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=ee(n);a=function(t,e,n,r){var i=Xn(t,r);if(null!=i){var o=Zn(i),s=o.path,a=o.queryId,u=Y(s,e);return Jn(t,s,new ue(re(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o.B)(n,function(t){return ee(t)});a=function(t,e,n){var r=se.fromObject(n);return zn(t,new ce({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=ee(n);a=qn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=Oi(t,s)),Er(t.eventQueue_,d,a)}function oi(t,e){si(t,"connected",e),!1===e&&function(t){vi(t,"onDisconnectEvents");var e=ri(t),n=cr();dr(t.onDisconnect_,V(),function(r,i){var o=sr(r,i,t.serverSyncTree_,e);lr(n,r,o)});var r=[];dr(n,V(),function(e,n){r=r.concat(qn(t.serverSyncTree_,e,n));var i=ki(t,e);Oi(t,i)}),t.onDisconnect_=cr(),Er(t.eventQueue_,V(),r)}(t)}function si(t,e,n){var r=new U("/.info/"+e),i=ee(n);t.infoData_.updateSnapshot(r,i);var o=qn(t.infoSyncTree_,r,i);Er(t.eventQueue_,r,o)}function ai(t){return t.nextWriteId_++}function ui(t,e,n,r,i){vi(t,"set",{path:e.toString(),value:n,priority:r});var o=ri(t),s=ee(n,r),a=Qn(t.serverSyncTree_,e),u=ar(s,a,o),c=ai(t),l=Un(t.serverSyncTree_,e,u,c,!0);wr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||O("set at "+e+" failed: "+n);var s=Vn(t.serverSyncTree_,c,!o);Er(t.eventQueue_,e,s),bi(0,i,n,r)});var h=ki(t,e);Oi(t,h),Er(t.eventQueue_,h,[])}function ci(t,e,n,r){vi(t,"update",{path:e.toString(),value:n});var i=!0,s=ri(t),a={};if(R(n,function(n,r){i=!1,a[n]=sr(K(e,n),ee(r),t.serverSyncTree_,s)}),i)_("update() called with empty data.  Don't do anything."),bi(0,r,"ok",void 0);else{var u=ai(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.e)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Oe(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=se.fromObject(n);return zn(t,new ce({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);wr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||O("update at "+e+" failed: "+n);var s=Vn(t.serverSyncTree_,u,!o),a=s.length>0?Oi(t,e):e;Er(t.eventQueue_,a,s),bi(0,r,n,i)}),R(n,function(n){var r=ki(t,K(e,n));Oi(t,r)}),Er(t.eventQueue_,e,[])}}function li(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&hr(t.onDisconnect_,e),bi(0,n,r,i)})}function hi(t,e,n,r){var i=ee(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&lr(t.onDisconnect_,e,i),bi(0,r,n,o)})}function di(t,e,n,r,i){var o=ee(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&lr(t.onDisconnect_,e,o),bi(0,i,n,r)})}function fi(t,e,n,r){if(Object(o.s)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void bi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&R(n,function(n,r){var i=ee(r);lr(t.onDisconnect_,K(e,n),i)}),bi(0,r,i,o)})}function pi(t,e,n){var r;r=".info"===q(e.path)?Hn(t.infoSyncTree_,e,n):Hn(t.serverSyncTree_,e,n),Cr(t.eventQueue_,e.path,r)}function gi(t,e,n){var r;r=".info"===q(e.path)?Bn(t.infoSyncTree_,e,n):Bn(t.serverSyncTree_,e,n),Cr(t.eventQueue_,e.path,r)}function mi(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ti)}function yi(t){t.persistentConnection_&&t.persistentConnection_.resume(ti)}function vi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([r],Object(i.e)(e)))}function bi(t,e,n,r){e&&F(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function _i(t){return t.__database||(t.__database=new zi(t))}function wi(t,e,n,r,i){vi(t,"transaction on "+e);var s=function(){},a=new Ui(t,e);a.on("value",s);var u={path:e,update:n,onComplete:r,status:null,order:p(),applyLocally:i,retryCount:0,unwatcher:function(){a.off("value",s)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=Ci(t,e,void 0);u.currentInputSnapshot=c;var l=u.update(c.val());if(void 0===l){if(u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete){var h=new Qr(u.currentInputSnapshot,new Ui(t,u.path),Ht);u.onComplete(null,!1,h)}}else{Ot("transaction failed: Data returned ",l,u.path),u.status=0;var d=Gr(t.transactionQueueTree_,e),f=Wr(d)||[];f.push(u),Kr(d,f);var g=void 0;"object"==typeof l&&null!==l&&Object(o.i)(l,".priority")?(g=Object(o.D)(l,".priority"),Object(o.e)(Ct(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(Qn(t.serverSyncTree_,e)||Jt.EMPTY_NODE).getPriority().val();var m=ri(t),y=ee(l,g),v=ar(y,c,m);u.currentOutputSnapshotRaw=y,u.currentOutputSnapshotResolved=v,u.currentWriteId=ai(t);var b=Un(t.serverSyncTree_,e,v,u.currentWriteId,u.applyLocally);Er(t.eventQueue_,e,b),Ei(t,t.transactionQueueTree_)}}function Ci(t,e,n){return Qn(t.serverSyncTree_,e,n)||Jt.EMPTY_NODE}function Ei(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||xi(t,e),Wr(e)){var n=Ti(t,e);Object(o.e)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=Ci(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.e)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Y(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){vi(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<n.length;s++){if(n[s].status=2,i=i.concat(Vn(t.serverSyncTree_,n[s].currentWriteId)),n[s].onComplete){var a=n[s].currentOutputSnapshotResolved,u=new Ui(t,n[s].path),c=new Qr(a,u,Ht);o.push(n[s].onComplete.bind(null,null,!0,c))}n[s].unwatcher()}for(xi(t,Gr(t.transactionQueueTree_,e)),Ei(t,t.transactionQueueTree_),Er(t.eventQueue_,e,i),s=0;s<o.length;s++)F(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)n[s].status=3===n[s].status?4:0;else for(O("transaction at "+d.toString()+" failed: "+r),s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r;Oi(t,e)}},a)}(t,Zr(e),n)}else $r(e)&&Yr(e,function(e){Ei(t,e)})}function Oi(t,e){var n=Si(t,e),r=Zr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=0;a<e.length;a++){var u=e[a],c=Y(n,u.path),l=!1,h=void 0;if(Object(o.e)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(Vn(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(Vn(t.serverSyncTree_,u.currentWriteId,!0));else{var d=Ci(t,u.path,s);u.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Ot("transaction failed: Data returned ",f,u.path);var p=ee(f);"object"==typeof f&&null!=f&&Object(o.i)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=u.currentWriteId,m=ri(t),y=ar(p,d,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=y,u.currentWriteId=ai(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Un(t.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally))).concat(Vn(t.serverSyncTree_,g,!0))}else l=!0,h="nodata",i=i.concat(Vn(t.serverSyncTree_,u.currentWriteId,!0))}if(Er(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete))if("nodata"===h){var v=new Ui(t,e[a].path),b=new Qr(e[a].currentInputSnapshot,v,Ht);r.push(e[a].onComplete.bind(null,null,!1,b))}else r.push(e[a].onComplete.bind(null,new Error(h),!1,null))}for(xi(t,t.transactionQueueTree_),a=0;a<r.length;a++)F(r[a]);Ei(t,t.transactionQueueTree_)}}(t,Ti(t,n),r),r}function Si(t,e){var n,r=t.transactionQueueTree_;for(n=q(e);null!==n&&void 0===Wr(r);)r=Gr(r,n),n=q(e=H(e));return r}function Ti(t,e){var n=[];return Ii(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function Ii(t,e,n){var r=Wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Yr(e,function(e){Ii(t,e,n)})}function xi(t,e){var n=Wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Kr(e,n.length>0?n:void 0)}Yr(e,function(e){xi(t,e)})}function ki(t,e){var n=Zr(Si(t,e)),r=Gr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){Ai(t,e)}),Ai(t,r),Xr(r,function(e){Ai(t,e)}),n}function Ai(t,e){var n=Wr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.e)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.e)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Vn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Kr(e,void 0):n.length=s+1,Er(t.eventQueue_,Zr(e),i),a=0;a<r.length;a++)F(r[a])}}var ji,Pi=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return li(this.repo_,this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),jt("OnDisconnect.remove",this.path_),Object(o.I)("OnDisconnect.remove",1,t,!0);var e=new o.a;return hi(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),jt("OnDisconnect.set",this.path_),Et("OnDisconnect.set",1,t,this.path_,!1),Object(o.I)("OnDisconnect.set",2,e,!0);var n=new o.a;return hi(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),jt("OnDisconnect.setWithPriority",this.path_),Et("OnDisconnect.setWithPriority",1,t,this.path_,!1),Tt("OnDisconnect.setWithPriority",2,e,!1),Object(o.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return di(this.repo_,this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),jt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}St("OnDisconnect.update",1,t,this.path_,!1),Object(o.I)("OnDisconnect.update",2,e,!0);var i=new o.a;return fi(this.repo_,this.path_,t,i.wrapCallback(e)),i.promise},t}(),Ri=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ni=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),Di=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Li=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Ni("value",this,new Qr(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Di(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Fi=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.i)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Di(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.e)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Ni(t.type,this,new Qr(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Mi=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(ji,"Reference.ts has not been loaded"),ji},set:function(t){ji=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===zt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ht){if(null!=e&&!Ct(e)||null!=n&&!Ct(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.e)(t.getIndex()instanceof cn||t.getIndex()===un,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.H)("Query.on",2,4,arguments.length),It("Query.on",1,e,!1),Object(o.I)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Li(t,e||null,n||null);pi(this.repo,this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Fi(t,e,n);pi(this.repo,this,r)},t.prototype.off=function(t,e,n){Object(o.H)("Query.off",0,3,arguments.length),It("Query.off",1,t,!0),Object(o.I)("Query.off",2,e,!0),Object(o.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Li(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Fi(i,null,n||null));gi(this.repo,this,r)},t.prototype.get=function(){return null!=(n=function(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=Y(t,n);r=r||Pn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Pn(i,V()):(i=new xn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new le(r,!0,!1):null;return pe(An(i,e,Re(t.pendingWriteTree_,e.path),o?s.getNode():Jt.EMPTY_NODE,o).viewCache_)}((t=this.repo).serverSyncTree_,e=this))?Promise.resolve(new Qr(n,e.getRef(),e.getQueryParams().getIndex())):t.server_.get(e).then(function(n){var r=ee(n),i=qn(t.serverSyncTree_,e.path,r);return Cr(t.eventQueue_,e.path,i),Promise.resolve(new Qr(r,e.getRef(),e.getQueryParams().getIndex()))},function(n){return vi(t,"get for query "+Object(o.G)(e)+" failed: "+n),Promise.reject(new Error(n))});var t,e,n},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),It("Query.once",1,e,!1),Object(o.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,fn(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,pn(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');kt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new U(e);if($(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new cn(n),i=bn(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=bn(this.queryParams_,zt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=bn(this.queryParams_,Ht);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=bn(this.queryParams_,un);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),Et("Query.startAt",1,e,this.path,!0),xt("Query.startAt",2,n,!0);var r=gn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAfter",0,2,arguments.length),Et("Query.startAfter",1,e,this.path,!1),xt("Query.startAfter",2,n,!0);var r=mn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),Et("Query.endAt",1,e,this.path,!0),xt("Query.endAt",2,n,!0);var r=yn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endBefore",0,2,arguments.length),Et("Query.endBefore",1,e,this.path,!1),xt("Query.endBefore",2,n,!0);var r=vn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.H)("Query.equalTo",1,2,arguments.length),Et("Query.equalTo",1,t,this.path,!1),xt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this.repo.toString()+z(this.path)},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Ht&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=j(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=Z(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.I)(t,3,r.cancel,!0),r.context=n,Object(o.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.m)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ui=function(t){function e(e,n){if(!(e instanceof ei))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new dn,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),$(this.path)?null:Q(this.path)},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof U||(null===q(this.path)?At("Reference.child",1,t,!1):kt("Reference.child",1,t,!1)),new e(this.repo,K(this.path,t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=W(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return _i(this.repo)},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),jt("Reference.set",this.path),Et("Reference.set",1,t,this.path,!1),Object(o.I)("Reference.set",2,e,!0);var n=new o.a;return ui(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),jt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}St("Reference.update",1,t,this.path,!1),Object(o.I)("Reference.update",2,e,!0);var i=new o.a;return ci(this.repo,this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.H)("Reference.setWithPriority",2,3,arguments.length),jt("Reference.setWithPriority",this.path),Et("Reference.setWithPriority",1,t,this.path,!1),Tt("Reference.setWithPriority",2,e,!1),Object(o.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return ui(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.H)("Reference.remove",0,1,arguments.length),jt("Reference.remove",this.path),Object(o.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.H)("Reference.transaction",1,3,arguments.length),jt("Reference.transaction",this.path),Object(o.I)("Reference.transaction",1,t,!1),Object(o.I)("Reference.transaction",2,e,!0),Rt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new Ri(n,i)),"function"==typeof e&&e(t,n,i)};return wi(this.repo,this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),jt("Reference.setPriority",this.path),Tt("Reference.setPriority",1,t,!1),Object(o.I)("Reference.setPriority",2,e,!0);var n=new o.a;return ui(this.repo,K(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.H)("Reference.push",0,2,arguments.length),jt("Reference.push",this.path),Et("Reference.push",1,t,this.path,!0),Object(o.I)("Reference.push",2,e,!0);var n,r=ni(this.repo),i=on(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return jt("Reference.onDisconnect",this.path),new Pi(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Mi);Mi.__referenceConstructor=Ui,function(t){Object(o.e)(!wn,"__referenceConstructor has already been defined"),wn=t}(Ui);var Vi=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';O(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),qi=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Bi={},Hi=!1;function Qi(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=gt(i,r),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=gt(i="http://"+c+"?ns="+u.namespace,r)).repoInfo):s=!a.repoInfo.secure;var l=r&&s?new qi:new Vi(t,e);return Pt("Invalid Firebase Database URL",1,a),$(a.path)||E("Database URL must point to the root of a Firebase Database (not including a child path)."),_i(function(t,e,n){var r=Object(o.D)(Bi,e.name);r||(Bi[e.name]=r={});var i=Object(o.D)(r,t.toURLString());return i&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ei(t,Hi,e,n),r[t.toURLString()]=i,i}(u,t,l))}var zi=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=Object(o.D)(Bi,e.app.name))&&Object(o.D)(n,e.key)===e||E("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),mi(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof ei||E("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(function(t){if(t.stats_=yr(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Hr(t.repoInfo_,function(e,n,r,i){ii(t,e,n,r,i)},t.authTokenProvider_),setTimeout(function(){return oi(t,!0)},0);else{var e=t.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Br(t.repoInfo_,t.app.options.appId,function(e,n,r,i){ii(t,e,n,r,i)},function(e){oi(t,e)},function(e){!function(t,e){R(e,function(e,n){si(t,e,n)})}(t,e)},t.authTokenProvider_,e),t.server_=t.persistentConnection_}var n,r;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.statsReporter_=(n=function(){return new br(t.stats_,t.server_)},r=t.repoInfo_.toString(),mr[r]||(mr[r]=n()),mr[r]),t.infoData_=new fr,t.infoSyncTree_=new Mn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=qn(t.infoSyncTree_,e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),si(t,"connected",!1),t.serverSyncTree_=new Mn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Er(t.eventQueue_,e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Ui(this.repo_,V())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?E("Cannot call useEmulator() after instance has already been initialized."):function(t,e,n){t.repoInfo_=new st(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new qi)}(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.H)("database.ref",0,1,arguments.length),t instanceof Ui?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.H)(e,1,1,arguments.length);var n=gt(t,this.repo_.repoInfo_.nodeAdmin);Pt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||E(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&E("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),mi(this.repo_)},t.prototype.goOnline=function(){Object(o.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),yi(this.repo_)},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Gi=Object.freeze({__proto__:null,forceLongPolling:function(){Fr.forceDisallow(),Pr.forceAllow()},forceWebSockets:function(){Pr.forceDisallow()},isWebSocketsAvailable:function(){return Fr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new vr(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);R(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t.repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t.repo,e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t.repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Dr(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:Qi(e,u,n,s),namespace:i}}}),Wi=Br;Br.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Br.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Ki=Object.freeze({__proto__:null,DataConnection:Wi,RealTimeConnection:Ur,hijackHash:function(t){var e=Br.prototype.put;return Br.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Br.prototype.put=e}},ConnectionTarget:st,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){!function(t){Hi=t}(t)}}),$i=zi.ServerValue;!function(e){Dr(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=e.instanceIdentifier;return Qi(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),n,void 0)},"PUBLIC").setServiceProps({Reference:Ui,Query:Mi,Database:zi,DataSnapshot:Qr,enableLogging:b,INTERNAL:Gi,ServerValue:$i,TEST_ACCESS:Ki}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.6"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return on}),n.d(e,"b",function(){return Du}),n.d(e,"c",function(){return Au}),n.d(e,"d",function(){return xu}),n.d(e,"e",function(){return ku}),n.d(e,"f",function(){return xc}),n.d(e,"g",function(){return vc}),n.d(e,"h",function(){return ja}),n.d(e,"i",function(){return Gu}),n.d(e,"j",function(){return ea}),n.d(e,"k",function(){return Mu}),n.d(e,"l",function(){return oa}),n.d(e,"m",function(){return Cr}),n.d(e,"n",function(){return au}),n.d(e,"o",function(){return uo}),n.d(e,"p",function(){return Sn}),n.d(e,"q",function(){return k}),n.d(e,"r",function(){return rn}),n.d(e,"s",function(){return So}),n.d(e,"t",function(){return Oa}),n.d(e,"u",function(){return Ta}),n.d(e,"v",function(){return Fu}),n.d(e,"w",function(){return Ba}),n.d(e,"x",function(){return _c}),n.d(e,"y",function(){return qa}),n.d(e,"z",function(){return fc}),n.d(e,"A",function(){return $u}),n.d(e,"B",function(){return Tn}),n.d(e,"C",function(){return Nu}),n.d(e,"D",function(){return Ru}),n.d(e,"E",function(){return ua}),n.d(e,"F",function(){return aa}),n.d(e,"G",function(){return Tr}),n.d(e,"H",function(){return la}),n.d(e,"I",function(){return gr}),n.d(e,"J",function(){return In}),n.d(e,"K",function(){return Ec}),n.d(e,"L",function(){return Fa}),n.d(e,"M",function(){return nc}),n.d(e,"N",function(){return sn}),n.d(e,"O",function(){return da}),n.d(e,"P",function(){return ha}),n.d(e,"Q",function(){return Qa}),n.d(e,"R",function(){return D}),n.d(e,"S",function(){return pc}),n.d(e,"T",function(){return hc}),n.d(e,"U",function(){return f}),n.d(e,"V",function(){return lc}),n.d(e,"W",function(){return Tc}),n.d(e,"X",function(){return oc}),n.d(e,"Y",function(){return Lu}),n.d(e,"Z",function(){return lo}),n.d(e,"ab",function(){return qs}),n.d(e,"bb",function(){return fr}),n.d(e,"cb",function(){return Yn}),n.d(e,"db",function(){return Un}),n.d(e,"eb",function(){return qn}),n.d(e,"fb",function(){return zn}),n.d(e,"gb",function(){return Hn}),n.d(e,"hb",function(){return Bn}),n.d(e,"ib",function(){return Qn}),n.d(e,"jb",function(){return Fs}),n.d(e,"kb",function(){return Sc}),n.d(e,"lb",function(){return Ms}),n.d(e,"mb",function(){return Us}),n.d(e,"nb",function(){return Vn}),n.d(e,"ob",function(){return V}),n.d(e,"pb",function(){return No}),n.d(e,"qb",function(){return Jo}),n.d(e,"rb",function(){return Xo}),n.d(e,"sb",function(){return Zo}),n.d(e,"tb",function(){return Ls}),n.d(e,"ub",function(){return St}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return Mn}),n.d(e,"xb",function(){return Io}),n.d(e,"yb",function(){return bt}),n.d(e,"zb",function(){return Zs}),n.d(e,"Ab",function(){return fi}),n.d(e,"Bb",function(){return Mo}),n.d(e,"Cb",function(){return ys}),n.d(e,"Db",function(){return ms}),n.d(e,"Eb",function(){return wu}),n.d(e,"Fb",function(){return Z}),n.d(e,"Gb",function(){return ot}),n.d(e,"Hb",function(){return _}),n.d(e,"Ib",function(){return w}),n.d(e,"Jb",function(){return nt}),n.d(e,"Kb",function(){return st}),n.d(e,"Lb",function(){return Bo}),n.d(e,"Mb",function(){return Wo}),n.d(e,"Nb",function(){return $o}),n.d(e,"Ob",function(){return Ko}),n.d(e,"Pb",function(){return Go}),n.d(e,"Qb",function(){return zo}),n.d(e,"Rb",function(){return Yo}),n.d(e,"Sb",function(){return Ze}),n.d(e,"Tb",function(){return js}),n.d(e,"Ub",function(){return Cn}),n.d(e,"Vb",function(){return tn}),n.d(e,"Wb",function(){return Iu}),n.d(e,"Xb",function(){return ts}),n.d(e,"Yb",function(){return Cu}),n.d(e,"Zb",function(){return rs}),n.d(e,"ac",function(){return ss}),n.d(e,"bc",function(){return os}),n.d(e,"cc",function(){return Ho}),n.d(e,"dc",function(){return as}),n.d(e,"ec",function(){return ou}),n.d(e,"fc",function(){return su}),n.d(e,"gc",function(){return bu}),n.d(e,"hc",function(){return qo}),n.d(e,"ic",function(){return Qt}),n.d(e,"jc",function(){return mr}),n.d(e,"kc",function(){return yr}),n.d(e,"lc",function(){return rt}),n.d(e,"mc",function(){return gs}),n.d(e,"nc",function(){return Ps}),n.d(e,"oc",function(){return Vo}),n.d(e,"pc",function(){return Tu}),n.d(e,"qc",function(){return xs}),n.d(e,"rc",function(){return ks}),n.d(e,"sc",function(){return As}),n.d(e,"tc",function(){return _u});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function C(t){return E(t,S)||E(t,I)}function E(t,e){return t.hasOwnProperty(e)?t[e]:null}function O(t){return t&&(t.hasOwnProperty(T)||t.hasOwnProperty(x))?t[T]:null}const S=u({"\u0275prov":u}),T=u({"\u0275inj":u}),I=u({ngInjectableDef:u}),x=u({ngInjectorDef:u});var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let A;function j(t){const e=A;return A=t,e}function P(t,e,n){const r=C(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function R(t){return{toString:t}.toString()}var N=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),D=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const L="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,M="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,V=L||U||F||M,q={},B=[],H=[],Q=u({"\u0275cmp":u}),z=u({"\u0275dir":u}),G=u({"\u0275pipe":u}),W=u({"\u0275mod":u}),K=u({"\u0275loc":u}),$=u({"\u0275fac":u}),Y=u({__NG_ELEMENT_ID__:u});let X=0;function Z(t){return R(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===N.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||H,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||D.Emulated,id:"c",styles:t.styles||H,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=X++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(J):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(tt):null,n})}function J(t){return at(t)||function(t){return t[z]||null}(t)}function tt(t){return function(t){return t[G]||null}(t)}const et={};function nt(t){const e={type:t.type,bootstrap:t.bootstrap||H,declarations:t.declarations||H,imports:t.imports||H,exports:t.exports||H,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&R(()=>{et[t.id]=t.type}),e}function rt(t,e){return R(()=>{const n=ut(t,!0);n.declarations=e.declarations||H,n.imports=e.imports||H,n.exports=e.exports||H})}function it(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ot=Z;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[Q]||null}function ut(t,e){const n=t[W]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function gt(t){return 1==(1&t.flags)}function mt(t){return null!==t.template}function yt(t,e){return t.hasOwnProperty($)?t[$]:null}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function bt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ct),wt}function wt(){const t=Et(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ct(t,e,n,r){const i=Et(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new vt(u&&u.currentValue,e,s===q),t[r]=e}function Et(t){return t.__ngSimpleChanges__||null}let Ot;function St(t){Ot=t}function Tt(){return void 0!==Ot?Ot:"undefined"!=typeof document?document:void 0}function It(t){return!!t.listen}bt.ngInherit=!0;const xt={createRenderer:(t,e)=>Tt()};function kt(t){for(;Array.isArray(t);)t=t[0];return t}function At(t,e){return kt(e[t])}function jt(t,e){return kt(e[t.index])}function Pt(t,e){return t.data[e]}function Rt(t,e){const n=e[t];return ht(n)?n:n[0]}function Nt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Dt(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Ft(t,e){return null==e?null:t[e]}function Mt(t){t[18]=0}function Ut(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Vt={lFrame:le(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qt(){return Vt.bindingsEnabled}function Bt(){return Vt.lFrame.lView}function Ht(){return Vt.lFrame.tView}function Qt(t){Vt.lFrame.contextLView=t}function zt(){let t=Gt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Gt(){return Vt.lFrame.currentTNode}function Wt(t,e){const n=Vt.lFrame;n.currentTNode=t,n.isParent=e}function Kt(){return Vt.lFrame.isParent}function $t(){Vt.lFrame.isParent=!1}function Yt(){return Vt.isInCheckNoChangesMode}function Xt(t){Vt.isInCheckNoChangesMode=t}function Zt(){const t=Vt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Jt(){return Vt.lFrame.bindingIndex++}function te(t){const e=Vt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ee(t,e){const n=Vt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ne(e)}function ne(t){Vt.lFrame.currentDirectiveIndex=t}function re(t){const e=Vt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function ie(){return Vt.lFrame.currentQueryIndex}function oe(t){Vt.lFrame.currentQueryIndex=t}function se(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ae(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=se(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Vt.lFrame=ce();return r.currentTNode=e,r.lView=t,!0}function ue(t){const e=ce(),n=t[1];Vt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ce(){const t=Vt.lFrame,e=null===t?null:t.child;return null===e?le(t):e}function le(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function he(){const t=Vt.lFrame;return Vt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const de=he;function fe(){const t=he();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pe(){return Vt.lFrame.selectedIndex}function ge(t){Vt.lFrame.selectedIndex=t}function me(){const t=Vt.lFrame;return Pt(t.tView,t.selectedIndex)}function ye(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ve(t,e,n){we(t,e,3,n)}function be(t,e,n,r){(3&t[2])===n&&we(t,e,n,r)}function _e(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function we(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Ce(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Ce(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Ee=-1;class Oe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Se(t,e,n){const r=It(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ie(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Te(t){return 3===t||4===t||6===t}function Ie(t){return 64===t.charCodeAt(0)}function xe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||ke(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function ke(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ae(t){return t!==Ee}function je(t){return 32767&t}function Pe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Re=!0;function Ne(t){const e=Re;return Re=t,e}let De=0;function Le(t,e){const n=Me(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Fe(r.data,t),Fe(e,null),Fe(r.blueprint,null));const i=Ue(t,e),o=t.injectorIndex;if(Ae(i)){const t=je(i),n=Pe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Fe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Me(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ue(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ee;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ee}function Ve(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=De++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function qe(t,e,n){if(n&k.Optional)return t;b(e,"NodeInjector")}function Be(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=j(void 0);try{return i?i.get(e,r,n&k.Optional):P(e,r,n&k.Optional)}finally{j(o)}}return qe(r,e,n)}function He(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Y)?t[Y]:void 0;return"number"==typeof e?e>=0?255&e:ze:e}(n);if("function"==typeof o){if(!ae(e,t,r))return r&k.Host?qe(i,n,r):Be(e,n,r,i);try{const t=o();if(null!=t||r&k.Optional)return t;b(n)}finally{de()}}else if("number"==typeof o){let i=null,s=Me(t,e),a=Ee,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?Ue(t,e):e[s+8],a!==Ee&&Ye(r,!1)?(i=e[1],s=je(a),e=Pe(a,e)):s=-1);-1!==s;){const t=e[1];if($e(o,s,t.data)){const t=Ge(s,e,n,i,r,u);if(t!==Qe)return t}a=e[s+8],a!==Ee&&Ye(r,e[1].data[s+8]===u)&&$e(o,s,e)?(i=t,s=je(a),e=Pe(a,e)):s=-1}}}return Be(e,n,r,i)}const Qe={};function ze(){return new Xe(zt(),Bt())}function Ge(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=We(a,s,n,null==r?pt(a)&&Re:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?Ke(e,s,u,a):Qe}function We(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&mt(t)&&t.type===n)return u}return null}function Ke(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Oe){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Ne(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?j(s.injectImpl):null;ae(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&j(u),Ne(a),s.resolving=!1,de()}}return i}function $e(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ye(t,e){return!(t&k.Self||t&k.Host&&e)}class Xe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return He(this._tNode,this._lView,t,void 0,e)}}function Ze(t){return R(()=>{const e=t.prototype.constructor,n=e[$]||Je(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[$]||Je(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Je(t){return g(t)?()=>{const e=Je(p(t));return e&&e()}:yt(t)}function tn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Te(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(zt(),t)}const en="__parameters__";function nn(t,e,n){return R(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(en)?t[en]:Object.defineProperty(t,en,{value:[]})[en];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class rn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const on=new rn("AnalyzeForEntryComponents"),sn=Function;function an(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),an(r,e)):e!==t&&e.push(r)}return e}function un(t,e){t.forEach(t=>Array.isArray(t)?un(t,e):e(t))}function cn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ln(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function hn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function dn(t,e,n){let r=pn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function fn(t,e){const n=pn(t,e);if(n>=0)return t[1|n]}function pn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const gn={},mn=/\n/gm,yn="__source",vn=u({provide:String,useValue:u});let bn;function _n(t){const e=bn;return bn=t,e}function wn(t,e=k.Default){if(void 0===bn)throw new Error("inject() must be called from an injection context");return null===bn?P(t,void 0,e):bn.get(t,e&k.Optional?null:void 0,e)}function Cn(t,e=k.Default){return(A||wn)(p(t),e)}function En(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(Cn(t,n))}else e.push(Cn(r))}return e}function On(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Sn=On(nn("Inject",t=>({token:t})),-1),Tn=On(nn("Optional"),8),In=On(nn("SkipSelf"),4);let xn,kn;function An(t){var e;return(null===(e=function(){if(void 0===xn&&(xn=null,V.trustedTypes))try{xn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return xn}())||void 0===e?void 0:e.createHTML(t))||t}function jn(t){var e;return(null===(e=function(){if(void 0===kn&&(kn=null,V.trustedTypes))try{kn=V.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return kn}())||void 0===e?void 0:e.createHTML(t))||t}class Pn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Rn extends Pn{getTypeName(){return"HTML"}}class Nn extends Pn{getTypeName(){return"Style"}}class Dn extends Pn{getTypeName(){return"Script"}}class Ln extends Pn{getTypeName(){return"URL"}}class Fn extends Pn{getTypeName(){return"ResourceURL"}}function Mn(t){return t instanceof Pn?t.changingThisBreaksApplicationSecurity:t}function Un(t,e){const n=Vn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Vn(t){return t instanceof Pn&&t.getTypeName()||null}function qn(t){return new Rn(t)}function Bn(t){return new Nn(t)}function Hn(t){return new Dn(t)}function Qn(t){return new Ln(t)}function zn(t){return new Fn(t)}class Gn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(An(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Wn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=An(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=An(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Kn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$n=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Yn(t){return(t=String(t)).match(Kn)||t.match($n)?t:"unsafe:"+t}function Xn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Zn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Jn=Xn("area,br,col,hr,img,wbr"),tr=Xn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),er=Xn("rp,rt"),nr=Zn(er,tr),rr=Zn(Jn,Zn(tr,Xn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zn(er,Xn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),nr),ir=Xn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),or=Xn("srcset"),sr=Zn(ir,or,Xn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ar=Xn("script,style,template");class ur{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!rr.hasOwnProperty(e))return this.sanitizedSomething=!0,!ar.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!sr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;ir[o]&&(s=Yn(s)),or[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Yn(t.trim())).join(", ")),this.buf.push(" ",e,'="',hr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();rr.hasOwnProperty(e)&&!Jn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(hr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const cr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lr=/([^\#-~ |!])/g;function hr(t){return t.replace(/&/g,"&amp;").replace(cr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(lr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let dr;function fr(t,e){let n=null;try{dr=dr||function(t){const e=new Wn(t);return function(){try{return!!(new window.DOMParser).parseFromString(An(""),"text/html")}catch(t){return!1}}()?new Gn(e):e}(t);let r=e?String(e):"";n=dr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=dr.getInertBodyElement(r)}while(r!==o);return An((new ur).sanitizeChildren(pr(n)||n))}finally{if(n){const t=pr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function pr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var gr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function mr(t){const e=vr();return e?jn(e.sanitize(gr.HTML,t)||""):Un(t,"HTML")?jn(Mn(t)):fr(Tt(),y(t))}function yr(t){const e=vr();return e?e.sanitize(gr.URL,t)||"":Un(t,"URL")?Mn(t):Yn(y(t))}function vr(){const t=Bt();return t&&t[12]}function br(t){return t.ngDebugContext}function _r(t){return t.ngOriginalError}function wr(t,...e){t.error(...e)}class Cr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||wr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?br(t)?br(t):this._findContext(_r(t)):null}_findOriginalError(t){let e=_r(t);for(;e&&_r(e);)e=_r(e);return e}}function Er(t,e){t.__ngContext__=e}const Or=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function Sr(t){return t instanceof Function?t():t}var Tr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Ir(t,e){return(void 0)(t,e)}function xr(t){const e=t[3];return dt(e)?e[3]:e}function kr(t){return jr(t[13])}function Ar(t){return jr(t[4])}function jr(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Pr(t,e,n,r,i){if(null!=r){let o,s=!1;dt(r)?o=r:ht(r)&&(s=!0,r=r[0]);const a=kt(r);0===t&&null!==n?null==i?Vr(e,n,a):Ur(e,n,a,i||null,!0):1===t&&null!==n?Ur(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Br(t,e);r&&function(t,e,n,r){It(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==kt(n)&&Pr(e,t,r,o,i);for(let s=lt;s<n.length;s++){const i=n[s];Yr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Rr(t,e,n){return It(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Nr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ut(i,-1)),n.splice(r,1)}function Dr(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Nr(o,r),e>0&&(t[n-1][4]=r[4]);const s=ln(t,lt+e);Yr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Lr(t,e){if(!(256&e[2])){const n=e[11];It(n)&&n.destroyNode&&Yr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Fr(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&Fr(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&Fr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Fr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Oe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):kt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&It(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&Nr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Mr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===D.None||e===D.Emulated)return null}return jt(r,n)}(t,e.parent,n)}function Ur(t,e,n,r,i){It(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Vr(t,e,n){It(t)?t.appendChild(e,n):e.appendChild(n)}function qr(t,e,n,r,i){null!==r?Ur(t,e,n,r,i):Vr(t,e,n)}function Br(t,e){return It(t)?t.parentNode(e):e.parentNode}function Hr(t,e,n){return Qr(t,e,n)}let Qr=function(t,e,n){return 40&t.type?jt(t,n):null};function zr(t,e,n,r){const i=Mr(t,r,e),o=e[11],s=Hr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)qr(o,i,n[a],s,!1);else qr(o,i,n,s,!1)}function Gr(t,e){if(null!==e){const n=e.type;if(3&n)return jt(e,t);if(4&n)return Kr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Gr(t,n);{const n=t[e.index];return dt(n)?Kr(-1,n):kt(n)}}if(32&n)return Ir(e,t)()||kt(t[e.index]);{const n=Wr(t,e);return null!==n?Array.isArray(n)?n[0]:Gr(xr(t[16]),n):Gr(t,e.next)}}return null}function Wr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Kr(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Gr(t,r)}return e[7]}function $r(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Er(kt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)$r(t,e,n.child,r,i,o,!1),Pr(e,t,i,a,o);else if(32&u){const s=Ir(n,r);let u;for(;u=s();)Pr(e,t,i,u,o);Pr(e,t,i,a,o)}else 16&u?Xr(t,e,r,n,i,o):Pr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Yr(t,e,n,r,i,o){$r(n,r,t.firstChild,e,i,o,!1)}function Xr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Pr(e,t,i,a[u],o);else $r(t,e,a,s[3],i,o,!0)}function Zr(t,e,n){It(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Jr(t,e,n){It(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ti(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ei="ng-template";function ni(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ti(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ri(t){return 4===t.type&&t.value!==ei}function ii(t,e,n){return e===(4!==t.type||n?t.value:ei)}function oi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Te(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ii(t,u,n)||""===u&&1===e.length){if(si(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ni(t.attrs,c,n)){if(si(r))return!1;s=!0}continue}const l=ai(8&r?"class":u,i,ri(t),n);if(-1===l){if(si(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ti(e,c,0)||2&r&&c!==t){if(si(r))return!1;s=!0}}}}else{if(!s&&!si(r)&&!si(u))return!1;if(s&&si(u))continue;s=!1,r=u|1&r}}return si(r)||s}function si(t){return 0==(1&t)}function ai(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ui(t,e,n=!1){for(let r=0;r<e.length;r++)if(oi(t,e[r],n))return!0;return!1}function ci(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function li(t,e){return t?":not("+e.trim()+")":e}function hi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||si(s)||(e+=li(o,i),i=""),r=s,o=o||!si(r);n++}return""!==i&&(e+=li(o,i)),e}const di={};function fi(t){pi(Ht(),Bt(),pe()+t,Yt())}function pi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ve(e,r,n)}else{const r=t.preOrderHooks;null!==r&&be(e,r,0,n)}ge(n)}function gi(t,e){return t<<17|e<<2}function mi(t){return t>>17&32767}function yi(t){return 2|t}function vi(t){return(131068&t)>>2}function bi(t,e){return-131069&t|e<<2}function _i(t){return 1|t}function wi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];oe(i),n.contentQueries(2,e[o],o)}}}function Ci(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Mt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Ei(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Gt(),s=Kt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Vt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Vt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Wt(o,!0),o}function Oi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Si(t,e,n){ue(e);try{const r=t.viewQuery;null!==r&&eo(1,r,n);const i=t.template;null!==i&&xi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&wi(t,e),t.staticViewQueries&&eo(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Yi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,fe()}}function Ti(t,e,n,r){const i=e[2];if(256==(256&i))return;ue(e);const o=Yt();try{Mt(e),Vt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&xi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&ve(e,n,null)}else{const n=t.preOrderHooks;null!==n&&be(e,n,0,null),_e(e,0)}if(function(t){for(let e=kr(t);null!==e;e=Ar(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ut(r,1),n[2]|=1024}}}(e),function(t){for(let e=kr(t);null!==e;e=Ar(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&Ti(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&wi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&ve(e,n)}else{const n=t.contentHooks;null!==n&&be(e,n,1),_e(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ge(~r);else{const i=r,o=n[++t],s=n[++t];ee(o,i),s(2,e[i])}}}finally{ge(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ki(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&eo(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&ve(e,n)}else{const n=t.viewHooks;null!==n&&be(e,n,2),_e(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ut(e[3],-1))}finally{fe()}}function Ii(t,e,n,r){const i=e[10],o=!Yt(),s=Dt(e);try{o&&!s&&i.begin&&i.begin(),s&&Si(t,e,r),Ti(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function xi(t,e,n,r,i){const o=pe();try{ge(-1),2&r&&e.length>ct&&pi(t,e,ct,Yt()),n(r,i)}finally{ge(o)}}function ki(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Ai(t,e,n){qt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Le(n,e),Er(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=mt(r);o&&Qi(e,n,r);const u=Ke(e,t,a,n);Er(u,e),null!==s&&zi(0,a-i,u,r,0,s),o&&(Rt(n.index,e)[8]=u)}}(t,e,n,jt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Vt.lFrame.currentDirectiveIndex;try{ge(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ne(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ui(r,i)}}finally{ge(-1),ne(s)}}(t,e,n))}function ji(t,e,n=jt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Pi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ri(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ri(t,e,n,r,i,o,s,a,u,c){const l=ct+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:di);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Ni(t,e,n,r){const i=ro(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&io(t).push(r,i.length-1))}function Di(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Li(t,e,n,r,i,o,s,a){const u=jt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(so(t,n,c,r,i),pt(e)&&function(t,e){const n=Rt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,It(o)?o.setProperty(u,r,i):Ie(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Fi(t,e,n,r){let i=!1;if(qt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ui(n,s.selectors,!1)&&(i||(i=[]),Ve(Le(n,e),t,s.type),mt(s)?(Vi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Bi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Oi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=xe(n.mergedAttrs,c.hostAttrs),Hi(t,n,e,u,c),qi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ri(e)?null:Gi(n,i);o.push(c),s=Di(n,u,s),a=Di(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=xe(n.mergedAttrs,n.attrs),i}function Mi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ui(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Vi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function qi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mt(e)&&(n[""]=t)}}function Bi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Hi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=yt(i.type)),s=new Oe(o,mt(i),null);t.blueprint[r]=s,n[r]=s,Mi(t,e,0,r,Oi(t,n,i.hostVars,di),i)}function Qi(t,e,n){const r=jt(e,t),i=Pi(n),o=t[10],s=Xi(t,Ci(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function zi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Gi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Wi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ki(t,e){const n=Rt(e,t);if(Lt(n)){const t=n[1];80&n[2]?Ti(t,n,t.template,n[8]):n[5]>0&&$i(n)}}function $i(t){for(let n=kr(t);null!==n;n=Ar(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ti(t,e,t.template,e[8])}else e[5]>0&&$i(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Rt(e[n],t);Lt(r)&&r[5]>0&&$i(r)}}function Yi(t,e){const n=Rt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Si(r,n,n[8])}function Xi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Zi(t){for(;t;){t[2]|=64;const e=xr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ji(t,e,n){const r=e[10];r.begin&&r.begin();try{Ti(t,e,t.template,n)}catch(i){throw oo(e,i),i}finally{r.end&&r.end()}}function to(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Nt(n),i=r[1];Ii(i,r,i.template,n)}}(t[8])}function eo(t,e,n){oe(0),e(t,n)}const no=(()=>Promise.resolve(null))();function ro(t){return t[7]||(t[7]=[])}function io(t){return t.cleanup||(t.cleanup=[])}function oo(t,e){const n=t[9],r=n?n.get(Cr,null):null;r&&r.handleError(e)}function so(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function ao(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const uo=new rn("INJECTOR",-1);class co{get(t,e=gn){if(e===gn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const lo=new rn("Set Injector scope."),ho={},fo={},po=[];let go;function mo(){return void 0===go&&(go=new co),go}function yo(t,e=null,n=null,r){return new vo(t,n,e||mo(),r)}class vo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&un(e,n=>this.processProvider(n,t,e)),un([t],t=>this.processInjectorType(t,[],i)),this.records.set(uo,wo(void 0,this));const o=this.records.get(lo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=gn,n=k.Default){this.assertNotDestroyed();const r=_n(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof rn)&&C(t);e=n&&this.injectableDefInScope(n)?wo(bo(t),ho):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?mo():this.parent).get(t,e=n&k.Optional&&e===gn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[yn]&&i.unshift(e[yn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(mn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{_n(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=O(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=O(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{un(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];un(r,t=>this.processProvider(t,n,r||po))}}this.injectorDefTypes.add(o);const a=yt(o)||(()=>new o);this.records.set(o,wo(a,ho));const u=r.providers;if(null!=u&&!s){const e=t;un(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Eo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return Co(t)?wo(void 0,t.useValue):wo(_o(t),ho)}(t);if(Eo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=wo(void 0,ho,!0),e.factory=()=>En(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ho&&(e.value=fo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function bo(t){const e=C(t),n=null!==e?e.factory:yt(t);if(null!==n)return n;if(t instanceof rn)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=hn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[S]||t[I]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function _o(t,e,n){let r;if(Eo(t)){const e=p(t);return yt(e)||bo(e)}if(Co(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...En(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Cn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return yt(e)||bo(e);r=()=>new e(...En(t.deps))}var i;return r}function wo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Co(t){return null!==t&&"object"==typeof t&&vn in t}function Eo(t){return"function"==typeof t}const Oo=function(t,e,n){return function(t,e=null,n=null,r){const i=yo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let So=(()=>{class t{static create(t,e){return Array.isArray(t)?Oo(t,e,""):Oo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=gn,t.NULL=new co,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>Cn(uo)}),t.__NG_ELEMENT_ID__=-1,t})();function To(t,e){ye(Nt(t)[1],zt())}function Io(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(mt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=xo(t.inputs),e.declaredInputs=xo(t.declaredInputs),e.outputs=xo(t.outputs);const n=i.hostBindings;n&&jo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&ko(t,o),s&&Ao(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),mt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Io&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xe(i.hostAttrs,n=xe(n,i.hostAttrs))}}(r)}function xo(t){return t===q?{}:t===H?[]:t}function ko(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Ao(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function jo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Po=null;function Ro(){if(!Po){const t=V.Symbol;if(t&&t.iterator)Po=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Po=n)}}}return Po}function No(t){return!!Do(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ro()in t)}function Do(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Lo(t,e,n){return t[e]=n}function Fo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Mo(t,e,n,r){const i=Bt();return Fo(i,Jt(),e)&&(Ht(),function(t,e,n,r,i,o){const s=jt(t,e);!function(t,e,n,r,i,o,s){if(null==o)It(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);It(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(me(),i,t,e,n,r)),Mo}function Uo(t,e,n,r){return Fo(t,Jt(),n)?e+y(n)+r:di}function Vo(t,e,n,r,i,o,s,a){const u=Bt(),c=Ht(),l=t+ct,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Ei(e,t,4,s||null,Ft(c,a));Fi(e,n,l,Ft(c,u)),ye(e,l);const h=l.tViews=Ri(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Wt(h,!1);const d=u[11].createComment("");zr(c,u,d,h),Er(d,u),Xi(u,u[l]=Wi(d,u,d,h)),gt(h)&&Ai(c,u,h),null!=s&&ji(u,h,a)}function qo(t){return function(t,e){return t[e]}(Vt.lFrame.contextLView,ct+t)}function Bo(t,e=k.Default){const n=Bt();return null===n?Cn(t,e):He(zt(),n,p(t),e)}function Ho(t,e,n){const r=Bt();return Fo(r,Jt(),e)&&Li(Ht(),me(),r,t,e,r[11],n,!1),Ho}function Qo(t,e,n,r,i){const o=i?"class":"style";so(t,n,e.inputs[o],o,r)}function zo(t,e,n,r){const i=Bt(),o=Ht(),s=ct+t,a=i[11],u=i[s]=Rr(a,e,Vt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Ei(e,t,2,i,Ft(a,o));return Fi(e,n,u,Ft(a,s)),null!==u.attrs&&ao(u,u.attrs,!1),null!==u.mergedAttrs&&ao(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Wt(c,!0);const l=c.mergedAttrs;null!==l&&Se(a,u,l);const h=c.classes;null!==h&&Jr(a,u,h);const d=c.styles;null!==d&&Zr(a,u,d),64!=(64&c.flags)&&zr(o,i,u,c),0===Vt.lFrame.elementDepthCount&&Er(u,i),Vt.lFrame.elementDepthCount++,gt(c)&&(Ai(o,i,c),ki(o,c,i)),null!==r&&ji(i,c)}function Go(){let t=zt();Kt()?$t():(t=t.parent,Wt(t,!1));const e=t;Vt.lFrame.elementDepthCount--;const n=Ht();n.firstCreatePass&&(ye(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Qo(n,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Qo(n,e,Bt(),e.stylesWithoutHost,!1)}function Wo(t,e,n,r){zo(t,e,n,r),Go()}function Ko(t,e,n){const r=Bt(),i=Ht(),o=t+ct,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Ft(o,r),a=Ei(e,t,8,"ng-container",s);return null!==s&&ao(a,s,!0),Fi(e,n,a,Ft(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Wt(s,!0);const a=r[o]=r[11].createComment("");zr(i,r,a,s),Er(a,r),gt(s)&&(Ai(i,r,s),ki(i,s,r)),null!=n&&ji(r,s)}function $o(){let t=zt();const e=Ht();Kt()?$t():(t=t.parent,Wt(t,!1)),e.firstCreatePass&&(ye(e,t),ft(t)&&e.queries.elementEnd(t))}function Yo(){return Bt()}function Xo(t){return!!t&&"function"==typeof t.then}function Zo(t){return!!t&&"function"==typeof t.subscribe}const Jo=Zo;function ts(t,e,n=!1,r){const i=Bt(),o=Ht(),s=zt();return function(t,e,n,r,i,o,s=!1,a){const u=gt(r),c=t.firstCreatePass&&io(t),l=ro(e);let h=!0;if(3&r.type){const d=jt(r,e),f=a?a(d):q,p=f.target||d,g=l.length,m=a?t=>a(kt(t[r.index])).target:r.index;if(It(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ns(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=ns(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=ns(r,e,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),ts}function es(t,e,n){try{return!1!==e(n)}catch(r){return oo(t,r),!1}}function ns(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Rt(t.index,e):e;0==(32&e[2])&&Zi(s);let a=es(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=es(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function rs(t=1){return function(t){return(Vt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Vt.lFrame.contextLView))[8]}(t)}function is(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?ui(t,o,!0):ci(r,o))return i}else n=i}return n}function os(t){const e=Bt()[16][6];if(!e.projection){const n=e.projection=hn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?is(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function ss(t,e=0,n){const r=Bt(),i=Ht(),o=Ei(i,ct+t,16,null,n||null);null===o.projection&&(o.projection=e),$t(),64!=(64&o.flags)&&function(t,e,n){Xr(e[11],0,e,n,Mr(t,n,e),Hr(n.parent||e[6],n,e))}(i,r,o)}function as(t,e,n){return us(t,"",e,"",n),as}function us(t,e,n,r,i){const o=Bt(),s=Uo(o,e,n,r);return s!==di&&Li(Ht(),me(),o,t,s,o[11],i,!1),us}function cs(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?mi(o):vi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];ls(t[a],e)&&(u=!0,t[a+1]=r?_i(n):yi(n)),a=r?mi(n):vi(n)}u&&(t[n+1]=r?yi(o):_i(o))}function ls(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pn(t,e)>=0}const hs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ds(t){return t.substring(hs.key,hs.keyEnd)}function fs(t,e){const n=hs.textEnd;return n===e?-1:(e=hs.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,hs.key=e,n),ps(t,e,n))}function ps(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function gs(t,e,n){return bs(t,e,n,!1),gs}function ms(t,e){return bs(t,e,null,!0),ms}function ys(t){!function(t,e,n,r){const i=Ht(),o=te(2);i.firstUpdatePass&&ws(i,null,o,r);const s=Bt();if(n!==di&&Fo(s,o,n)){const a=i.data[pe()];if(Is(a,r)&&!_s(i,o)){let t=a.classesWithoutHost;null!==t&&(n=h(t,n||"")),Qo(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===di&&(i=B);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const s=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0;let f,p=null;l===h?(u+=2,c+=2,s!==d&&(p=h,f=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,f=d),null!==p&&Os(t,e,n,r,p,f,true,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return B;const r=[],i=Mn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(dn,vs,t,!0)}function vs(t,e){for(let n=function(t){return function(t){hs.key=0,hs.keyEnd=0,hs.value=0,hs.valueEnd=0,hs.textEnd=t.length}(t),fs(t,ps(t,0,hs.textEnd))}(e);n>=0;n=fs(e,n))dn(t,ds(e),!0)}function bs(t,e,n,r){const i=Bt(),o=Ht(),s=te(2);o.firstUpdatePass&&ws(o,t,s,r),e!==di&&Fo(i,s,e)&&Os(o,o.data[pe()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Mn(t)))),t}(e,n),r,s)}function _s(t,e){return e>=t.expandoStartIndex}function ws(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[pe()],s=_s(t,n);Is(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=re(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Es(n=Cs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Cs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==vi(r))return t[mi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Cs(null,t,e,n[1],r),n=Es(n,e.attrs,r),function(t,e,n,r){t[mi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Es(r,t[o].hostAttrs,n);return Es(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=mi(s),u=vi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||pn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=mi(t[a+1]);t[r+1]=gi(e,a),0!==e&&(t[e+1]=bi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=gi(a,0),0!==a&&(t[a+1]=bi(t[a+1],r)),a=r;else t[r+1]=gi(u,0),0===a?a=r:t[u+1]=bi(t[u+1],r),u=r;l&&(t[r+1]=yi(t[r+1])),cs(t,c,r,!0),cs(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&pn(o,e)>=0&&(n[r+1]=_i(n[r+1]))}(e,c,t,r,o),s=gi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Cs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Es(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Es(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),dn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Os(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Ts(1==(1&c)?Ss(u,e,n,i,vi(c),s):void 0)||(Ts(o)||2==(2&c)&&(o=Ss(u,null,n,i,a,s)),function(t,e,n,r,i){const o=It(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Tr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Tr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,At(pe(),n),i,o))}function Ss(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===di&&(l=c?B:void 0);let h=c?fn(l,r):u===r?l:void 0;if(o&&!Ts(h)&&(h=fn(e,r)),Ts(h)&&(a=h,s))return a;const d=t[i+1];i=s?mi(d):vi(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=fn(t,r))}return a}function Ts(t){return void 0!==t}function Is(t,e){return 0!=(t.flags&(e?16:32))}function xs(t,e=""){const n=Bt(),r=Ht(),i=t+ct,o=r.firstCreatePass?Ei(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return It(t)?t.createText(e):t.createTextNode(e)}(n[11],e);zr(r,n,s,o),Wt(o,!1)}function ks(t){return As("",t,""),ks}function As(t,e,n){const r=Bt(),i=Uo(r,t,e,n);return i!==di&&function(t,e,n){const r=At(e,t);!function(t,e,n){It(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,pe(),i),As}function js(t,e,n){const r=Bt();return Fo(r,Jt(),e)&&Li(Ht(),me(),r,t,e,r[11],n,!0),js}function Ps(t,e,n){const r=Bt();if(Fo(r,Jt(),e)){const i=Ht(),o=me();Li(i,o,r,t,e,function(t,e,n){return(null===t||mt(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}(re(i.data),o,r),n,!0)}return Ps}const Rs=void 0;var Ns=["en",[["a","p"],["AM","PM"],Rs],[["AM","PM"],Rs,Rs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rs,"{1} 'at' {0}",Rs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Ds={};function Ls(t,e,n){"string"!=typeof e&&(n=e,e=t[qs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Ds[e]=t,n&&(Ds[e][qs.ExtraData]=n)}function Fs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Vs(e);if(n)return n;const r=e.split("-")[0];if(n=Vs(r),n)return n;if("en"===r)return Ns;throw new Error(`Missing locale data for the locale "${t}".`)}function Ms(t){return Fs(t)[qs.CurrencyCode]||null}function Us(t){return Fs(t)[qs.PluralCase]}function Vs(t){return t in Ds||(Ds[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),Ds[t]}var qs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Bs="en-US";let Hs=Bs;function Qs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Hs=t.toLowerCase().replace(/_/g,"-"))}function zs(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)zs(t[o],e,n,r,i);else{const o=Ht(),s=Bt();let a=Eo(t)?t:p(t.provide),u=_o(t);const c=zt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Eo(t)||!t.multi){const r=new Oe(u,i,Bo),f=Ks(a,e,i?l:l+d,h);-1===f?(Ve(Le(c,s),o,a),Gs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=Ks(a,e,l+d,h),p=Ks(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Ve(Le(c,s),o,a);const l=function(t,e,n,r,i){const o=new Oe(t,n,Bo);return o.multi=[],o.index=e,o.componentProviders=0,Ws(o,i,r&&!n),o}(i?Ys:$s,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Gs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Gs(o,t,f>-1?f:p,Ws(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Gs(t,e,n,r){const i=Eo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Ws(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ks(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function $s(t,e,n,r){return Xs(this.multi,[])}function Ys(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ke(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Xs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Xs(i,o);return o}function Xs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Zs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Ht();if(r.firstCreatePass){const i=mt(t);zs(n,r.data,r.blueprint,i,!0),zs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Js{}class ta{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ea=(()=>{class t{}return t.NULL=new ta,t})();function na(...t){}function ra(t,e){return new oa(jt(t,e))}const ia=function(){return ra(zt(),Bt())};let oa=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=ia,t})();function sa(t){return t instanceof oa?t.nativeElement:t}class aa{}let ua=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ca(),t})();const ca=function(){const t=Bt(),e=Rt(zt().index,t);return function(t){return t[11]}(ht(e)?e:t)};let la=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class ha{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const da=new ha("11.2.7");class fa{constructor(){}supports(t){return No(t)}create(t){return new ga(t)}}const pa=(t,e)=>e;class ga{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||pa}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ba(n,r,i)?e:n,s=ba(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!No(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ro()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new ma(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new va),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new va),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ma{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ya{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class va{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ya,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ba(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class _a{constructor(){}supports(t){return t instanceof Map||Do(t)}create(){return new wa}}class wa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Do(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ca(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ca{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ea(){return new Oa([new fa])}let Oa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ea()),deps:[[t,new In,new Tn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Ea}),t})();function Sa(){return new Ta([new _a])}let Ta=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Sa()),deps:[[t,new In,new Tn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Sa}),t})();function Ia(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(kt(o)),dt(o))for(let t=lt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Ia(e[1],e,n,r)}const s=n.type;if(8&s)Ia(t,e,n.child,r);else if(32&s){const t=Ir(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Wr(e,n);if(Array.isArray(t))r.push(...t);else{const n=xr(e[16]);Ia(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class xa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Ia(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Dr(t,n),ln(e,n))}this._attachedToViewContainer=!1}Lr(this._lView[1],this._lView)}onDestroy(t){Ni(this._lView[1],this._lView,null,t)}markForCheck(){Zi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ji(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Xt(!0);try{Ji(t,e,n)}finally{Xt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Yr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ka extends xa{constructor(t){super(t),this._view=t}detectChanges(){to(this._view)}checkNoChanges(){!function(t){Xt(!0);try{to(t)}finally{Xt(!1)}}(this._view)}get context(){return null}}const Aa=Pa;let ja=(()=>{class t{}return t.__NG_ELEMENT_ID__=Aa,t.__ChangeDetectorRef__=!0,t})();function Pa(t=!1){return function(t,e,n){if(!n&&pt(t)){const n=Rt(t.index,e);return new xa(n,n)}return 47&t.type?new xa(e[16],e):null}(zt(),Bt(),t)}const Ra=[new _a],Na=new Oa([new fa]),Da=new Ta(Ra),La=function(){return Va(zt(),Bt())};let Fa=(()=>{class t{}return t.__NG_ELEMENT_ID__=La,t})();const Ma=Fa,Ua=class extends Ma{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ci(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Si(e,n,t),new xa(n)}};function Va(t,e){return 4&t.type?new Ua(e,t,ra(t,e)):null}class qa{}class Ba{}const Ha=function(){return $a(zt(),Bt())};let Qa=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ha,t})();const za=Qa,Ga=class extends za{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return ra(this._hostTNode,this._hostLView)}get injector(){return new Xe(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ue(this._hostTNode,this._hostLView);if(Ae(t)){const e=Pe(t,this._hostLView),n=je(t);return new Xe(e[1].data[n+8],e)}return new Xe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Wa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(qa,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ga(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=lt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-lt?(e[4]=n[i],cn(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Kr(i,o),a=n[11],u=Br(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Yr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),cn(Ka(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Wa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Dr(this._lContainer,e);n&&(ln(Ka(this._lContainer),e),Lr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Dr(this._lContainer,e);return n&&null!=ln(Ka(this._lContainer),e)?new xa(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Wa(t){return t[8]}function Ka(t){return t[8]||(t[8]=[])}function $a(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=kt(r);else{const n=e[11];i=n.createComment("");const r=jt(t,e);Ur(n,Br(n,r),i,function(t,e){return It(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Wi(r,e,i,t),Xi(e,n)}return new Ga(n,t,e)}const Ya={};class Xa extends ea{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new tu(e,this.ngModule)}}function Za(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ja=new rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Or});class tu extends Js{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(hi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Za(this.componentDef.inputs)}get outputs(){return Za(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ya,i);return o!==Ya||r===Ya?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(aa,xt),s=i.get(la,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(It(t))return t.selectRootElement(e,n===D.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Rr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Or,clean:no,playerHandler:null,flags:0},d=Ri(0,null,null,1,0,null,null,null,null,null),f=Ci(null,d,h,l,null,null,o,a,s,i);let p,g;ue(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Ei(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(ao(a,u,!0),null!==t&&(Se(i,t,u),null!==a.classes&&Jr(i,t,a.classes),null!==a.styles&&Zr(i,t,a.styles)));const c=r.createRenderer(t,e),l=Ci(n,Pi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Ve(Le(a,n),s,e.type),Vi(s,a),Bi(a,n.length,1)),Xi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)Se(a,c,["ng-version",da.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!si(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Se(a,c,t),e&&e.length>0&&Jr(a,c,e.join(" "))}if(g=Pt(d,ct),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Hi(t,r,e,Oi(t,e,1,null),n));const i=Ke(e,t,r.directiveStart,r);Er(i,e);const o=jt(r,e);return o&&Er(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=zt();e.contentQueries(1,s,t.directiveStart)}const a=zt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ge(a.index),Mi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ui(e,s)),s}(t,this.componentDef,f,h,[To]),Si(d,f,null)}finally{fe()}return new eu(this.componentType,p,ra(g,f),f,g)}}class eu extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ka(r),this.componentType=t}get injector(){return new Xe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const nu=new Map;class ru extends qa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Xa(this);const n=ut(t),r=t[K]||null;r&&Qs(r),this._bootstrapComponents=Sr(n.bootstrap),this._r3Injector=yo(t,e,[{provide:qa,useValue:this},{provide:ea,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=So.THROW_IF_NOT_FOUND,n=k.Default){return t===So||t===qa||t===uo?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class iu extends Ba{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,nu.get(i),n),nu.set(i,n));const o=Sr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ru(this.moduleType,t)}}function ou(t,e,n){const r=Zt()+t,i=Bt();return i[r]===di?Lo(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function su(t,e,n,r){return function(t,e,n,r,i,o){const s=e+n;return Fo(t,s,i)?Lo(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===di?void 0:n}(t,s+1)}(Bt(),Zt(),t,e,n,r)}const au=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function uu(){return this._results[Ro()]()}class cu{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ro(),n=cu.prototype;n[e]||(n[e]=uu)}get changes(){return this._changes||(this._changes=new au)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=an(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class lu{constructor(t){this.queryList=t,this.matches=null}clone(){return new lu(this.queryList)}setDirty(){this.queryList.setDirty()}}class hu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new hu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Su(t,e).matches&&this.queries[e].setDirty()}}class du{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class fu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new fu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class pu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new pu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,gu(e,i)),this.matchTNodeWithReadOption(t,e,We(e,t,i,!1,!1))}else n===Fa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,We(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===oa||r===Qa||r===Fa&&4&e.type)this.addMatch(e.index,-2);else{const n=We(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function gu(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function mu(t,e,n,r){return-1===n?function(t,e){return 11&t.type?ra(t,e):4&t.type?Va(t,e):null}(e,t):-2===n?function(t,e,n){return n===oa?ra(e,t):n===Fa?Va(e,t):n===Qa?$a(e,t):void 0}(t,e,r):Ke(t,t[1],n,e)}function yu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:mu(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function vu(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=yu(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=lt;t<s.length;t++){const e=s[t];e[17]===e[3]&&vu(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];vu(n[1],n,i,r)}}}}}return r}function bu(t){const e=Bt(),n=Ht(),r=ie();oe(r+1);const i=Su(n,r);if(t.dirty&&Dt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?vu(n,e,r,[]):yu(n,e,i,r);t.reset(o,sa),t.notifyOnChanges()}return!0}return!1}function _u(t,e,n){const r=Ht();r.firstCreatePass&&(Ou(r,new du(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Eu(r,Bt(),e)}function wu(t,e,n,r){const i=Ht();if(i.firstCreatePass){const o=zt();Ou(i,new du(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Eu(i,Bt(),n)}function Cu(){return t=Bt(),e=ie(),t[19].queries[e].queryList;var t,e}function Eu(t,e,n){const r=new cu(4==(4&n));Ni(t,e,r,r.destroy),null===e[19]&&(e[19]=new hu),e[19].queries.push(new lu(r))}function Ou(t,e,n){null===t.queries&&(t.queries=new fu),t.queries.track(new pu(e,n))}function Su(t,e){return t.queries.getByIndex(e)}function Tu(t,e){return Va(t,e)}function Iu(t=k.Default){const e=Pa(!0);if(null!=e||t&k.Optional)return e;b("ChangeDetectorRef")}const xu=new rn("Application Initializer");let ku=(()=>{class t{constructor(t){this.appInits=t,this.resolve=na,this.reject=na,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Xo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Cn(xu,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Au=new rn("AppId"),ju={provide:Au,useFactory:function(){return`${Pu()}${Pu()}${Pu()}`},deps:[]};function Pu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ru=new rn("Platform Initializer"),Nu=new rn("Platform ID"),Du=new rn("appBootstrapListener");let Lu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Fu=new rn("LocaleId"),Mu=new rn("DefaultCurrencyCode");class Uu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Vu=function(t){return new iu(t)},qu=Vu,Bu=function(t){return Promise.resolve(Vu(t))},Hu=function(t){const e=Vu(t),n=Sr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new tu(n)),t},[]);return new Uu(e,n)},Qu=Hu,zu=function(t){return Promise.resolve(Hu(t))};let Gu=(()=>{class t{constructor(){this.compileModuleSync=qu,this.compileModuleAsync=Bu,this.compileModuleAndAllComponentsSync=Qu,this.compileModuleAndAllComponentsAsync=zu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Wu=(()=>Promise.resolve(0))();function Ku(t){"undefined"==typeof Zone?Wu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class $u{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new au(!1),this.onMicrotaskEmpty=new au(!1),this.onStable=new au(!1),this.onError=new au(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Zu(t),Xu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Zu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Ju(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),tc(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Ju(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),tc(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Zu(t),Xu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$u.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if($u.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Yu,na,na);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Yu={};function Xu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Zu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Ju(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function tc(t){t._nesting--,Xu(t)}class ec{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new au,this.onMicrotaskEmpty=new au,this.onStable=new au,this.onError=new au}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let nc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$u.assertNotInAngularZone(),Ku(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ku(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Cn($u))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),rc=(()=>{class t{constructor(){this._applications=new Map,ac.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ac.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class ic{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function oc(t){ac=t}let sc,ac=new ic,uc=!0,cc=!1;function lc(){return cc=!0,uc}function hc(){if(cc)throw new Error("Cannot enable prod mode after platform setup.");uc=!1}const dc=new rn("AllowMultipleToken");class fc{constructor(t,e){this.name=t,this.token=e}}function pc(t,e,n=[]){const r=`Platform: ${e}`,i=new rn(r);return(e=[])=>{let o=gc();if(!o||o.injector.get(dc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:lo,useValue:"platform"});!function(t){if(sc&&!sc.destroyed&&!sc.injector.get(dc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");sc=t.get(mc);const e=t.get(Ru,null);e&&e.forEach(t=>t())}(So.create({providers:t,name:r}))}return function(t){const e=gc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function gc(){return sc&&!sc.destroyed?sc:null}let mc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ec:("zone.js"===t?void 0:t)||new $u({enableLongStackTrace:lc(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:$u,useValue:n}];return n.run(()=>{const e=So.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Cr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{bc(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Xo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(ku);return t.runInitializers(),t.donePromise.then(()=>(Qs(i.injector.get(Fu,Bs)||Bs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=yc({},e);return function(t,e,n){const r=new iu(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(vc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Cn(So))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function yc(t,e){return Array.isArray(e)?e.reduce(yc,t):Object.assign(Object.assign({},t),e)}let vc=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{$u.assertNotInAngularZone(),Ku(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{$u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Js?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(qa),i=n.create(So.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(nc,null),a=s&&i.injector.get(rc);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),bc(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;bc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Du,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Cn($u),Cn(So),Cn(Cr),Cn(ea),Cn(ku))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function bc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class _c{}class wc{}const Cc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ec=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Cc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Oc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Oc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Cn(Gu),Cn(wc,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Oc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Sc=function(t){return null},Tc=pc(null,"core",[{provide:Nu,useValue:"unknown"},{provide:mc,deps:[So]},{provide:rc,deps:[]},{provide:Lu,deps:[]}]),Ic=[{provide:vc,useClass:vc,deps:[$u,So,Cr,ea,ku]},{provide:Ja,deps:[$u],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ku,useClass:ku,deps:[[new Tn,xu]]},{provide:Gu,useClass:Gu,deps:[]},ju,{provide:Oa,useFactory:function(){return Na},deps:[]},{provide:Ta,useFactory:function(){return Da},deps:[]},{provide:Fu,useFactory:function(t){return Qs(t=t||"undefined"!=typeof $localize&&$localize.locale||Bs),t},deps:[[new Sn(Fu),new Tn,new In]]},{provide:Mu,useValue:"USD"}];let xc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Cn(vc))},t.\u0275mod=nt({type:t}),t.\u0275inj=w({providers:Ic}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return O}),n.d(e,"c",function(){return E}),n.d(e,"d",function(){return F}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"i",function(){return P}),n.d(e,"j",function(){return M}),n.d(e,"k",function(){return l}),n.d(e,"l",function(){return h}),n.d(e,"m",function(){return B}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return j}),n.d(e,"p",function(){return m}),n.d(e,"q",function(){return y}),n.d(e,"r",function(){return b}),n.d(e,"s",function(){return N}),n.d(e,"t",function(){return _}),n.d(e,"u",function(){return p}),n.d(e,"v",function(){return g}),n.d(e,"w",function(){return C}),n.d(e,"x",function(){return v}),n.d(e,"y",function(){return w}),n.d(e,"z",function(){return A}),n.d(e,"A",function(){return I}),n.d(e,"B",function(){return D}),n.d(e,"C",function(){return L}),n.d(e,"D",function(){return R}),n.d(e,"E",function(){return G}),n.d(e,"F",function(){return z}),n.d(e,"G",function(){return x}),n.d(e,"H",function(){return q}),n.d(e,"I",function(){return H}),n.d(e,"J",function(){return Q});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function m(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return f().indexOf("Electron/")>=0}function _(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function C(){return!1}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return Object(r.c)(e,t),e}(Error),O=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?S(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new E(i,a,r);return u},t}();function S(t,e){return t.replace(T,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var T=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var k=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=k(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},j=function(t){var e=k(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function N(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var F=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function M(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function V(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e,r)+"must be a valid function.")}function Q(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e,r)+"must be a valid context object.")}var z=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return C});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),_=new u.P("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:w,deps:[v,u.A,[new u.B,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Ub(u.C))},t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.l)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Ub)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(s))},t.\u0275prov=Object(r.Hb)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Ub)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Ub)(s).location;return new b(Object(r.Ub)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(a),r.Ub(v,8))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(a),r.Ub(v,8))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(m),r.Ub(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Hb)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w(Object(r.Ub)(m),Object(r.Ub)(a))}function E(t){return t.replace(/\/index.html$/,"")}var O=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.mb;class T{}let I=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case O.Zero:return"zero";case O.One:return"one";case O.Two:return"two";case O.Few:return"few";case O.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(r.v))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),x=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.pb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.vb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.t),r.Lb(r.u),r.Lb(r.l),r.Lb(r.E))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class k{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let A=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new k(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new j(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new j(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.Q),r.Lb(r.L),r.Lb(r.t))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class j{constructor(t,e){this.record=t,this.view=e}}let P=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new R,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){N("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){N("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.Q),r.Lb(r.L))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class R{constructor(){this.$implicit=null,this.ngIf=null}}function N(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[{provide:T,useClass:I}]}),t})();function L(t){return"browser"===t}function F(t){return"server"===t}let M=(()=>{class t{}return t.\u0275prov=Object(r.Hb)({token:t,providedIn:"root",factory:()=>new U(Object(r.Ub)(s),window)}),t})();class U{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=V(this.window.history)||V(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function V(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class q extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new q,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=H||(H=document.querySelector("base"),H)?H.getAttribute("href"):null;return null==e?null:(n=e,B||(B=document.createElement("a")),B.setAttribute("href",n),"/"===B.pathname.charAt(0)?B.pathname:"/"+B.pathname);var n}resetBaseElement(){H=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let B,H=null;const Q=new r.r("TRANSITION_ID"),z=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Q,s,r.s],multi:!0}];class G{static init(){Object(r.X)(new G)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const W=new r.r("EventManagerPlugins");let K=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(W),r.Ub(r.A))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class Y{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let X=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),Z=(()=>{class t extends X{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const J={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tt=/%COMP%/g;function et(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?et(t,i,n):(i=i.replace(tt,t),n.push(i))}return n}function nt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let rt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new it(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new ot(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new st(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=et(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(K),r.Ub(Z),r.Ub(r.c))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class it{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(J[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=J[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=J[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,nt(n)):this.eventManager.addEventListener(t,e,nt(n))}}class ot extends it{constructor(t,e,n,r){super(t),this.component=n;const i=et(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(tt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(tt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class st extends it{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=et(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let at=(()=>{class t extends Y{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const ut=["alt","control","meta","shift"],ct={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ht={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let dt=(()=>{class t extends Y{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(ut.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&lt.hasOwnProperty(e)&&(e=lt[e]))}return ct[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ut.forEach(r=>{r!=n&&(0,ht[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),ft=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:function(){return Object(r.Ub)(pt)},token:t,providedIn:"root"}),t})(),pt=(()=>{class t extends ft{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.I.NONE:return e;case r.I.HTML:return Object(r.db)(e,"HTML")?Object(r.wb)(e):Object(r.bb)(this._doc,String(e)).toString();case r.I.STYLE:return Object(r.db)(e,"Style")?Object(r.wb)(e):e;case r.I.SCRIPT:if(Object(r.db)(e,"Script"))return Object(r.wb)(e);throw new Error("unsafe value used in a script context");case r.I.URL:return Object(r.nb)(e),Object(r.db)(e,"URL")?Object(r.wb)(e):Object(r.cb)(String(e));case r.I.RESOURCE_URL:if(Object(r.db)(e,"ResourceURL"))return Object(r.wb)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return Object(r.eb)(t)}bypassSecurityTrustStyle(t){return Object(r.hb)(t)}bypassSecurityTrustScript(t){return Object(r.gb)(t)}bypassSecurityTrustUrl(t){return Object(r.ib)(t)}bypassSecurityTrustResourceUrl(t){return Object(r.fb)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(s))},t.\u0275prov=Object(r.Hb)({factory:function(){return t=Object(r.Ub)(r.o),new pt(t.get(s));var t},token:t,providedIn:"root"}),t})();const gt=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){q.makeCurrent(),G.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],mt=Object(r.S)(r.W,"browser",gt),yt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:W,useClass:at,multi:!0,deps:[s,r.A,r.C]},{provide:W,useClass:dt,multi:!0,deps:[s]},[],{provide:rt,useClass:rt,deps:[K,Z,r.c]},{provide:r.F,useExisting:rt},{provide:X,useExisting:Z},{provide:Z,useClass:Z,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:K,useClass:K,deps:[W,r.A]},[]];let vt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:Q,useExisting:r.c},z]}}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(t,12))},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:yt,imports:[D,r.f]}),t})();"undefined"!=typeof window&&window;class bt{}const _t="*";function wt(t,e=null){return{type:4,styles:e,timings:t}}function Ct(t,e=null){return{type:2,steps:t,options:e}}function Et(t){return{type:6,styles:t,offset:null}}function Ot(t,e,n){return{type:0,name:t,styles:e,options:n}}function St(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Tt(t){Promise.resolve(null).then(t)}class It{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Tt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class xt{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Tt(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function kt(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function At(t){switch(t.length){case 0:return new It;case 1:return t[0];default:return new xt(t)}}function jt(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case _t:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function Pt(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&Rt(n,"start",t)));break;case"done":t.onDone(()=>r(n&&Rt(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&Rt(n,"destroy",t)))}}function Rt(t,e,n){const r=n.totalTime,i=Nt(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function Nt(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Dt(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function Lt(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Ft=(t,e)=>!1,Mt=(t,e)=>!1,Ut=(t,e,n)=>[];const Vt=kt();(Vt||"undefined"!=typeof Element)&&(Ft=(t,e)=>t.contains(e),Mt=(()=>{if(Vt||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Mt}})(),Ut=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let qt=null,Bt=!1;function Ht(t){qt||(qt=("undefined"!=typeof document?document.body:null)||{},Bt=!!qt.style&&"WebkitAppearance"in qt.style);let e=!0;return qt.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in qt.style,!e&&Bt)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in qt.style),e}const Qt=Mt,zt=Ft,Gt=Ut;function Wt(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let Kt=(()=>{class t{validateStyleProperty(t){return Ht(t)}matchesElement(t,e){return Qt(t,e)}containsElement(t,e){return zt(t,e)}query(t,e,n){return Gt(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new It(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),$t=(()=>{class t{}return t.NOOP=new Kt,t})();const Yt="ng-enter",Xt="ng-leave",Zt="ng-trigger",Jt=".ng-trigger",te="ng-animating",ee=".ng-animating";function ne(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:re(parseFloat(e[1]),e[2])}function re(t,e){switch(e){case"s":return 1e3*t;default:return t}}function ie(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=re(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=re(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function oe(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function se(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else oe(t,n);return n}function ae(t,e,n){return n?e+":"+n+";":""}function ue(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=ae(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=ae(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function ce(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=ye(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),kt()&&ue(t))}function le(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=ye(e);t.style[n]=""}),kt()&&ue(t))}function he(t){return Array.isArray(t)?1==t.length?t[0]:Ct(t):t}const de=new RegExp("{{\\s*(.+?)\\s*}}","g");function fe(t){let e=[];if("string"==typeof t){let n;for(;n=de.exec(t);)e.push(n[1]);de.lastIndex=0}return e}function pe(t,e,n){const r=t.toString(),i=r.replace(de,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function ge(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const me=/-+([a-z0-9])/g;function ye(t){return t.replace(me,(...t)=>t[1].toUpperCase())}function ve(t,e){return 0===t||0===e}function be(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=we(t,e)})}}return e}function _e(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function we(t,e){return window.getComputedStyle(t)[e]}const Ce="*";function Ee(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(Te(i,s)),"<"!=o[0]||i==Ce&&s==Ce||e.push(Te(s,i))}(t,n,e)):n.push(t),n}const Oe=new Set(["true","1"]),Se=new Set(["false","0"]);function Te(t,e){const n=Oe.has(t)||Se.has(t),r=Oe.has(e)||Se.has(e);return(i,o)=>{let s=t==Ce||t==i,a=e==Ce||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?Oe.has(t):Se.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?Oe.has(e):Se.has(e)),s&&a}}const Ie=new RegExp("s*:selfs*,?","g");function xe(t,e,n){return new ke(t).build(e,n)}class ke{constructor(t){this._driver=t}build(t,e){const n=new Ae(e);return this._resetContextStyleTimingState(n),_e(this,he(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(je(t)){const e=t;Object.keys(e).forEach(t=>{fe(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=ge(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=_e(this,he(t.animation),e);return{type:1,matchers:Ee(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Pe(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>_e(this,t,e)),options:Pe(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=_e(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:Pe(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Re(ie(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Re(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||ie(r,e),Re(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Et({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=Et(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==_t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(je(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=fe(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(je(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(je(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:_e(this,he(t.animation),e),options:Pe(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Pe(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Pe(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Ie,"")),[t=t.replace(/@\*/g,Jt).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,ee),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,Dt(e.collectedStyles,e.currentQuerySelector,{});const s=_e(this,he(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:Pe(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:ie(t.timings,e.errors,!0);return{type:12,animation:_e(this,he(t.animation),e),timings:n,options:null}}}class Ae{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function je(t){return!Array.isArray(t)&&"object"==typeof t}function Pe(t){var e;return t?(t=oe(t)).params&&(t.params=(e=t.params)?oe(e):null):t={},t}function Re(t,e,n){return{duration:t,delay:e,easing:n}}function Ne(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class De{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Le=new RegExp(":enter","g"),Fe=new RegExp(":leave","g");function Me(t,e,n,r,i,o={},s={},a,u,c=[]){return(new Ue).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class Ue{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new De;const l=new qe(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),_e(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[Ne(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?ne(n.duration):null,o=null!=n.delay?ne(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),_e(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ve);const t=ne(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>_e(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?ne(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),_e(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return ie(e.params?pe(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?ne(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Ve);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),_e(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;_e(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const Ve={};class qe{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ve,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Be(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=ne(n.duration)),null!=n.delay&&(r.delay=ne(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=pe(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new qe(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=Ve,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new He(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(Le,"."+this._enterClassName)).replace(Fe,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class Be{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Be(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||_t,this._currentKeyframe[t]=_t}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=_t})):se(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=pe(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:_t),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=se(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==_t&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?ge(t.values()):[],o=e.size?ge(e.values()):[];if(n){const t=r[0],e=oe(t);t.offset=0,e.offset=1,r=[t,e]}return Ne(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class He extends Be{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=se(t[0],!1);a.offset=0,i.push(a);const u=se(t[0],!1);u.offset=Qe(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=se(t[r],!1);s.offset=Qe((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return Ne(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function Qe(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class ze{}class Ge extends ze{normalizePropertyName(t,e){return ye(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(We[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const We=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Ke(t,e,n,r,i,o,s,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const $e={};class Ye{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||$e,d=this.buildStyles(n,s&&s.params||$e,l),f=a&&a.params||$e,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),f)},_=c?[]:Me(t,e,this.ast.animation,i,o,d,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return Ke(e,this._triggerName,n,r,v,d,p,[],[],m,y,w,l);_.forEach(t=>{const n=t.element,r=Dt(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=Dt(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const C=ge(g.values());return Ke(e,this._triggerName,n,r,v,d,p,_,C,m,y,w)}}class Xe{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=oe(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=pe(o,r,e)),n[t]=o})}}),n}}class Ze{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Xe(t.style,t.options&&t.options.params||{})}),Je(this.states,"true","1"),Je(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Ye(t,e,this.states))}),this.fallbackTransition=new Ye(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Je(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const tn=new De;class en{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=xe(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=jt(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=Me(this._driver,e,i,Yt,Xt,{},{},n,tn,r),o.forEach(t=>{const e=Dt(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,_t)})});const a=At(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=Nt(e,"","","");return Pt(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const nn="ng-animate-queued",rn="ng-animate-disabled",on=".ng-animate-disabled",sn=[],an={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},un={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class cn{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=oe(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const ln="void",hn=new cn(ln);class dn{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,bn(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=Dt(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=Dt(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(bn(t,Zt),bn(t,"ng-trigger-"+e),a[e]=hn),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new pn(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(bn(t,Zt),bn(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new cn(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=hn),u.value!==ln&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{le(t,n),ce(t,r)})}return}const c=Dt(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(bn(t,nn),o.onStart(()=>{_n(t,nn)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Jt,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,ln,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&At(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||hn,a=new cn(ln),u=new pn(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==an||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){bn(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=Nt(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,Pt(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class fn{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new dn(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(gn(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!gn(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),bn(t,rn)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),_n(t,rn))}removeNode(t,e,n,r){if(gn(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return gn(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,Jt,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,ee,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return At(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=an,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,on)&&this.markElementAsDisabled(t,!1),this.driver.query(t,on,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)bn(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?At(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new De,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=vn(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=Yt+p++;f.set(e,n),t.forEach(t=>bn(t,n))});const g=[],m=new Set,y=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){const t=this.collectedLeaveElements[A],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=vn(h,Array.from(m));b.forEach((t,e)=>{const n=Xt+p++;v.set(e,n),t.forEach(t=>bn(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>_n(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>_n(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>le(i,p.fromStyles)),e.onDestroy(()=>ce(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>le(i,p.fromStyles)),e.onDestroy(()=>ce(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>Dt(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const C=new Map,E=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,C))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Dt(C,e,[]).push(t),t.destroy()})});const O=g.filter(t=>En(t,a,u)),S=new Map;yn(S,this.driver,y,u,_t).forEach(t=>{En(t,a,u)&&O.push(t)});const T=new Map;d.forEach((t,e)=>{yn(T,this.driver,new Set(t),a,"!")}),O.forEach(t=>{const e=S.get(t),n=T.get(t);S.set(t,Object.assign(Object.assign({},e),n))});const I=[],x=[],k={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>ce(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=k;if(E.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>E.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,C,i,T,S);if(o.setRealPlayer(n),t===k)I.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=At(e)),r.push(o)}}else le(e,s.fromStyles),o.onDestroy(()=>ce(e,s.toStyles)),x.push(o),c.has(e)&&r.push(o)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=At(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let A=0;A<g.length;A++){const t=g[A],e=t.__ng_removed;if(_n(t,Xt),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,ee,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?wn(this,t,r):this.processLeaveNode(t)}return g.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==ln;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=Dt(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}le(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new It(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return Cn(t,e),e}((n.get(h)||sn).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=o.get(h),y=jt(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new pn(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{Dt(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>bn(t,te));const d=At(h);return d.onDestroy(()=>{c.forEach(t=>_n(t,te)),ce(a,e.toStyles)}),l.forEach(t=>{Dt(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new It(t.duration,t.delay)}}class pn{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new It,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Pt(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Dt(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function gn(t){return t&&1===t.nodeType}function mn(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function yn(t,e,n,r,i){const o=[];n.forEach(t=>o.push(mn(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=un,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>mn(t,o[a++])),s}function vn(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function bn(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function _n(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function wn(t,e,n){At(n).onDone(()=>t.processLeaveNode(e))}function Cn(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof xt?Cn(r.players,e):e.push(r)}}function En(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class On{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new fn(t,e,n),this._timelineEngine=new en(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=xe(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new Ze(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=Lt(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=Lt(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Sn(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=In(e[0]),e.length>1&&(r=In(e[e.length-1]))):e&&(n=In(e)),n||r?new Tn(t,n,r):null}let Tn=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&ce(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ce(this._element,this._initialStyles),this._endStyles&&(ce(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(le(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(le(this._element,this._endStyles),this._endStyles=null),ce(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function In(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];xn(i)&&(e=e||{},e[i]=t[i])}return e}function xn(t){return"display"===t||"position"===t}const kn="animation",An="animationend";class jn{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Fn(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),Ln(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Dn(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Pn(this._element,this._name,"paused")}resume(){Pn(this._element,this._name,"running")}setPosition(t){const e=Rn(this._element,this._name);this._position=t*this._duration,Ln(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Dn(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Fn(t,"").split(","),r=Nn(n,e);r>=0&&(n.splice(r,1),Ln(t,"",n.join(",")))}(this._element,this._name))}}function Pn(t,e,n){Ln(t,"PlayState",n,Rn(t,e))}function Rn(t,e){const n=Fn(t,"");return n.indexOf(",")>0?Nn(n.split(","),e):Nn([n],e)}function Nn(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Dn(t,e,n){n?t.removeEventListener(An,e):t.addEventListener(An,e)}function Ln(t,e,n,r){const i=kn+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function Fn(t,e){return t.style[kn+e]||""}class Mn{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new jn(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:we(this.element,n))})}this.currentSnapshot=t}}class Un extends It{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Wt(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Vn{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return Ht(t)}matchesElement(t,e){return Qt(t,e)}containsElement(t,e){return zt(t,e)}query(t,e,n){return Gt(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Wt(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof Mn),u={};ve(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=be(t,e,u));if(0==n)return new Un(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=Sn(t,e),f=new Mn(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class qn{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:we(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Bn{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Hn().toString()),this._cssKeyframesDriver=new Vn}validateStyleProperty(t){return Ht(t)}matchesElement(t,e){return Qt(t,e)}containsElement(t,e){return zt(t,e)}query(t,e,n){return Gt(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof qn);ve(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=Sn(t,e=be(t,e=e.map(t=>se(t,!1)),u));return new qn(t,e,a,l)}}function Hn(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let Qn=(()=>{class t extends bt{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.R.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Ct(t):t;return Wn(this._renderer,null,e,"register",[n]),new zn(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(r.F),r.Ub(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class zn extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Gn(this._id,t,e||{},this._renderer)}}class Gn{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Wn(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Wn(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const Kn="@",$n="@.disabled";let Yn=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Xn("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new Zn(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(r.F),r.Ub(On),r.Ub(r.A))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class Xn{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==Kn&&e==$n?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Zn extends Xn{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==Kn?"."==e.charAt(1)&&e==$n?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==Kn){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=Kn&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Jn=(()=>{class t extends On{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(s),r.Ub($t),r.Ub(ze))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const tr=[{provide:$t,useFactory:function(){return"function"==typeof Hn()?new Bn:new Vn}},{provide:new r.r("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:bt,useClass:Qn},{provide:ze,useFactory:function(){return new Ge}},{provide:On,useClass:Jn},{provide:r.F,useFactory:function(t,e,n){return new Yn(t,e,n)},deps:[rt,On,r.A]}];let er=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:tr,imports:[vt]}),t})();var nr=n("spgP"),rr=n("D0XW"),ir=n("HDdC"),or=n("LRne"),sr=n("VRyK"),ar=n("lJxs"),ur=n("w1tV"),cr=n("Cfvw"),lr=n("zx2A");function hr(t,e){return"function"==typeof e?n=>n.pipe(hr((n,r)=>Object(cr.a)(t(n,r)).pipe(Object(ar.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new dr(t))}class dr{constructor(t){this.project=t}call(t,e){return e.subscribe(new fr(t,this.project))}}class fr extends lr.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new lr.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(lr.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var pr=n("7o/Q");function gr(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new mr(t,e,n))}}class mr{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new yr(t,this.accumulator,this.seed,this.hasSeed))}}class yr extends pr.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function vr(t,e){return n=>n.lift(new br(t,e))}class br{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new _r(t,this.compare,this.keySelector))}}class _r extends pr.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class wr extends pr.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Cr extends pr.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Er=n("SeVD");function Or(t,e,n,r,i=new Cr(t,n,r)){if(!i.closed)return e instanceof ir.a?e.subscribe(i):Object(Er.a)(e)(i)}class Sr{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Tr(t,this.observables,this.project))}}class Tr extends wr{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Or(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Ir{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new xr(t,this.predicate))}}class xr extends pr.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}n("6Uf2");var kr=n("XNiG"),Ar=n("pxpQ"),jr=n("qgXg"),Pr=n("quSY"),Rr=n("9ppp"),Nr=n("Ylt2");class Dr extends kr.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Lr(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Rr.a;if(this.isStopped||this.hasError?o=Pr.a.EMPTY:(this.observers.push(t),o=new Nr.a(this,t)),r&&t.add(t=new Ar.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||jr.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Lr{constructor(t,e){this.time=t,this.value=e}}function Fr(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Dr(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const Mr=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Ur(t,e){return function(n){return n.lift(new Vr(t,e))}}class Vr{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new qr(t,this.predicate,this.thisArg))}}class qr extends pr.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const Br=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var Hr=n("EY2u");function Qr(t){return e=>0===t?Object(Hr.b)():e.lift(new zr(t))}class zr{constructor(t){if(this.total=t,this.total<0)throw new Br}call(t,e){return e.subscribe(new Gr(t,this.total))}}class Gr extends pr.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Wr(t=null){return e=>e.lift(new Kr(t))}class Kr{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new $r(t,this.defaultValue))}}class $r extends pr.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Yr(t=Jr){return e=>e.lift(new Xr(t))}class Xr{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Zr(t,this.errorFactory))}}class Zr extends pr.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(eT){t=eT}this.destination.error(t)}}}function Jr(){return new Mr}var ti=n("SpAZ");function ei(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ur((e,n)=>t(e,n,r)):ti.a,Qr(1),n?Wr(e):Yr(()=>new Mr))}function ni(t,e){return e?hr(()=>t,e):hr(()=>t)}var ri=n("tf+s");const ii=new r.r("angularfire2.auth.use-emulator"),oi=new r.r("angularfire2.auth.settings"),si=new r.r("angularfire2.auth.tenant-id"),ai=new r.r("angularfire2.auth.langugage-code"),ui=new r.r("angularfire2.auth.use-device-language"),ci=new r.r("angularfire.auth.persistence");let li=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new nr.d(i),d=Object(nr.h)(h),f=new kr.a,p=Object(or.a)(void 0).pipe(Object(Ar.b)(h.outsideAngular),hr(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(ar.a)(()=>Object(nr.g)(t,i,e)),Object(ar.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(nr.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Fr({bufferSize:1,refCount:!1}));if(F(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(or.a)(null);else{p.pipe(ei()).subscribe();const t=p.pipe(hr(t=>t.getRedirectResult().then(t=>t,()=>null)),d,Fr({bufferSize:1,refCount:!1})),e=t=>new ir.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(hr(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(hr(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(ni(n),Object(ri.a)(h.outsideAngular),Object(Ar.b)(h.insideAngular)),this.user=t.pipe(ni(r),Object(ri.a)(h.outsideAngular),Object(Ar.b)(h.insideAngular)),this.idToken=this.user.pipe(hr(t=>t?Object(cr.a)(t.getIdToken()):Object(or.a)(null))),this.idTokenResult=this.user.pipe(hr(t=>t?Object(cr.a)(t.getIdTokenResult()):Object(or.a)(null))),this.credential=Object(sr.a)(t,f,this.authState.pipe(Ur(t=>!t))).pipe(Object(ar.a)(t=>(null==t?void 0:t.user)?t:null),Object(ri.a)(h.outsideAngular),Object(Ar.b)(h.insideAngular))}return Object(nr.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(nr.c),r.Ub(nr.b,8),r.Ub(r.C),r.Ub(r.A),r.Ub(ii,8),r.Ub(oi,8),r.Ub(si,8),r.Ub(ai,8),r.Ub(ui,8),r.Ub(ci,8))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Ub)(nr.c),Object(r.Ub)(nr.b,8),Object(r.Ub)(r.C),Object(r.Ub)(r.A),Object(r.Ub)(ii,8),Object(r.Ub)(oi,8),Object(r.Ub)(si,8),Object(r.Ub)(ai,8),Object(r.Ub)(ui,8),Object(r.Ub)(ci,8))},token:t,providedIn:"any"}),t})();Object(nr.e)(li,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var hi=n("Jgta");function di(t){return null==t}function fi(t){return"function"==typeof t.set}function pi(t,e){return fi(e)?e:t.ref(e)}function gi(t,e){if("string"==typeof t)return e.stringCase();if(fi(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function mi(t,e,n="on",r=rr.b){return new ir.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(ar.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(ur.a)())}function yi(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function vi(t,e){const{payload:n,prevKey:r,key:i}=e,o=yi(t,i),s=function(t,e){if(di(e))return 0;{const n=yi(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function bi(t){return(di(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function _i(t,e,n){return function(t,e,n){return mi(t,"value","once",n).pipe(hr(r=>{const i=[Object(or.a)(r)];return e.forEach(e=>i.push(mi(t,e,"on",n))),Object(sr.a)(...i).pipe(gr(vi,[]))}),vr())}(t,e=bi(e),n)}function wi(t,e,n){const r=(e=bi(e)).map(e=>mi(t,e,"on",n));return Object(sr.a)(...r)}function Ci(t,e){return function(n,r){return gi(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Ei(t,e){return function(){return mi(t,"value","on",e)}}const Oi=new r.r("angularfire2.realtimeDatabaseURL"),Si=new r.r("angularfire2.database.use-emulator");let Ti=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new nr.d(i),this.keepUnstableUntilFirst=Object(nr.h)(this.schedulers);const a=o,u=Object(nr.g)(t,i,e);!hi.a.auth&&s&&Object(nr.j)(),this.database=Object(nr.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>pi(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Ci(r,"update"),set:Ci(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?gi(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>_i(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>wi(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return mi(t,"value","on",e).pipe(Object(ar.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Sr(t,n))}}(e),Object(ar.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Ir(r))),Object(ar.a)(t=>t.actions));var r}(t,wi(t,e).pipe(gr((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>_i(t,r,n).pipe(Object(ar.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>pi(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Ei(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Ei(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(ar.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(nr.c),r.Ub(nr.b,8),r.Ub(Oi,8),r.Ub(r.C),r.Ub(r.A),r.Ub(Si,8),r.Ub(ii,8))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Ub)(nr.c),Object(r.Ub)(nr.b,8),Object(r.Ub)(Oi,8),Object(r.Ub)(r.C),Object(r.Ub)(r.A),Object(r.Ub)(Si,8),Object(r.Ub)(ii,8))},token:t,providedIn:"any"}),t})(),Ii=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[Ti]}),t})();class xi{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new ki(t,this.dueTime,this.scheduler))}}class ki extends pr.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ai,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Ai(t){t.debouncedNext()}var ji=n("zIRd"),Pi=n("mrSG"),Ri=n("qOnz"),Ni=n("/6Yf"),Di="firebasestorage.googleapis.com",Li=function(t){function e(n,r){var i=t.call(this,Fi(n),"Firebase Storage: "+r+" ("+Fi(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(Pi.c)(e,t),e.prototype._codeEquals=function(t){return Fi(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(Ri.c);function Fi(t){return"storage/"+t}function Mi(){return new Li("unknown","An unknown error occurred, please check the error payload for server response.")}function Ui(){return new Li("canceled","User canceled the upload/download.")}function Vi(){return new Li("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function qi(t){return new Li("invalid-argument",t)}function Bi(){return new Li("app-deleted","The Firebase app was deleted.")}function Hi(t){return new Li("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qi(t,e){return new Li("invalid-format","String does not match format '"+t+"': "+e)}function zi(t){throw new Li("internal-error","Internal error: "+t)}var Gi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Wi=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function Ki(t,e){switch(t){case Gi.RAW:return new Wi($i(e));case Gi.BASE64:case Gi.BASE64URL:return new Wi(Yi(t,e));case Gi.DATA_URL:return new Wi((n=new Xi(e)).base64?Yi(Gi.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(eT){throw Qi(Gi.DATA_URL,"Malformed data URL.")}return $i(e)}(n.rest),new Xi(e).contentType)}var n;throw Mi()}function $i(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Yi(t,e){switch(t){case Gi.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Qi(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Gi.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Qi(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(eT){throw Qi(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Xi=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Qi(Gi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),Zi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ji(t){switch(t){case"running":case"pausing":case"canceling":return Zi.RUNNING;case"paused":return Zi.PAUSED;case"success":return Zi.SUCCESS;case"canceled":return Zi.CANCELED;case"error":default:return Zi.ERROR}}var to=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),eo=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=to.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=to.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=to.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw zi("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw zi("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw zi("cannot .getStatus() before sending");try{return this.xhr_.status}catch(eT){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw zi("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),no=function(){function t(){}return t.prototype.createXhrIo=function(){return new eo},t}(),ro=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(eT){return new t(e,"")}if(""===n.path)return n;throw new Li("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=Di.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new Li("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}(),io=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function oo(t){return"string"==typeof t||t instanceof String}function so(t){return ao()&&t instanceof Blob}function ao(){return"undefined"!=typeof Blob}function uo(t,e,n,r){if(r<e)throw qi("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw qi("Invalid value for '"+t+"'. Expected "+n+" or less.")}function co(t){return"https://"+Di+"/v0"+t}function lo(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var ho=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(eT){o(eT)}else null!==s?((r=Mi()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Bi():Ui():new Li("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new fo(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new fo(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===to.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new fo(s,n))}else{var a=n.getErrorCode()===to.ABORT;e(!1,new fo(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,u())},e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Pi.f)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(Pi.f)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(t){f||(f=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),fo=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function po(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function go(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=po();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(ao())return new Blob(t);throw new Li("unsupported-environment","This browser doesn't seem to support creating Blobs")}var mo=function(){function t(t,e){var n=0,r="";so(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(so(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(ao()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(go.apply(null,r))}var i=e.map(function(t){return oo(t)?Ki(Gi.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function yo(t){var e,n;try{e=JSON.parse(t)}catch(eT){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function vo(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function bo(t,e){return e}var _o=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||bo}}(),wo=null;function Co(){if(wo)return wo;var t=[];t.push(new _o("bucket")),t.push(new _o("generation")),t.push(new _o("metageneration")),t.push(new _o("name","fullPath",!0));var e=new _o("name");e.xform=function(t,e){return function(t){return!oo(t)||t.length<2?t:vo(t)}(e)},t.push(e);var n=new _o("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new _o("timeCreated")),t.push(new _o("updated")),t.push(new _o("md5Hash",null,!0)),t.push(new _o("cacheControl",null,!0)),t.push(new _o("contentDisposition",null,!0)),t.push(new _o("contentEncoding",null,!0)),t.push(new _o("contentLanguage",null,!0)),t.push(new _o("contentType",null,!0)),t.push(new _o("metadata","customMetadata",!0)),wo=t}function Eo(t,e,n){var r=yo(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new ro(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Oo(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var So=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function To(t){if(!t)throw Mi()}function Io(t,e){return function(n,r){var i=Eo(t,r,e);return To(null!==i),i}}function xo(t){return function(e,n){var r;return(r=401===e.getStatus()?new Li("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new Li("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new Li("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function ko(t){var e=xo(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new Li("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Ao(t,e,n){var r=co(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new So(r,"GET",Io(t,n),i);return o.errorHandler=ko(e),o}function jo(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Po=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Ro(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(eT){To(!1)}return To(!!n&&-1!==(e||["active"]).indexOf(n)),n}var No=262144,Do=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function Lo(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var Fo=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Co(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then(function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=jo(e,r,i),a={name:s.fullPath},u=co(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Oo(s,n),h=new So(u,"POST",function(t){var e;Ro(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(eT){To(!1)}return To(oo(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=xo(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new So(n,"POST",function(t){var e=Ro(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(eT){To(!1)}n||To(!1);var i=Number(n);return To(!isNaN(i)),new Po(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=xo(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=No*this._chunkMultiplier,n=new Po(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new Po(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Li("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw Vi();var p=new So(n,"POST",function(t,n){var i,s=Ro(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Io(e,o)(t,n):null,new Po(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=xo(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(eT){return t._error=eT,void t._transition("error")}var s=t._ref.storage._makeRequest(o,i);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){No*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=Ao(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=jo(e,r,i),c=Oo(u,n),l=mo.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw Vi();var h={name:u.fullPath},d=co(o),f=t.maxUploadRetryTime,p=new So(d,"POST",Io(t,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=xo(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Ui(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Ji(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Do(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Ji(this._state)){case Zi.SUCCESS:Lo(this._resolve.bind(null,this.snapshot))();break;case Zi.CANCELED:case Zi.ERROR:Lo(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Ji(this._state)){case Zi.RUNNING:case Zi.PAUSED:t.next&&Lo(t.next.bind(t,this.snapshot))();break;case Zi.SUCCESS:t.complete&&Lo(t.complete.bind(t))();break;case Zi.CANCELED:case Zi.ERROR:t.error&&Lo(t.error.bind(t,this._error))();break;default:t.error&&Lo(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Mo=function(){function t(t,e){this._service=t,this._location=e instanceof ro?e:ro.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new ro(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return vo(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new ro(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Hi(t)},t}();function Uo(t){var e={prefixes:[],items:[]};return Vo(t,e).then(function(){return e})}function Vo(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var r,i,o;return Object(Pi.d)(this,function(s){switch(s.label){case 0:return[4,qo(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Vo(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function qo(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Pi.d)(this,function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&uo("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=co(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new So(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=yo(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new ro(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new ro(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return To(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=xo(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}})})}function Bo(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new ro(t._location.bucket,n);return new Mo(t.storage,r)}function Ho(t){return/^[A-Za-z]+:\/\//.test(t)}function Qo(t,e){if(t instanceof Go){var n=t;if(null==n._bucket)throw new Li("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Mo(n,n._bucket);return null!=e?Qo(r,e):r}if(void 0!==e){if(e.includes(".."))throw qi('`path` param cannot contain ".."');return Bo(t,e)}return t}function zo(t,e){if(e&&Ho(e)){if(t instanceof Go)return new Mo(t,e);throw qi("To use ref(service, url), the first argument must be a Storage instance.")}return Qo(t,e)}var Go=function(){function t(t,e,n,r,i){var o,s;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ro.makeFromBucketSpec(r):null==(s=null==(o=this.app.options)?void 0:o.storageBucket)?null:ro.makeFromBucketSpec(s)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){uo("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){uo("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(Pi.b)(this,void 0,void 0,function(){var t,e;return Object(Pi.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Mo(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new io(Bi());var r=function(t,e,n,r,i){var o=lo(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(a,i),new ho(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},t}();function Wo(t,e){return zo(t,e)}var Ko,$o,Yo=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Xo=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Yo(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new Yo(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Yo(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Yo(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Zo=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new Jo(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new Jo(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Jo=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return Bo(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Xo(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Fo(t,new mo(e),n)}(t,e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Gi.RAW),this._throwIfRoot("putString");var r=Ki(e,t),i=Object(Pi.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Xo(new Fo(this._delegate,new mo(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,Uo(t)).then(function(t){return new Zo(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return qo(t,e)}(this._delegate,t||void 0).then(function(t){return new Zo(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return Object(Pi.b)(this,void 0,void 0,function(){var e,n;return Object(Pi.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=Ao(t.storage,t._location,Co()),[2,t.storage._makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r;return Object(Pi.d)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=co(e.fullServerUrl()),o=Oo(n,r),s=t.maxOperationRetryTime,a=new So(i,"PATCH",Io(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=ko(e),a}(t.storage,t._location,e,Co()),[2,t.storage._makeRequest(r,n).getPromise()]}})})}(t,e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(Pi.b)(this,void 0,void 0,function(){var e,n;return Object(Pi.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=co(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new So(r,"GET",function(t,e){return function(n,r){var i=Eo(t,r,e);return To(null!==i),function(t,e){var n=yo(e);if(null===n)return null;if(!oo(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.fullPath;return co("/b/"+i(t.bucket)+"/o/"+i(n))+lo({alt:"media",token:e})})[0]}(i,r)}}(t,n),i);return o.errorHandler=ko(e),o}(t.storage,t._location,Co()),[2,t.storage._makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new Li("no-download-url","The given file does not have any download URLs.");return t})]}})})}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(Pi.b)(this,void 0,void 0,function(){var e,n;return Object(Pi.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=co(e.fullServerUrl()),r=new So(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=ko(e),r}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Hi(t)},t}(),ts=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Ho(t))throw qi("ref() expected a child path but got a URL, use refFromURL instead.");return new Jo(Wo(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Ho(t))throw qi("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ro.makeFromUrl(t)}catch(eT){throw qi("refFromUrl() expected a valid full URL but got an invalid one.")}return new Jo(Wo(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function es(t){const e=function(t){return new ir.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=rr.a){return n=>n.lift(new xi(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(ar.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function ns(t,e,n){return{getDownloadURL:()=>Object(or.a)(void 0).pipe(Object(Ar.b)(e.outsideAngular),hr(()=>t.getDownloadURL()),n),getMetadata:()=>Object(or.a)(void 0).pipe(Object(Ar.b)(e.outsideAngular),hr(()=>t.getMetadata()),n),delete:()=>Object(cr.a)(t.delete()),child:r=>ns(t.child(r),e,n),updateMetadata:e=>Object(cr.a)(t.updateMetadata(e)),put:(e,n)=>es(t.put(e,n)),putString:(e,n,r)=>es(t.putString(e,n,r)),listAll:()=>Object(cr.a)(t.listAll())}}$o={TaskState:Zi,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:Gi,Storage:Go,Reference:Jo},(Ko=ji.a).INTERNAL.registerComponent(new Ni.a("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new ts(r,new Go(r,i,new no,n,ji.a.SDK_VERSION))},"PUBLIC").setServiceProps($o).setMultipleInstances(!0)),Ko.registerVersion("@firebase/storage","0.4.5");const rs=new r.r("angularfire2.storageBucket"),is=new r.r("angularfire2.storage.maxUploadRetryTime"),os=new r.r("angularfire2.storage.maxOperationRetryTime");let ss=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new nr.d(i),this.keepUnstableUntilFirst=Object(nr.h)(this.schedulers);const a=Object(nr.g)(t,i,e);this.storage=Object(nr.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return ns(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return ns(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return ns(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(nr.c),r.Ub(nr.b,8),r.Ub(rs,8),r.Ub(r.C),r.Ub(r.A),r.Ub(is,8),r.Ub(os,8))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Ub)(nr.c),Object(r.Ub)(nr.b,8),Object(r.Ub)(rs,8),Object(r.Ub)(r.C),Object(r.Ub)(r.A),Object(r.Ub)(is,8),Object(r.Ub)(os,8))},token:t,providedIn:"any"}),t})(),as=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({}),t})(),us=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[ss],imports:[as]}),t})();class cs extends kr.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Rr.a;return this._value}next(t){super.next(this._value=t)}}var ls=n("z+Ro"),hs=n("DH7j"),ds=n("yCtX");const fs={};class ps{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new gs(t,this.resultSelector))}}class gs extends wr{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(fs),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Or(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===fs?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var ms=n("bHdf");function ys(...t){return Object(ms.a)(1)(Object(or.a)(...t))}function vs(t){return new ir.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(cr.a)(n):Object(Hr.b)()).subscribe(e)})}var bs=n("EQ5u");function _s(...t){const e=t[t.length-1];return Object(ls.a)(e)?(t.pop(),n=>ys(t,n,e)):e=>ys(t,e)}function ws(t){return function(e){const n=new Cs(t),r=e.lift(n);return n.caught=r}}class Cs{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Es(t,this.selector,this.caught))}}class Es extends lr.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new lr.a(this);this.add(r);const i=Object(lr.c)(n,r);i!==r&&this.add(i)}}}var Os=n("5+tZ");function Ss(t,e){return Object(Os.a)(t,e,1)}function Ts(t){return function(e){return 0===t?Object(Hr.b)():e.lift(new Is(t))}}class Is{constructor(t){if(this.total=t,this.total<0)throw new Br}call(t,e){return e.subscribe(new xs(t,this.total))}}class xs extends pr.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var ks=n("vkgz"),As=n("x+ZX");function js(t){return e=>e.lift(new Ps(t))}class Ps{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Rs(t,this.callback))}}class Rs extends pr.a{constructor(t,e){super(t),this.add(new Pr.a(e))}}class Ns{constructor(t,e){this.id=t,this.url=e}}class Ds extends Ns{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ls extends Ns{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fs extends Ns{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ms extends Ns{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Us extends Ns{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vs extends Ns{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qs extends Ns{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Bs extends Ns{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hs extends Ns{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qs{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zs{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gs{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ws{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ks{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $s{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ys{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Xs="primary";class Zs{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Js(t){return new Zs(t)}function ta(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function ea(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function na(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ra(t[i],e[i]))return!1;return!0}function ra(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function ia(t){return Array.prototype.concat.apply([],t)}function oa(t){return t.length>0?t[t.length-1]:null}function sa(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function aa(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(cr.a)(Promise.resolve(t)):Object(or.a)(t)}function ua(t,e,n){return n?function(t,e){return na(t,e)}(t.queryParams,e.queryParams)&&ca(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ra(t[n],e[n]))}(t.queryParams,e.queryParams)&&la(t.root,e.root)}function ca(t,e){if(!ga(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!ca(t.children[n],e.children[n]))return!1}return!0}function la(t,e){return ha(t,e,e.segments)}function ha(t,e,n){if(t.segments.length>n.length)return!!ga(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!ga(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!la(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!ga(t.segments,r)&&!!t.children.primary&&ha(t.children.primary,e,i)}}class da{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Js(this.queryParams)),this._queryParamMap}toString(){return va.serialize(this)}}class fa{constructor(t,e){this.segments=t,this.children=e,this.parent=null,sa(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ba(this)}}class pa{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Js(this.parameters)),this._parameterMap}toString(){return Ta(this)}}function ga(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class ma{}class ya{parse(t){const e=new ja(t);return new da(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${_a(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Ca(e)}=${Ca(t)}`).join("&"):`${Ca(e)}=${Ca(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const va=new ya;function ba(t){return t.segments.map(t=>Ta(t)).join("/")}function _a(t,e){if(!t.hasChildren())return ba(t);if(e){const e=t.children.primary?_a(t.children.primary,!1):"",n=[];return sa(t.children,(t,e)=>{e!==Xs&&n.push(`${e}:${_a(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return sa(t.children,(t,r)=>{r===Xs&&(n=n.concat(e(t,r)))}),sa(t.children,(t,r)=>{r!==Xs&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Xs?[_a(t.children.primary,!1)]:[`${n}:${_a(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${ba(t)}/${e[0]}`:`${ba(t)}/(${e.join("//")})`}}function wa(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ca(t){return wa(t).replace(/%3B/gi,";")}function Ea(t){return wa(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oa(t){return decodeURIComponent(t)}function Sa(t){return Oa(t.replace(/\+/g,"%20"))}function Ta(t){return`${Ea(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Ea(t)}=${Ea(e[t])}`).join("")}`;var e}const Ia=/^[^\/()?;=#]+/;function xa(t){const e=t.match(Ia);return e?e[0]:""}const ka=/^[^=?&#]+/,Aa=/^[^?&#]+/;class ja{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fa([],{}):new fa([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new fa(t,e)),n}parseSegment(){const t=xa(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new pa(Oa(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=xa(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=xa(this.remaining);t&&(n=t,this.capture(n))}t[Oa(e)]=Oa(n)}parseQueryParam(t){const e=function(t){const e=t.match(ka);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Aa);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Sa(e),i=Sa(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=xa(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Xs);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new fa([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Pa{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ra(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Ra(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Na(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Na(t,this._root).map(t=>t.value)}}function Ra(t,e){if(t===e.value)return e;for(const n of e.children){const e=Ra(t,n);if(e)return e}return null}function Na(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Na(t,n);if(r.length)return r.unshift(e),r}return[]}class Da{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function La(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Fa extends Pa{constructor(t,e){super(t),this.snapshot=e,Ha(this,t)}toString(){return this.snapshot.toString()}}function Ma(t,e){const n=function(t,e){const n=new qa([],{},{},"",{},Xs,e,null,t.root,-1,{});return new Ba("",new Da(n,[]))}(t,e),r=new cs([new pa("",{})]),i=new cs({}),o=new cs({}),s=new cs({}),a=new cs(""),u=new Ua(r,i,s,a,o,Xs,e,n.root);return u.snapshot=n.root,new Fa(new Da(u,[]),n)}class Ua{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(ar.a)(t=>Js(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(ar.a)(t=>Js(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Va(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class qa{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Js(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Js(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ba extends Pa{constructor(t,e){super(e),this.url=t,Ha(this,e)}toString(){return Qa(this._root)}}function Ha(t,e){e.value._routerState=t,e.children.forEach(e=>Ha(t,e))}function Qa(t){const e=t.children.length>0?` { ${t.children.map(Qa).join(", ")} } `:"";return`${t.value}${e}`}function za(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,na(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),na(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!na(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),na(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Ga(t,e){return na(t.params,e.params)&&function(t,e){return ga(t,e)&&t.every((t,n)=>na(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Ga(t.parent,e.parent))}function Wa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Wa(t,e,r);return Wa(t,e)})}(t,e,n);return new Da(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Ka(e,t),t}{const n=new Ua(new cs((r=e.value).url),new cs(r.params),new cs(r.queryParams),new cs(r.fragment),new cs(r.data),r.outlet,r.component,r),i=e.children.map(e=>Wa(t,e));return new Da(n,i)}}var r}function Ka(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Ka(t.children[n],e.children[n])}function $a(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ya(t){return"object"==typeof t&&null!=t&&t.outlets}function Xa(t,e,n,r,i){let o={};return r&&sa(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new da(n.root===t?e:Za(n.root,t,e),o,i)}function Za(t,e,n){const r={};return sa(t.children,(t,i)=>{r[i]=t===e?n:Za(t,e,n)}),new fa(t.segments,r)}class Ja{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&$a(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Ya);if(r&&r!==oa(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tu{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function eu(t,e,n){if(t||(t=new fa([],{})),0===t.segments.length&&t.hasChildren())return nu(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Ya(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!su(a,u,e))return o;r+=2}else{if(!su(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new fa(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new fa(t.segments.slice(r.pathIndex),t.children),nu(e,0,i)}return r.match&&0===i.length?new fa(t.segments,{}):r.match&&!t.hasChildren()?ru(t,e,n):r.match?nu(t,0,i):ru(t,e,n)}function nu(t,e,n){if(0===n.length)return new fa(t.segments,{});{const r=function(t){return Ya(t[0])?t[0].outlets:{[Xs]:t}}(n),i={};return sa(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=eu(t.children[r],e,n))}),sa(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new fa(t.segments,i)}}function ru(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Ya(o)){const t=iu(o.outlets);return new fa(r,t)}if(0===i&&$a(n[0])){r.push(new pa(t.segments[e].path,ou(n[0]))),i++;continue}const s=Ya(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&$a(a)?(r.push(new pa(s,ou(a))),i+=2):(r.push(new pa(s,{})),i++)}return new fa(r,{})}function iu(t){const e={};return sa(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=ru(new fa([],{}),0,t))}),e}function ou(t){const e={};return sa(t,(t,n)=>e[n]=`${t}`),e}function su(t,e,n){return t==n.path&&na(e,n.parameters)}class au{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),za(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=La(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),sa(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=La(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=La(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new $s(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Ws(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(za(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),uu(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function uu(t){za(t.value),t.children.forEach(uu)}class cu{constructor(t,e){this.routes=t,this.module=e}}function lu(t){return"function"==typeof t}function hu(t){return t instanceof da}const du=Symbol("INITIAL_VALUE");function fu(){return hr(t=>function(...t){let e,n;return Object(ls.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(hs.a)(t[0])&&(t=t[0]),Object(ds.a)(t,n).lift(new ps(e))}(t.map(t=>t.pipe(Qr(1),_s(du)))).pipe(gr((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==du)return t;if(r===du&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||hu(r))return r}return t},t)},du),Ur(t=>t!==du),Object(ar.a)(t=>hu(t)?t:!0===t),Qr(1)))}let pu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Mb(0,"router-outlet")},directives:function(){return[cc]},encapsulation:2}),t})();function gu(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];mu(r,yu(e,r))}}function mu(t,e){t.children&&gu(t.children,e)}function yu(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function vu(t){const e=t.children&&t.children.map(vu),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Xs&&(n.component=pu),n}function bu(t){return t.outlet||Xs}function _u(t,e){const n=t.filter(t=>bu(t)===e);return n.push(...t.filter(t=>bu(t)!==e)),n}const wu={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Cu(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},wu):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ea)(n,t,e);if(!i)return Object.assign({},wu);const o={};sa(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Eu(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Ou(t,e,n)&&bu(n)!==Xs)}(t,n,r)){const i=new fa(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&bu(o)!==Xs){const n=new fa([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[bu(o)]=n}return i}(t,e,r,new fa(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Ou(t,e,n))}(t,n,r)){const o=new fa(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Ou(t,n,a)&&!i[bu(a)]){const n=new fa([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[bu(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new fa(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Ou(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Su(t,e,n,r){return!!(bu(t)===r||r!==Xs&&Ou(e,n,t))&&("**"===t.path||Cu(e,t,n).matched)}function Tu(t,e,n){return 0===e.length&&!t.children[n]}class Iu{constructor(t){this.segmentGroup=t||null}}class xu{constructor(t){this.urlTree=t}}function ku(t){return new ir.a(e=>e.error(new Iu(t)))}function Au(t){return new ir.a(e=>e.error(new xu(t)))}function ju(t){return new ir.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Pu{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Eu(this.urlTree.root,[],[],this.config).segmentGroup,e=new fa(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Xs).pipe(Object(ar.a)(t=>this.createUrlTree(Ru(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ws(t=>{if(t instanceof xu)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Iu)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Xs).pipe(Object(ar.a)(e=>this.createUrlTree(Ru(e),t.queryParams,t.fragment))).pipe(ws(t=>{if(t instanceof Iu)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new fa([],{[Xs]:t}):t;return new da(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(ar.a)(t=>new fa([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(cr.a)(r).pipe(Ss(r=>{const i=n.children[r],o=_u(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(ar.a)(t=>({segment:t,outlet:r})))}),gr((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ur((e,n)=>t(e,n,r)):ti.a,Ts(1),n?Wr(e):Yr(()=>new Mr))}())}expandSegment(t,e,n,r,i,o){return Object(cr.a)(n).pipe(Ss(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(ws(t=>{if(t instanceof Iu)return Object(or.a)(null);throw t}))),ei(t=>!!t),ws((t,n)=>{if(t instanceof Mr||"EmptyError"===t.name){if(Tu(e,r,i))return Object(or.a)(new fa([],{}));throw new Iu(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Su(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):ku(e):ku(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Au(i):this.lineralizeSegments(n,i).pipe(Object(Os.a)(n=>{const i=new fa(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Cu(e,r,i);if(!s)return ku(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Au(l):this.lineralizeSegments(r,l).pipe(Object(Os.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(or.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(ar.a)(t=>(n._loadedConfig=t,new fa(r,{})))):Object(or.a)(new fa(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Cu(e,n,r);if(!o)return ku(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Os.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Eu(e,s,u,o),l=new fa(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(ar.a)(t=>new fa(s,t)));if(0===o.length&&0===c.length)return Object(or.a)(new fa(s,{}));const h=bu(n)===i;return this.expandSegment(r,l,o,c,h?Xs:i,!0).pipe(Object(ar.a)(t=>new fa(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(or.a)(new cu(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(or.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Os.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(ar.a)(t=>(e._loadedConfig=t,t))):function(t){return new ir.a(e=>e.error(ta(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(or.a)(new cu([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(or.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&lu(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!lu(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return aa(o)});return Object(or.a)(i).pipe(fu(),Object(ks.a)(t=>{if(!hu(t))return;const e=ta(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(ar.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(or.a)(n);if(r.numberOfChildren>1||!r.children.primary)return ju(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new da(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return sa(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return sa(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new fa(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Ru(t){const e={};for(const n of Object.keys(t.children)){const r=Ru(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new fa(t.segments.concat(e.segments),e.children)}return t}(new fa(t.segments,e))}class Nu{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Du{constructor(t,e){this.component=t,this.route=e}}function Lu(t,e,n){const r=t._root;return Mu(r,e?e._root:null,n,[r.value])}function Fu(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Mu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=La(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ga(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ga(t.url,e.url)||!na(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ga(t,e)||!na(t.queryParams,e.queryParams);case"paramsChange":default:return!Ga(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Nu(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Mu(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Du(a.outlet.component,s))}else s&&Uu(e,a,i),i.canActivateChecks.push(new Nu(r)),Mu(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),sa(o,(t,e)=>Uu(t,n.getContext(e),i)),i}function Uu(t,e,n){const r=La(t),i=t.value;sa(r,(t,r)=>{Uu(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Du(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Vu{}function qu(t){return new ir.a(e=>e.error(t))}class Bu{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Eu(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Xs);if(null===e)return null;const n=new qa([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Xs,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Da(n,e),i=new Ba(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Va(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=_u(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!Hu(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Xs?-1:e.value.outlet===Xs?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Tu(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Su(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?oa(n).parameters:{};i=new qa(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gu(t),bu(t),t.component,t,Qu(e),zu(e)+n.length,Wu(t))}else{const r=Cu(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new qa(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gu(t),bu(t),t.component,t,Qu(e),zu(e)+o.length,Wu(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Eu(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Da(i,t)]}if(0===a.length&&0===c.length)return[new Da(i,[])];const l=bu(t)===r,h=this.processSegment(a,u,c,l?Xs:r);return null===h?null:[new Da(i,h)]}}function Hu(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Qu(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function zu(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Gu(t){return t.data||{}}function Wu(t){return t.resolve||{}}function Ku(t){return hr(e=>{const n=t(e);return n?Object(cr.a)(n).pipe(Object(ar.a)(()=>e)):Object(or.a)(e)})}class $u extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Yu=new r.r("ROUTES");class Xu{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(ar.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new cu(ia(i.injector.get(Yu,void 0,r.q.Self|r.q.Optional)).map(vu),i)}),ws(t=>{throw e._loader$=void 0,t}));return e._loader$=new bs.a(n,()=>new kr.a).pipe(Object(As.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(cr.a)(this.loader.load(t)):aa(t()).pipe(Object(Os.a)(t=>t instanceof r.w?Object(or.a)(t):Object(cr.a)(this.compiler.compileModuleAsync(t))))}}class Zu{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ju,this.attachRef=null}}class Ju{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Zu,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class tc{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function ec(t){throw t}function nc(t,e,n){return e.parse("/")}function rc(t,e){return Object(or.a)(null)}let ic=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new kr.a,this.errorHandler=ec,this.malformedUriErrorHandler=nc,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rc,afterPreactivation:rc},this.urlHandlingStrategy=new tc,this.routeReuseStrategy=new $u,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new da(new fa([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Xu(s,a,t=>this.triggerEvent(new Qs(t)),t=>this.triggerEvent(new zs(t))),this.routerState=Ma(this.currentUrlTree,this.rootComponentType),this.transitions=new cs({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Ur(t=>0!==t.id),Object(ar.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),hr(t=>{let n=!1,r=!1;return Object(or.a)(t).pipe(Object(ks.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),hr(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(or.a)(t).pipe(hr(t=>{const n=this.transitions.getValue();return e.next(new Ds(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Hr.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,hr(t=>function(t,e,n,r,i){return new Pu(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(ar.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(ks.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Os.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Bu(t,e,n,r,i,o).recognize();return null===s?qu(new Vu):Object(or.a)(s)}catch(eT){return qu(eT)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(ar.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(ks.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Us(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Ds(n,this.serializeUrl(r),i,o);e.next(a);const u=Ma(r,this.rootComponentType).snapshot;return Object(or.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Hr.a}),Ku(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(ks.a)(t=>{const e=new Vs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(ar.a)(t=>Object.assign(Object.assign({},t),{guards:Lu(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Os.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(or.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(cr.a)(t).pipe(Object(Os.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(or.a)(!0);const s=o.map(o=>{const s=Fu(o,e,i);let a;if(function(t){return t&&lu(t.canDeactivate)}(s))a=aa(s.canDeactivate(t,e,n,r));else{if(!lu(s))throw new Error("Invalid CanDeactivate guard");a=aa(s(t,e,n,r))}return a.pipe(ei())});return Object(or.a)(s).pipe(fu())}(t.component,t.route,n,e,r)),ei(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Os.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(cr.a)(e).pipe(Ss(e=>ys(function(t,e){return null!==t&&e&&e(new Gs(t)),Object(or.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Ks(t)),Object(or.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>vs(()=>{const i=e.guards.map(i=>{const o=Fu(i,e.node,n);let s;if(function(t){return t&&lu(t.canActivateChild)}(o))s=aa(o.canActivateChild(r,t));else{if(!lu(o))throw new Error("Invalid CanActivateChild guard");s=aa(o(r,t))}return s.pipe(ei())});return Object(or.a)(i).pipe(fu())}));return Object(or.a)(i).pipe(fu())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(or.a)(!0);const i=r.map(r=>vs(()=>{const i=Fu(r,e,n);let o;if(function(t){return t&&lu(t.canActivate)}(i))o=aa(i.canActivate(e,t));else{if(!lu(i))throw new Error("Invalid CanActivate guard");o=aa(i(e,t))}return o.pipe(ei())}));return Object(or.a)(i).pipe(fu())}(t,e.route,n))),ei(t=>!0!==t,!0))}(r,o,t,e):Object(or.a)(n)),Object(ar.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(ks.a)(t=>{if(hu(t.guardsResult)){const e=ta(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new qs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Ur(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Fs(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Ku(t=>{if(t.guards.canActivateChecks.length)return Object(or.a)(t).pipe(Object(ks.a)(t=>{const e=new Bs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),hr(t=>{let n=!1;return Object(or.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Os.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(or.a)(t);let o=0;return Object(cr.a)(n).pipe(Ss(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(or.a)({});const o={};return Object(cr.a)(i).pipe(Object(Os.a)(i=>function(t,e,n,r){const i=Fu(t,e,r);return aa(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(ks.a)(t=>{o[i]=t}))),Ts(1),Object(Os.a)(()=>Object.keys(o).length===i.length?Object(or.a)(o):Hr.a))}(t._resolve,t,e,r).pipe(Object(ar.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Va(t,n).resolve),null)))}(t.route,e,r,i)),Object(ks.a)(()=>o++),Ts(1),Object(Os.a)(e=>o===n.length?Object(or.a)(t):Hr.a))})),Object(ks.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Fs(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(ks.a)(t=>{const e=new Hs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ku(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(ar.a)(t=>{const e=function(t,e,n){const r=Wa(t,e._root,n?n._root:void 0);return new Fa(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(ks.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),Object(ar.a)(t=>(new au(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),Object(ks.a)({next(){n=!0},complete(){n=!0}}),js(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Fs(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),ws(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=hu(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Fs(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ms(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Oy){t.reject(Oy)}}var i;return Hr.a}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){gu(t),this.config=t.map(vu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Xa(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Ja(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return sa(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Ja(n,e,r)}(n);if(o.toRoot())return Xa(e.root,new fa([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new tu(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new tu(t,t===e.root,0)}const r=$a(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new tu(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?nu(s.segmentGroup,s.index,o.commands):eu(s.segmentGroup,s.index,o.commands);return Xa(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=hu(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(eT){e=this.malformedUriErrorHandler(eT,this.urlSerializer,t)}return e}isActive(t,e){if(hu(t))return ua(this.currentUrlTree,t,e);const n=this.parseUrl(t);return ua(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Ls(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(r.N),r.Ub(ma),r.Ub(Ju),r.Ub(w),r.Ub(r.s),r.Ub(r.x),r.Ub(r.i),r.Ub(void 0))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),oc=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new kr.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:ac(this.skipLocationChange),replaceUrl:ac(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ac(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(ic),r.Lb(Ua),r.Vb("tabindex"),r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Xb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})(),sc=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new kr.a,this.subscription=t.events.subscribe(t=>{t instanceof Ls&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:ac(this.skipLocationChange),replaceUrl:ac(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ac(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(ic),r.Lb(Ua),r.Lb(m))},t.\u0275dir=r.Gb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Xb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Tb("href",e.href,r.kc),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function ac(t){return""===t||!!t}let uc=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof Ls&&this.update()})}ngAfterContentInit(){Object(or.a)(this.links.changes,this.linksWithHrefs.changes,Object(or.a)(null)).pipe(Object(ms.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(cr.a)(e).pipe(Object(ms.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(ic),r.Lb(r.l),r.Lb(r.E),r.Lb(r.h),r.Lb(oc,8),r.Lb(sc,8))},t.\u0275dir=r.Gb({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(r.Eb(n,oc,1),r.Eb(n,sc,1)),2&t){let t;r.gc(t=r.Yb())&&(e.links=t),r.gc(t=r.Yb())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.yb]}),t})(),cc=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Xs,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new lc(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(Ju),r.Lb(r.Q),r.Lb(r.j),r.Vb("name"),r.Lb(r.h))},t.\u0275dir=r.Gb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class lc{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Ua?this.route:t===Ju?this.childContexts:this.parent.get(t,e)}}class hc{}class dc{preload(t,e){return Object(or.a)(null)}}let fc=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Xu(e,n,e=>t.triggerEvent(new Qs(e)),e=>t.triggerEvent(new zs(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ur(t=>t instanceof Ls),Ss(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(cr.a)(n).pipe(Object(ms.a)(),Object(ar.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(or.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(Os.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(ic),r.Ub(r.x),r.Ub(r.i),r.Ub(r.s),r.Ub(hc))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),pc=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ds?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ls&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ys&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Ys(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(ic),r.Ub(M),r.Ub(void 0))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const gc=new r.r("ROUTER_CONFIGURATION"),mc=new r.r("ROUTER_FORROOT_GUARD"),yc=[w,{provide:ma,useClass:ya},{provide:ic,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new ic(null,t,e,n,r,i,s,ia(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[ma,Ju,w,r.s,r.x,r.i,Yu,gc,[class{},new r.B],[class{},new r.B]]},Ju,{provide:Ua,useFactory:function(t){return t.routerState.root},deps:[ic]},{provide:r.x,useClass:r.K},fc,dc,class{preload(t,e){return e().pipe(ws(()=>Object(or.a)(null)))}},{provide:gc,useValue:{enableTracing:!1}}];function vc(){return new r.z("Router",ic)}let bc=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[yc,Ec(e),{provide:mc,useFactory:Cc,deps:[[ic,new r.B,new r.J]]},{provide:gc,useValue:n||{}},{provide:m,useFactory:wc,deps:[a,[new r.p(v),new r.B],gc]},{provide:pc,useFactory:_c,deps:[ic,M,gc]},{provide:hc,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:dc},{provide:r.z,multi:!0,useFactory:vc},[Oc,{provide:r.d,multi:!0,useFactory:Sc,deps:[Oc]},{provide:Ic,useFactory:Tc,deps:[Oc]},{provide:r.b,multi:!0,useExisting:Ic}]]}}static forChild(e){return{ngModule:t,providers:[Ec(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(mc,8),r.Ub(ic,8))},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({}),t})();function _c(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new pc(t,e,n)}function wc(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function Cc(t){return"guarded"}function Ec(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Yu,multi:!0,useValue:t}]}let Oc=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new kr.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ic),r=this.injector.get(gc);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(or.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(gc),n=this.injector.get(fc),i=this.injector.get(pc),o=this.injector.get(ic),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(r.s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();function Sc(t){return t.appInitializer.bind(t)}function Tc(t){return t.bootstrapListener.bind(t)}const Ic=new r.r("Router Initializer");var xc=n("XoHu");function kc(t,e){return new ir.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(cr.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class Ac{}const jc=new r.r("NgValueAccessor"),Pc={provide:jc,useExisting:Object(r.U)(()=>Nc),multi:!0},Rc=new r.r("CompositionEventMode");let Nc=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l),r.Lb(Rc,8))},t.\u0275dir=r.Gb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Xb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([Pc])]}),t})();function Dc(t){return null==t||0===t.length}function Lc(t){return null!=t&&"number"==typeof t.length}const Fc=new r.r("NgValidators"),Mc=new r.r("NgAsyncValidators"),Uc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Vc{static min(t){return function(t){return e=>{if(Dc(e.value)||Dc(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(Dc(e.value)||Dc(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return Dc(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return Dc(t.value)||Uc.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>Dc(e.value)||!Lc(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>Lc(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return qc;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Dc(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return Wc(t)}static composeAsync(t){return $c(t)}}function qc(t){return null}function Bc(t){return null!=t}function Hc(t){const e=Object(r.rb)(t)?Object(cr.a)(t):t;return Object(r.qb)(e),e}function Qc(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function zc(t,e){return e.map(e=>e(t))}function Gc(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Wc(t){if(!t)return null;const e=t.filter(Bc);return 0==e.length?null:function(t){return Qc(zc(t,e))}}function Kc(t){return null!=t?Wc(Gc(t)):null}function $c(t){if(!t)return null;const e=t.filter(Bc);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(hs.a)(e))return kc(e,null);if(Object(xc.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return kc(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return kc(t=1===t.length&&Object(hs.a)(t[0])?t[0]:t,null).pipe(Object(ar.a)(t=>e(...t)))}return kc(t,null)}(zc(t,e).map(Hc)).pipe(Object(ar.a)(Qc))}}function Yc(t){return null!=t?$c(Gc(t)):null}function Xc(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Zc(t){return t._rawValidators}function Jc(t){return t._rawAsyncValidators}let tl=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Kc(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Yc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Gb({type:t}),t})(),el=(()=>{class t extends tl{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return nl(e||t)},t.\u0275dir=r.Gb({type:t,features:[r.xb]}),t})();const nl=r.Sb(el);class rl extends tl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class il{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let ol=(()=>{class t extends il{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(rl,2))},t.\u0275dir=r.Gb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Db("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})(),sl=(()=>{class t extends il{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(el,10))},t.\u0275dir=r.Gb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Db("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function al(t,e){ll(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&dl(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&dl(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function ul(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),hl(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function cl(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ll(t,e,n){const r=Zc(t);null!==e.validator?t.setValidators(Xc(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=Jc(t);if(null!==e.asyncValidator?t.setAsyncValidators(Xc(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();cl(e._rawValidators,n),cl(e._rawAsyncValidators,n)}}function hl(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=Zc(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=Jc(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};cl(e._rawValidators,t),cl(e._rawAsyncValidators,t)}return r}function dl(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function fl(t,e){ll(t,e,!1)}function pl(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function gl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ml="VALID",yl="INVALID",vl="PENDING",bl="DISABLED";function _l(t){return(Ol(t)?t.validators:t)||null}function wl(t){return Array.isArray(t)?Kc(t):t||null}function Cl(t,e){return(Ol(e)?e.asyncValidators:t)||null}function El(t){return Array.isArray(t)?Yc(t):t||null}function Ol(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Sl{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=wl(this._rawValidators),this._composedAsyncValidatorFn=El(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ml}get invalid(){return this.status===yl}get pending(){return this.status==vl}get disabled(){return this.status===bl}get enabled(){return this.status!==bl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=wl(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=El(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=vl,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=bl,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ml,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ml&&this.status!==vl||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bl:ml}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=vl,this._hasOwnPendingAsyncValidator=!0;const e=Hc(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Il?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof xl&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?bl:this.errors?yl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vl)?vl:this._anyControlsHaveStatus(yl)?yl:ml}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ol(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Tl extends Sl{constructor(t=null,e,n){super(_l(e),Cl(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){gl(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){gl(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Il extends Sl{constructor(t,e,n){super(_l(e),Cl(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Tl?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class xl extends Sl{constructor(t,e,n){super(_l(e),Cl(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Tl?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const kl={provide:el,useExisting:Object(r.U)(()=>jl)},Al=(()=>Promise.resolve(null))();let jl=(()=>{class t extends el{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new Il({},Kc(t),Yc(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Al.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),al(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Al.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),gl(this._directives,t)})}addFormGroup(t){Al.then(()=>{const e=this._findContainer(t.path),n=new Il({});fl(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Al.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Al.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,pl(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(Fc,10),r.Lb(Mc,10))},t.\u0275dir=r.Gb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.Xb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([kl]),r.xb]}),t})(),Pl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Gb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Rl={provide:jc,useExisting:Object(r.U)(()=>Nl),multi:!0};let Nl=(()=>{class t extends Ac{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Xb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([Rl]),r.xb]}),t})(),Dl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({}),t})();const Ll=new r.r("NgModelWithFormControlWarning"),Fl={provide:el,useExisting:Object(r.U)(()=>Ml)};let Ml=(()=>{class t extends el{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hl(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return al(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){ul(t.control||null,t,!1),gl(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,pl(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(ul(e||null,t),n instanceof Tl&&(al(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);fl(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return hl(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ll(this.form,this,!1),this._oldForm&&hl(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(Fc,10),r.Lb(Mc,10))},t.\u0275dir=r.Gb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Xb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([Fl]),r.xb,r.yb]}),t})();const Ul={provide:rl,useExisting:Object(r.U)(()=>Vl)};let Vl=(()=>{class t extends rl{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Nc?n=t:Object.getPrototypeOf(t.constructor)===Ac?r=t:i=t}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(el,13),r.Lb(Fc,10),r.Lb(Mc,10),r.Lb(jc,10),r.Lb(Ll,8))},t.\u0275dir=r.Gb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.zb([Ul]),r.xb,r.yb]}),t._ngModelWarningSentOnce=!1,t})();const ql={provide:jc,useExisting:Object(r.U)(()=>Hl),multi:!0};function Bl(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Hl=(()=>{class t extends Ac{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=Bl(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Xb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([ql]),r.xb]}),t})(),Ql=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Bl(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.l),r.Lb(r.E),r.Lb(Hl,9))},t.\u0275dir=r.Gb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const zl={provide:jc,useExisting:Object(r.U)(()=>Wl),multi:!0};function Gl(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Wl=(()=>{class t extends Ac{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Xb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([zl]),r.xb]}),t})(),Kl=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Gl(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Gl(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.l),r.Lb(r.E),r.Lb(Wl,9))},t.\u0275dir=r.Gb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),$l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[Dl]]}),t})(),Yl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[$l]}),t})(),Xl=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Ll,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[$l]}),t})(),Zl=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new Il(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new Tl(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new xl(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Tl||t instanceof Il||t instanceof xl?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:function(){return new t},token:t,providedIn:Xl}),t})();const Jl=["toast-component",""];function th(t,e){if(1&t){const t=r.Rb();r.Qb(0,"button",5),r.Xb("click",function(){return r.ic(t),r.Zb().remove()}),r.Qb(1,"span",6),r.qc(2,"\xd7"),r.Pb(),r.Pb()}}function eh(t,e){if(1&t&&(r.Ob(0),r.qc(1),r.Nb()),2&t){const t=r.Zb(2);r.Ab(1),r.sc("[",t.duplicatesCount+1,"]")}}function nh(t,e){if(1&t&&(r.Qb(0,"div"),r.qc(1),r.oc(2,eh,2,1,"ng-container",4),r.Pb()),2&t){const t=r.Zb();r.Cb(t.options.titleClass),r.Bb("aria-label",t.title),r.Ab(1),r.sc(" ",t.title," "),r.Ab(1),r.cc("ngIf",t.duplicatesCount)}}function rh(t,e){if(1&t&&r.Mb(0,"div",7),2&t){const t=r.Zb();r.Cb(t.options.messageClass),r.cc("innerHTML",t.message,r.jc)}}function ih(t,e){if(1&t&&(r.Qb(0,"div",8),r.qc(1),r.Pb()),2&t){const t=r.Zb();r.Cb(t.options.messageClass),r.Bb("aria-label",t.message),r.Ab(1),r.sc(" ",t.message," ")}}function oh(t,e){if(1&t&&(r.Qb(0,"div"),r.Mb(1,"div",9),r.Pb()),2&t){const t=r.Zb();r.Ab(1),r.mc("width",t.width+"%")}}function sh(t,e){if(1&t){const t=r.Rb();r.Qb(0,"button",5),r.Xb("click",function(){return r.ic(t),r.Zb().remove()}),r.Qb(1,"span",6),r.qc(2,"\xd7"),r.Pb(),r.Pb()}}function ah(t,e){if(1&t&&(r.Ob(0),r.qc(1),r.Nb()),2&t){const t=r.Zb(2);r.Ab(1),r.sc("[",t.duplicatesCount+1,"]")}}function uh(t,e){if(1&t&&(r.Qb(0,"div"),r.qc(1),r.oc(2,ah,2,1,"ng-container",4),r.Pb()),2&t){const t=r.Zb();r.Cb(t.options.titleClass),r.Bb("aria-label",t.title),r.Ab(1),r.sc(" ",t.title," "),r.Ab(1),r.cc("ngIf",t.duplicatesCount)}}function ch(t,e){if(1&t&&r.Mb(0,"div",7),2&t){const t=r.Zb();r.Cb(t.options.messageClass),r.cc("innerHTML",t.message,r.jc)}}function lh(t,e){if(1&t&&(r.Qb(0,"div",8),r.qc(1),r.Pb()),2&t){const t=r.Zb();r.Cb(t.options.messageClass),r.Bb("aria-label",t.message),r.Ab(1),r.sc(" ",t.message," ")}}function hh(t,e){if(1&t&&(r.Qb(0,"div"),r.Mb(1,"div",9),r.Pb()),2&t){const t=r.Zb();r.Ab(1),r.mc("width",t.width+"%")}}class dh{constructor(t,e,n,r,i,o){this.toastId=t,this.config=e,this.message=n,this.title=r,this.toastType=i,this.toastRef=o,this._onTap=new kr.a,this._onAction=new kr.a,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const fh={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},ph=new r.r("ToastConfig");class gh{constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class mh extends class{attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}{constructor(t,e,n){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=n}attachComponentPortal(t,e){const n=this._componentFactoryResolver.resolveComponentFactory(t.component);let r;return r=n.create(t.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let yh=(()=>{class t{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(s))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Ub)(s))},token:t,providedIn:"root"}),t})();class vh{constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let bh=(()=>{class t{constructor(t,e,n,r){this._overlayContainer=t,this._componentFactoryResolver=e,this._appRef=n,this._document=r,this._paneElements=new Map}create(t,e){return this._createOverlayRef(this.getPaneElement(t,e))}getPaneElement(t="",e){return this._paneElements.get(e)||this._paneElements.set(e,{}),this._paneElements.get(e)[t]||(this._paneElements.get(e)[t]=this._createPaneElement(t,e)),this._paneElements.get(e)[t]}_createPaneElement(t,e){const n=this._document.createElement("div");return n.id="toast-container",n.classList.add(t),n.classList.add("toast-container"),e?e.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(t){return new mh(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new vh(this._createPortalHost(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(yh),r.Ub(r.j),r.Ub(r.g),r.Ub(s))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Ub)(yh),Object(r.Ub)(r.j),Object(r.Ub)(r.g),Object(r.Ub)(s))},token:t,providedIn:"root"}),t})();class _h{constructor(t){this._overlayRef=t,this.duplicatesCount=0,this._afterClosed=new kr.a,this._activate=new kr.a,this._manualClose=new kr.a,this._resetTimeout=new kr.a,this._countDuplicate=new kr.a}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class wh{constructor(t,e){this._toastPackage=t,this._parentInjector=e}get(t,e,n){return t===dh?this._toastPackage:this._parentInjector.get(t,e,n)}}let Ch=(()=>{class t{constructor(t,e,n,r,i){this.overlay=e,this._injector=n,this.sanitizer=r,this.ngZone=i,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,e,n={},r=""){return this._preBuildNotification(r,t,e,this.applyConfig(n))}success(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,e,this.applyConfig(n))}error(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,e,this.applyConfig(n))}info(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,e,this.applyConfig(n))}warning(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,e,this.applyConfig(n))}clear(t){for(const e of this.toasts)if(void 0!==t){if(e.toastId===t)return void e.toastRef.manualClose()}else e.toastRef.manualClose()}remove(t){const e=this._findToast(t);if(!e)return!1;if(e.activeToast.toastRef.close(),this.toasts.splice(e.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length)return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const t=this.toasts[this.currentlyActive].toastRef;t.isInactive()||(this.currentlyActive=this.currentlyActive+1,t.activate())}return!0}findDuplicate(t="",e="",n,r){const{includeTitleDuplicates:i}=this.toastrConfig;for(const o of this.toasts){const s=i&&o.title===t;if((!i||s)&&o.message===e)return o.toastRef.onDuplicate(n,r),o}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let e=0;e<this.toasts.length;e++)if(this.toasts[e].toastId===t)return{index:e,activeToast:this.toasts[e]};return null}_preBuildNotification(t,e,n,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,e,n,r)):this._buildNotification(t,e,n,r)}_buildNotification(t,e,n,i){if(!i.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(n,e,this.toastrConfig.resetTimeoutOnDuplicate&&i.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||e)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=e;let s=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(s=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const a=this.overlay.create(i.positionClass,this.overlayContainer);this.index=this.index+1;let u=e;e&&i.enableHtml&&(u=this.sanitizer.sanitize(r.I.HTML,e));const c=new _h(a),l=new dh(this.index,i,u,n,t,c),h=new wh(l,this._injector),d=new gh(i.toastComponent,h),f=a.attach(d,this.toastrConfig.newestOnTop);c.componentInstance=f.instance;const p={toastId:this.index,title:n||"",message:e||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:l.onTap(),onAction:l.onAction(),portal:f};return s||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{p.toastRef.activate()})),this.toasts.push(p),p}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(ph),r.Ub(bh),r.Ub(r.s),r.Ub(ft),r.Ub(r.A))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Ub)(ph),Object(r.Ub)(bh),Object(r.Ub)(r.o),Object(r.Ub)(ft),Object(r.Ub)(r.A))},token:t,providedIn:"root"}),t})(),Eh=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.ngZone=n,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state.value&&(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),e)):this.timeout=setTimeout(()=>t(),e)}outsideInterval(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),e)):this.intervalId=setInterval(()=>t(),e)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}var e;return t.\u0275fac=function(e){return new(e||t)(r.Lb(Ch),r.Lb(dh),r.Lb(r.A))},t.\u0275cmp=r.Fb({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,e){1&t&&r.Xb("click",function(){return e.tapToast()})("mouseenter",function(){return e.stickAround()})("mouseleave",function(){return e.delayedHideToast()}),2&t&&(r.nc("@flyInOut",e.state),r.Cb(e.toastClasses),r.mc("display",e.displayStyle))},attrs:Jl,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(r.oc(0,th,3,0,"button",0),r.oc(1,nh,3,5,"div",1),r.oc(2,rh,1,3,"div",2),r.oc(3,ih,2,4,"div",3),r.oc(4,oh,2,2,"div",4)),2&t&&(r.cc("ngIf",e.options.closeButton),r.Ab(1),r.cc("ngIf",e.title),r.Ab(1),r.cc("ngIf",e.message&&e.options.enableHtml),r.Ab(1),r.cc("ngIf",e.message&&!e.options.enableHtml),r.Ab(1),r.cc("ngIf",e.options.progressBar))},directives:[P],encapsulation:2,data:{animation:[(e=[Ot("inactive",Et({opacity:0})),Ot("active",Et({opacity:1})),Ot("removed",Et({opacity:0})),St("inactive => active",wt("{{ easeTime }}ms {{ easing }}")),St("active => removed",wt("{{ easeTime }}ms {{ easing }}"))],{type:7,name:"flyInOut",definitions:e,options:{}})]}}),t})();const Oh=Object.assign(Object.assign({},fh),{toastComponent:Eh});let Sh=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:ph,useValue:{default:Oh,config:e}}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[D]]}),t})(),Th=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.appRef=n,this.width=-1,this.toastClasses="",this.state="inactive",this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state&&(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(Ch),r.Lb(dh),r.Lb(r.g))},t.\u0275cmp=r.Fb({type:t,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,e){1&t&&r.Xb("click",function(){return e.tapToast()})("mouseenter",function(){return e.stickAround()})("mouseleave",function(){return e.delayedHideToast()}),2&t&&(r.Cb(e.toastClasses),r.mc("display",e.displayStyle))},attrs:Jl,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(r.oc(0,sh,3,0,"button",0),r.oc(1,uh,3,5,"div",1),r.oc(2,ch,1,3,"div",2),r.oc(3,lh,2,4,"div",3),r.oc(4,hh,2,2,"div",4)),2&t&&(r.cc("ngIf",e.options.closeButton),r.Ab(1),r.cc("ngIf",e.title),r.Ab(1),r.cc("ngIf",e.message&&e.options.enableHtml),r.Ab(1),r.cc("ngIf",e.message&&!e.options.enableHtml),r.Ab(1),r.cc("ngIf",e.options.progressBar))},directives:[P],encapsulation:2}),t})();function Ih(t,e){1&t&&(r.Qb(0,"div"),r.qc(1,"Email is required"),r.Pb())}function xh(t,e){1&t&&(r.Qb(0,"div"),r.qc(1,"Must be an valid email address"),r.Pb())}function kh(t,e){if(1&t&&(r.Qb(0,"div",12),r.oc(1,Ih,2,0,"div",13),r.oc(2,xh,2,0,"div",13),r.Pb()),2&t){const t=r.Zb();r.Ab(1),r.cc("ngIf",t.f.email.errors.required),r.Ab(1),r.cc("ngIf",t.f.email.errors.email)}}function Ah(t,e){1&t&&(r.Qb(0,"div"),r.qc(1,"Password is required"),r.Pb())}function jh(t,e){if(1&t&&(r.Qb(0,"div",12),r.oc(1,Ah,2,0,"div",13),r.Pb()),2&t){const t=r.Zb();r.Ab(1),r.cc("ngIf",t.f.password.errors.required)}}function Ph(t,e){1&t&&(r.Qb(0,"button"),r.Ob(1),r.Mb(2,"div",14),r.Nb(),r.Pb())}function Rh(t,e){if(1&t&&(r.Qb(0,"button",15,11),r.qc(2,"Submit"),r.Pb()),2&t){const t=r.Zb();r.cc("hidden",t.isSaving)}}Object.assign(Object.assign({},fh),{toastComponent:Th});const Nh=function(t){return{"is-invalid":t}};let Dh=(()=>{class t{constructor(t,e,n){this.formBuilder=t,this.fireAuth=e,this.toastr=n,this.submitted=!1,this.isSaving=!1}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[Vc.required,Vc.email]],password:["",Vc.required]})}get f(){return this.loginForm.controls}onSubmit(){this.submitted=!0,this.loginForm.invalid||(this.isSaving=!0,this.fireAuth.signInWithEmailAndPassword(this.loginForm.value.email,this.loginForm.value.password).then(t=>{localStorage.setItem("User",JSON.stringify(t.user.za)),this.toastr.success("Successfuly logged in"),setTimeout(()=>{window.location.href="product"},0),this.isSaving=!0}).catch(t=>{this.toastr.error(t.message),this.isSaving=!0}))}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(Zl),r.Lb(li),r.Lb(Ch))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-login"]],decls:19,vars:11,consts:[[1,"login-main-outer"],[1,"login-inner"],[1,"form-outer"],[1,"form",3,"formGroup","ngSubmit"],[1,"col-md-6","form-group",3,"ngClass"],["aria-hidden","true",1,"fa","fa-envelope-o"],["type","email","id","email","placeholder","Enter your email","formControlName","email",1,"form-control","input-style"],["class","invalid-feedback",4,"ngIf"],["aria-hidden","true",1,"fa","fa-unlock-alt"],["type","password","id","password","placeholder","Password","formControlName","password",1,"form-control","input-style"],[4,"ngIf","ngIfElse"],["submitLogin",""],[1,"invalid-feedback"],[4,"ngIf"],[1,"loader",2,"margin","auto","height","20px","width","20px"],["type","submit",3,"hidden"]],template:function(t,e){if(1&t&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"h2"),r.qc(4,"Sign In"),r.Pb(),r.Qb(5,"form",3),r.Xb("ngSubmit",function(){return e.onSubmit()}),r.Qb(6,"div",4),r.Qb(7,"span"),r.Mb(8,"i",5),r.Pb(),r.Mb(9,"input",6),r.Pb(),r.oc(10,kh,3,2,"div",7),r.Qb(11,"div",4),r.Qb(12,"span"),r.Mb(13,"i",8),r.Pb(),r.Mb(14,"input",9),r.Pb(),r.oc(15,jh,2,1,"div",7),r.oc(16,Ph,3,0,"button",10),r.oc(17,Rh,3,1,"ng-template",null,11,r.pc),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&t){const t=r.hc(18);r.Ab(5),r.cc("formGroup",e.loginForm),r.Ab(1),r.cc("ngClass",r.fc(7,Nh,e.submitted&&e.f.email.errors)),r.Ab(4),r.cc("ngIf",e.submitted&&e.f.email.errors),r.Ab(1),r.cc("ngClass",r.fc(9,Nh,e.submitted&&e.f.password.errors)),r.Ab(4),r.cc("ngIf",e.submitted&&e.f.password.errors),r.Ab(1),r.cc("ngIf",e.isSaving)("ngIfElse",t)}},directives:[Pl,sl,Ml,x,Nc,ol,Vl,P],styles:[".invalid-feedback[_ngcontent-%COMP%]{text-align:left;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545;margin-bottom:20px}.login-main-outer[_ngcontent-%COMP%]{background:#5e72e4;font-family:Roboto,sans-serif;height:100vh}.login-inner[_ngcontent-%COMP%]{width:375px;padding:8% 0 0;margin:auto}.form-outer[_ngcontent-%COMP%]{position:relative;z-index:1;background:#fff;max-width:360px;padding:35px;text-align:center;box-shadow:0 0 20px 0 rgba(0,0,0,.2),0 5px 5px 0 rgba(0,0,0,.24);border-radius:5px}.form-outer[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px}.form-outer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;text-decoration:none;display:flex;justify-content:flex-end}.form[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]{display:flex;background:#f2f2f2;border-radius:5px;margin:0 0 10px}.form-group.is-invalid[_ngcontent-%COMP%]{border:1px solid #dc3545}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:15px 15px 15px 0;background:#f2f2f2;box-sizing:border-box;flex:1;margin-left:10px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:0;border:0;font-size:14px;border-radius:5px}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:uppercase;background:#5e72e4;width:100%;padding:15px;color:#fff;transition:all .3 ease;cursor:pointer}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#3d4a94}.form-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#adb5bd;padding:15px 0 15px 15px;min-width:15px}"]}),t})();var Lh=function(){function t(t){this.el=t,this.dtOptions={}}return t.prototype.ngOnInit=function(){var t=this;this.dtTrigger?this.dtTrigger.subscribe(function(){t.displayTable()}):this.displayTable()},t.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},t.prototype.displayTable=function(){var t=this;this.dtInstance=new Promise(function(e,n){Promise.resolve(t.dtOptions).then(function(n){setTimeout(function(){var r={rowCallback:function(e,r,i){if(n.columns){var o=n.columns;o.filter(function(t){return t.ngPipeInstance}).forEach(function(t){var n=t.ngPipeInstance,r=o.findIndex(function(e){return e.data==t.data}),i=e.childNodes.item(r),s=$(i).text(),a=n.transform(s);$(i).text(a)})}t.dtOptions.rowCallback&&t.dtOptions.rowCallback(e,r,i)}};r=Object.assign({},n,r),t.dt=$(t.el.nativeElement).DataTable(r),e(t.dt)})})})},t.\u0275fac=function(e){return new(e||t)(r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),t}(),Fh=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[D]]}),t}();function Mh(){return t=>t.lift(new Uh)}class Uh{call(t,e){return e.subscribe(new Vh(t))}}class Vh extends pr.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var qh=n("q/0M"),Bh=function(t,e){return(Bh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Hh(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Qh,zh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Gh=Gh||{},Wh=zh||self;function Kh(){}function $h(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Yh(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Xh="closure_uid_"+(1e9*Math.random()>>>0),Zh=0;function Jh(t,e,n){return t.call.apply(t.bind,arguments)}function td(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ed(t,e,n){return(ed=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jh:td).apply(null,arguments)}function nd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function rd(){return Date.now()}function id(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function od(){this.j=this.j,this.i=this.i}od.prototype.j=!1,od.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Xh)&&t[Xh]||(t[Xh]=++Zh)}(this)},od.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var sd=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ad=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ud(t){return Array.prototype.concat.apply([],arguments)}function cd(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ld(t){return/^[\s\xa0]*$/.test(t)}var hd,dd=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function fd(t,e){return-1!=t.indexOf(e)}function pd(t,e){return t<e?-1:t>e?1:0}t:{var gd=Wh.navigator;if(gd){var md=gd.userAgent;if(md){hd=md;break t}}hd=""}function yd(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function vd(t){var e={};for(var n in t)e[n]=t[n];return e}var bd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _d(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<bd.length;o++)n=bd[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wd(t){return wd[" "](t),t}wd[" "]=Kh;var Cd,Ed,Od=fd(hd,"Opera"),Sd=fd(hd,"Trident")||fd(hd,"MSIE"),Td=fd(hd,"Edge"),Id=Td||Sd,xd=fd(hd,"Gecko")&&!(fd(hd.toLowerCase(),"webkit")&&!fd(hd,"Edge"))&&!(fd(hd,"Trident")||fd(hd,"MSIE"))&&!fd(hd,"Edge"),kd=fd(hd.toLowerCase(),"webkit")&&!fd(hd,"Edge");function Ad(){var t=Wh.document;return t?t.documentMode:void 0}t:{var jd="",Pd=(Ed=hd,xd?/rv:([^\);]+)(\)|;)/.exec(Ed):Td?/Edge\/([\d\.]+)/.exec(Ed):Sd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ed):kd?/WebKit\/(\S+)/.exec(Ed):Od?/(?:Version)[ \/]?(\S+)/.exec(Ed):void 0);if(Pd&&(jd=Pd?Pd[1]:""),Sd){var Rd=Ad();if(null!=Rd&&Rd>parseFloat(jd)){Cd=String(Rd);break t}}Cd=jd}var Nd={};function Dd(t){return function(t,e){var n=Nd;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=dd(String(Cd)).split("."),r=dd(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=pd(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||pd(0==s[2].length,0==a[2].length)||pd(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Ld=Wh.document&&Sd&&(Ad()||parseInt(Cd,10))||void 0,Fd=!Sd||9<=Number(Ld),Md=Sd&&!Dd("9"),Ud=function(){if(!Wh.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Wh.addEventListener("test",Kh,e),Wh.removeEventListener("test",Kh,e)}catch(n){}return t}();function Vd(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function qd(t,e){if(Vd.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(xd){t:{try{wd(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Bd[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Vd.prototype.b=function(){this.defaultPrevented=!0},id(qd,Vd);var Bd={2:"touch",3:"pen",4:"mouse"};qd.prototype.b=function(){qd.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Md)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Hd="closure_listenable_"+(1e6*Math.random()|0),Qd=0;function zd(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Qd,this.Y=this.Z=!1}function Gd(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Wd(t){this.src=t,this.a={},this.b=0}function Kd(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=sd(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Gd(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function $d(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Wd.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=$d(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new zd(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Yd="closure_lm_"+(1e6*Math.random()|0),Xd={};function Zd(t,e,n,r,i){if(r&&r.once)return tf(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Zd(t,e[o],n,r,i);return null}return n=cf(n),t&&t[Hd]?t.va(e,n,Yh(r)?!!r.capture:!!r,i):Jd(t,e,n,!1,r,i)}function Jd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Yh(i)?!!i.capture:!!i;if(s&&!Fd)return null;var a=af(t);if(a||(t[Yd]=a=new Wd(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=sf,e=Fd?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ud||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rf(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function tf(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)tf(t,e[o],n,r,i);return null}return n=cf(n),t&&t[Hd]?t.wa(e,n,Yh(r)?!!r.capture:!!r,i):Jd(t,e,n,!0,r,i)}function ef(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ef(t,e[o],n,r,i);else r=Yh(r)?!!r.capture:!!r,n=cf(n),t&&t[Hd]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=$d(o=t.a[e],n,r,i))&&(Gd(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=af(t))&&(e=t.a[e.toString()],t=-1,e&&(t=$d(e,n,r,i)),(n=-1<t?e[t]:null)&&nf(n))}function nf(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Hd])Kd(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(rf(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=af(e))?(Kd(n,t),0==n.b&&(n.src=null,e[Yd]=null)):Gd(t)}}}function rf(t){return t in Xd?Xd[t]:Xd[t]="on"+t}function of(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&nf(t),n.call(r,e)}function sf(t,e){if(t.Y)return!0;if(!Fd){if(!e)t:{e=["window","event"];for(var n=Wh,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return of(t,e=new qd(e,this))}return of(t,new qd(e,this))}function af(t){return(t=t[Yd])instanceof Wd?t:null}var uf="__closure_events_fn_"+(1e9*Math.random()>>>0);function cf(t){return"function"==typeof t?t:(t[uf]||(t[uf]=function(e){return t.handleEvent(e)}),t[uf])}function lf(){od.call(this),this.c=new Wd(this),this.J=this,this.C=null}function hf(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Vd(e,t);else if(e instanceof Vd)e.target=e.target||t;else{var i=e;_d(e=new Vd(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=df(s,r,!0,e)&&i}if(i=df(s=e.a=t,r,!0,e)&&i,i=df(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=df(s=e.a=n[o],r,!1,e)&&i}function df(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Kd(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}id(lf,od),lf.prototype[Hd]=!0,(Qh=lf.prototype).addEventListener=function(t,e,n,r){Zd(this,t,e,n,r)},Qh.removeEventListener=function(t,e,n,r){ef(this,t,e,n,r)},Qh.G=function(){if(lf.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Gd(n[r]);delete e.a[t],e.b--}}this.C=null},Qh.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Qh.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ff=Wh.JSON.stringify;function pf(){this.b=this.a=null}var gf,mf=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new vf},function(t){t.reset()});function yf(){var t=Cf,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function vf(){this.next=this.b=this.a=null}function bf(t){Wh.setTimeout(function(){throw t},0)}function _f(t,e){gf||function(){var t=Wh.Promise.resolve(void 0);gf=function(){t.then(Ef)}}(),wf||(gf(),wf=!0),Cf.add(t,e)}pf.prototype.add=function(t,e){var n=mf.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},vf.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},vf.prototype.reset=function(){this.next=this.b=this.a=null};var wf=!1,Cf=new pf;function Ef(){for(var t;t=yf();){try{t.a.call(t.b)}catch(n){bf(n)}var e=mf;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}wf=!1}function Of(t,e){lf.call(this),this.b=t||1,this.a=e||Wh,this.f=ed(this.Za,this),this.g=rd()}function Sf(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Tf(t,e,n){if("function"==typeof t)n&&(t=ed(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ed(t.handleEvent,t)}return 2147483647<Number(e)?-1:Wh.setTimeout(t,e||0)}function If(t){t.a=Tf(function(){t.a=null,t.c&&(t.c=!1,If(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}id(Of,lf),(Qh=Of.prototype).aa=!1,Qh.M=null,Qh.Za=function(){if(this.aa){var t=rd()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),hf(this,"tick"),this.aa&&(Sf(this),this.start()))}},Qh.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=rd())},Qh.G=function(){Of.X.G.call(this),Sf(this),delete this.a};var xf=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Bh(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:If(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Wh.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(od);function kf(t){od.call(this),this.b=t,this.a={}}id(kf,od);var Af=[];function jf(t,e,n,r){Array.isArray(n)||(n&&(Af[0]=n.toString()),n=Af);for(var i=0;i<n.length;i++){var o=Zd(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Pf(t){yd(t.a,function(t,e){this.a.hasOwnProperty(e)&&nf(t)},t),t.a={}}function Rf(){this.a=!0}function Nf(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ff(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}kf.prototype.G=function(){kf.X.G.call(this),Pf(this)},kf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rf.prototype.info=function(){};var Df={},Lf=null;function Ff(){return Lf=Lf||new lf}function Mf(t){Vd.call(this,Df.Fa,t)}function Uf(t){var e=Ff();hf(e,new Mf(e,t))}function Vf(t,e){Vd.call(this,Df.STAT_EVENT,t),this.stat=e}function qf(t){var e=Ff();hf(e,new Vf(e,t))}function Bf(t){Vd.call(this,Df.Ga,t)}function Hf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Wh.setTimeout(function(){t()},e)}Df.Fa="serverreachability",id(Mf,Vd),Df.STAT_EVENT="statevent",id(Vf,Vd),Df.Ga="timingevent",id(Bf,Vd);var Qf={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},zf={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Gf(){}function Wf(){}Gf.prototype.a=null;var Kf,$f={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Yf(){Vd.call(this,"d")}function Xf(){Vd.call(this,"c")}function Zf(){}function Jf(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new kf(this),this.P=tp,this.R=new Of(t=Id?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}id(Yf,Vd),id(Xf,Vd),id(Zf,Gf),Kf=new Zf;var tp=45e3,ep={},np={};function rp(t,e,n){t.H=1,t.i=Sp(bp(e)),t.j=n,t.I=!0,ip(t,null)}function ip(t,e){t.u=rd(),ap(t),t.l=bp(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Mp(n.b,"t",r),t.D=0,t.a=Pg(t.g,t.g.C?e:null),0<t.O&&(t.F=new xf(ed(t.Ca,t,t.a),t.O)),jf(t.J,t.a,"readystatechange",t.Xa),e=t.B?vd(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Uf(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function op(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=sp(t,n);if(i==np){4==e&&(t.h=4,qf(14),r=!1),Nf(t.c,t.f,null,"[Incomplete Response]");break}if(i==ep){t.h=4,qf(15),Nf(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Nf(t.c,t.f,i,null),dp(t,i)}4==e&&0==n.length&&(t.h=1,qf(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Og(e),e.F=!0,qf(11))):(Nf(t.c,t.f,n,"[Invalid Chunked Response]"),hp(t),lp(t))}function sp(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?np:(n=Number(e.substring(n,r)),isNaN(n)?ep:(r+=1)+n>e.length?np:(e=e.substr(r,n),t.D=r+n,e))}function ap(t){t.T=rd()+t.P,up(t,t.P)}function up(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Hf(ed(t.Va,t),e)}function cp(t){t.o&&(Wh.clearTimeout(t.o),t.o=null)}function lp(t){0==t.g.v||t.A||Ig(t.g,t)}function hp(t){cp(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Sf(t.R),Pf(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function dp(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||zp(n.b,t)))if(n.I=t.N,!t.C&&zp(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(pS){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Tg(n),gg(n)}Eg(n),qf(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Hf(ed(n.Sa,n),6e3));if(1>=Qp(n.b)&&n.ea){try{n.ea()}catch(pS){}n.ea=void 0}}else kg(n,11)}else if((t.C||n.a==t)&&Tg(n),!ld(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(fd(l,"spdy")||fd(l,"quic")||fd(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Gp(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Op(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=rd()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=jg(u,u.C?u.ga:null,u.fa),f.C){Wp(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(cp(p),ap(p)),u.a=f}else Cg(u);0<n.g.length&&vg(n)}else"stop"!=i[0]&&"close"!=i[0]||kg(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?kg(n,7):pg(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Uf(4)}catch(pS){}}function fp(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if($h(t)||"string"==typeof t)ad(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if($h(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if($h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function pp(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof pp)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function gp(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];mp(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)mp(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function mp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Qh=Jf.prototype).setTimeout=function(t){this.P=t},Qh.Xa=function(t){t=t.target;var e=this.F;e&&3==lg(t)?e.f():this.Ca(t)},Qh.Ca=function(t){try{if(t==this.a)t:{var e=lg(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Id&&!this.a.$())){this.A||4!=e||7==n||Uf(8==n||0>=r?3:2),cp(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ld(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,qf(12),hp(this),lp(this);break t}Nf(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,dp(this,u)}this.I?(op(this,e,o),Id&&this.b&&3==e&&(jf(this.J,this.R,"tick",this.Wa),this.R.start())):(Nf(this.c,this.f,o,null),dp(this,o)),4==e&&hp(this),this.b&&!this.A&&(4==e?Ig(this.g,this):(this.b=!1,ap(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,qf(12)):(this.h=0,qf(13)),hp(this),lp(this)}}}catch(c){}},Qh.Wa=function(){if(this.a){var t=lg(this.a),e=this.a.$();this.D<e.length&&(cp(this),op(this,t,e),this.b&&4!=t&&ap(this))}},Qh.cancel=function(){this.A=!0,hp(this)},Qh.Va=function(){this.o=null;var t=rd();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Uf(3),qf(17)),hp(this),this.h=2,lp(this)):up(this,this.T-t)},(Qh=pp.prototype).K=function(){gp(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Qh.L=function(){return gp(this),this.a.concat()},Qh.get=function(t,e){return mp(this.b,t)?this.b[t]:e},Qh.set=function(t,e){mp(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Qh.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var yp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vp(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof vp){this.a=void 0!==e?e:t.a,_p(this,t.f),this.j=t.j,wp(this,t.c),Cp(this,t.h),this.g=t.g,e=t.b;var n=new Np;n.c=e.c,e.a&&(n.a=new pp(e.a),n.b=e.b),Ep(this,n),this.i=t.i}else t&&(n=String(t).match(yp))?(this.a=!!e,_p(this,n[1]||"",!0),this.j=Tp(n[2]||""),wp(this,n[3]||"",!0),Cp(this,n[4]),this.g=Tp(n[5]||"",!0),Ep(this,n[6]||"",!0),this.i=Tp(n[7]||"")):(this.a=!!e,this.b=new Np(null,this.a))}function bp(t){return new vp(t)}function _p(t,e,n){t.f=n?Tp(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function wp(t,e,n){t.c=n?Tp(e,!0):e}function Cp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ep(t,e,n){e instanceof Np?(t.b=e,function(t,e){e&&!t.f&&(Dp(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Lp(this,e),Mp(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Ip(e,Pp)),t.b=new Np(e,t.a))}function Op(t,e,n){t.b.set(e,n)}function Sp(t){return Op(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^rd()).toString(36)),t}function Tp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ip(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xp),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xp(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}vp.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ip(e,kp,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ip(e,kp,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ip(n,"/"==n.charAt(0)?jp:Ap,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ip(n,Rp)),t.join("")};var kp=/[#\/\?@]/g,Ap=/[#\?:]/g,jp=/[#\?]/g,Pp=/[#\?@]/g,Rp=/#/g;function Np(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Dp(t){t.a||(t.a=new pp,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Lp(t,e){Dp(t),e=Up(t,e),mp(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,mp((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&gp(t)))}function Fp(t,e){return Dp(t),e=Up(t,e),mp(t.a.b,e)}function Mp(t,e,n){Lp(t,e),0<n.length&&(t.c=null,t.a.set(Up(t,e),cd(n)),t.b+=n.length)}function Up(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Qh=Np.prototype).add=function(t,e){Dp(this),this.c=null,t=Up(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Qh.forEach=function(t,e){Dp(this),this.a.forEach(function(n,r){ad(n,function(n){t.call(e,n,r,this)},this)},this)},Qh.L=function(){Dp(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Qh.K=function(t){Dp(this);var e=[];if("string"==typeof t)Fp(this,t)&&(e=ud(e,this.a.get(Up(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=ud(e,t[n])}return e},Qh.set=function(t,e){return Dp(this),this.c=null,Fp(this,t=Up(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Qh.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Qh.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Vp=function(){return function(t,e){this.b=t,this.a=e}}();function qp(t){this.g=t||Bp,t=Wh.PerformanceNavigationTiming?0<(t=Wh.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Wh.ia&&Wh.ia.ya&&Wh.ia.ya()&&Wh.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Bp=10;function Hp(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Qp(t){return t.b?1:t.a?t.a.size:0}function zp(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Gp(t,e){t.a?t.a.add(e):t.b=e}function Wp(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Kp(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Hh(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return cd(t.c)}function $p(){}function Yp(){this.a=new $p}function Xp(t,e,n){var r=n||"";try{fp(t,function(t,n){var i=t;Yh(t)&&(i=ff(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(eT){throw e.push(r+"type="+encodeURIComponent("_badmap")),eT}}function Zp(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}qp.prototype.cancel=function(){var t,e;if(this.c=Kp(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Hh(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},$p.prototype.stringify=function(t){return Wh.JSON.stringify(t,void 0)},$p.prototype.parse=function(t){return Wh.JSON.parse(t,void 0)};var Jp=Wh.JSON.parse;function tg(t){lf.call(this),this.headers=new pp,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=eg,this.D=this.F=!1}id(tg,lf);var eg="",ng=/^https?$/i,rg=["POST","PUT"];function ig(t){return"content-type"==t.toLowerCase()}function og(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,sg(t),ug(t)}function sg(t){t.u||(t.u=!0,hf(t,"complete"),hf(t,"error"))}function ag(t){if(t.b&&void 0!==Gh&&(!t.s[1]||4!=lg(t)||2!=t.W()))if(t.l&&4==lg(t))Tf(t.za,0,t);else if(hf(t,"readystatechange"),4==lg(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(yp)[1]||null;if(!o&&Wh.self&&Wh.self.location){var s=Wh.self.location.protocol;o=s.substr(0,s.length-1)}i=!ng.test(o?o.toLowerCase():"")}e=i}if(e)hf(t,"complete"),hf(t,"success");else{t.h=6;try{var a=2<lg(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",sg(t)}}finally{ug(t)}}}function ug(t,e){if(t.a){cg(t);var n=t.a,r=t.s[0]?Kh:null;t.a=null,t.s=null,e||hf(t,"ready");try{n.onreadystatechange=r}catch(eT){}}}function cg(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Wh.clearTimeout(t.m),t.m=null)}function lg(t){return t.a?t.a.readyState:0}function hg(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return yd(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Op(t,e,n))}function dg(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function fg(t){this.pa=0,this.g=[],this.c=new Rf,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=dg("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=dg("baseRetryDelayMs",5e3,t),this.Ra=dg("retryDelaySeedMs",1e4,t),this.Ma=dg("forwardChannelMaxRetries",2,t),this.ma=dg("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new qp(t&&t.concurrentRequestLimit),this.ka=new Yp,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function pg(t){if(mg(t),3==t.v){var e=t.R++,n=bp(t.B);Op(n,"SID",t.J),Op(n,"RID",e),Op(n,"TYPE","terminate"),_g(t,n),(e=new Jf(t,t.c,e,void 0)).H=2,e.i=Sp(bp(n)),n=!1,Wh.navigator&&Wh.navigator.sendBeacon&&(n=Wh.navigator.sendBeacon(e.i.toString(),"")),!n&&Wh.Image&&((new Image).src=e.i,n=!0),n||(e.a=Pg(e.g,null),e.a.ba(e.i)),e.u=rd(),ap(e)}Ag(t)}function gg(t){t.a&&(Og(t),t.a.cancel(),t.a=null)}function mg(t){gg(t),t.j&&(Wh.clearTimeout(t.j),t.j=null),Tg(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Wh.clearTimeout(t.h),t.h=null)}function yg(t,e){t.g.push(new Vp(t.Oa++,e)),3==t.v&&vg(t)}function vg(t){Hp(t.b)||t.h||(t.h=!0,_f(t.Ba,t),t.u=0)}function bg(t,e){var n;n=e?e.f:t.R++;var r=bp(t.B);Op(r,"SID",t.J),Op(r,"RID",n),Op(r,"AID",t.P),_g(t,r),t.i&&t.l&&hg(r,t.i,t.l),n=new Jf(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=wg(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Gp(t.b,n),rp(n,r,e)}function _g(t,e){t.f&&fp({},function(t,n){Op(e,n,t)})}function wg(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ed(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Xp(l,s,"req"+c+"_")}catch(lm){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Cg(t){t.a||t.j||(t.T=1,_f(t.Aa,t),t.o=0)}function Eg(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Hf(ed(t.Aa,t),xg(t,t.o)),t.o++,0))}function Og(t){null!=t.s&&(Wh.clearTimeout(t.s),t.s=null)}function Sg(t){t.a=new Jf(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=bp(t.la);Op(e,"RID","rpc"),Op(e,"SID",t.J),Op(e,"CI",t.H?"0":"1"),Op(e,"AID",t.P),_g(t,e),Op(e,"TYPE","xmlhttp"),t.i&&t.l&&hg(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Sp(bp(e)),n.j=null,n.I=!0,ip(n,t)}function Tg(t){null!=t.m&&(Wh.clearTimeout(t.m),t.m=null)}function Ig(t,e){var n=null;if(t.a==e){Tg(t),Og(t),t.a=null;var r=2}else{if(!zp(t.b,e))return;n=e.s,Wp(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=rd()-e.u;var i=t.u;hf(r=Ff(),new Bf(r,n,e,i)),vg(t)}else Cg(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Qp(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Hf(ed(t.Ba,t,e),xg(t,t.u)),t.u++,0)))}(t,e)||2==r&&Eg(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:kg(t,5);break;case 4:kg(t,10);break;case 3:kg(t,6);break;default:kg(t,2)}}function xg(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function kg(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ed(t.Ya,t);n||(n=new vp("//www.google.com/images/cleardot.gif"),Wh.location&&"http"==Wh.location.protocol||_p(n,"https"),Sp(n)),function(t,e){var n=new Rf;if(Wh.Image){var r=new Image;r.onload=nd(Zp,n,r,"TestLoadImage: loaded",!0,e),r.onerror=nd(Zp,n,r,"TestLoadImage: error",!1,e),r.onabort=nd(Zp,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=nd(Zp,n,r,"TestLoadImage: timeout",!1,e),Wh.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else qf(2);t.v=0,t.f&&t.f.ra(e),Ag(t),mg(t)}function Ag(t){t.v=0,t.I=-1,t.f&&(0==Kp(t.b).length&&0==t.g.length||(t.b.c.length=0,cd(t.g),t.g.length=0),t.f.qa())}function jg(t,e,n){var r=function(t){return t instanceof vp?bp(t):new vp(t,void 0)}(n);if(""!=r.c)e&&wp(r,e+"."+r.c),Cp(r,r.h);else{var i=Wh.location;r=function(t,e,n,r){var i=new vp(null,void 0);return t&&_p(i,t),e&&wp(i,e),n&&Cp(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&yd(t.V,function(t,e){Op(r,e,t)}),n=t.na,(e=t.A)&&n&&Op(r,e,n),Op(r,"VER",t.ha),_g(t,r),r}function Pg(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tg(t.Na)).F=t.C,e}function Rg(){}function Ng(){if(Sd&&!(10<=Number(Ld)))throw Error("Environmental error: no available transport.")}function Dg(t,e){lf.call(this),this.a=new fg(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!ld(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ld(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Mg(this)}function Lg(t){Yf.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Fg(){Xf.call(this),this.status=1}function Mg(t){this.a=t}(Qh=tg.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Kf),this.a.onreadystatechange=ed(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void og(this,o)}t=n||"";var i=new pp(this.headers);r&&fp(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=ig,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Wh.FormData&&t instanceof Wh.FormData,!(0<=sd(rg,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{cg(this),0<this.o&&((this.D=function(t){return Sd&&Dd(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ed(this.xa,this)):this.m=Tf(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){og(this,o)}},Qh.xa=function(){void 0!==Gh&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,hf(this,"timeout"),this.abort(8))},Qh.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,hf(this,"complete"),hf(this,"abort"),ug(this))},Qh.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ug(this,!0)),tg.X.G.call(this)},Qh.za=function(){this.j||(this.A||this.l||this.g?ag(this):this.Ua())},Qh.Ua=function(){ag(this)},Qh.W=function(){try{return 2<lg(this)?this.a.status:-1}catch(Ed){return-1}},Qh.$=function(){try{return this.a?this.a.responseText:""}catch(Ed){return""}},Qh.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Jp(e)}},Qh.ua=function(){return this.h},Qh.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Qh=fg.prototype).ha=8,Qh.v=1,Qh.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Jf(this,this.c,t,void 0),r=this.l;if(this.O&&(r?_d(r=vd(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=wg(this,n,e),Op(i=bp(this.B),"RID",t),Op(i,"CVER",22),this.A&&Op(i,"X-HTTP-Session-Id",this.A),_g(this,i),this.i&&r&&hg(i,this.i,r),Gp(this.b,n),this.Ia&&Op(i,"TYPE","init"),this.da?(Op(i,"$req",e),Op(i,"SID","null"),n.U=!0,rp(n,i,null)):rp(n,i,e),this.v=2}}else 3==this.v&&(t?bg(this,t):0==this.g.length||Hp(this.b)||bg(this))},Qh.Aa=function(){if(this.j=null,Sg(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Hf(ed(this.Ta,this),t)}},Qh.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,qf(10),gg(this),Sg(this))},Qh.Sa=function(){null!=this.m&&(this.m=null,gg(this),Eg(this),qf(19))},Qh.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),qf(2)):(this.c.info("Failed to ping google.com"),qf(1))},(Qh=Rg.prototype).ta=function(){},Qh.sa=function(){},Qh.ra=function(){},Qh.qa=function(){},Qh.Ja=function(){},Ng.prototype.a=function(t,e){return new Dg(t,e)},id(Dg,lf),Dg.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;qf(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=jg(t,null,t.fa),vg(t)},Dg.prototype.close=function(){pg(this.a)},Dg.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,yg(this.a,e)}else this.l?((e={}).__data__=ff(t),yg(this.a,e)):yg(this.a,t)},Dg.prototype.G=function(){this.a.f=null,delete this.f,pg(this.a),delete this.a,Dg.X.G.call(this)},id(Lg,Yf),id(Fg,Xf),id(Mg,Rg),Mg.prototype.ta=function(){hf(this.a,"a")},Mg.prototype.sa=function(t){hf(this.a,new Lg(t))},Mg.prototype.ra=function(t){hf(this.a,new Fg(t))},Mg.prototype.qa=function(){hf(this.a,"b")},Ng.prototype.createWebChannel=Ng.prototype.a,Dg.prototype.send=Dg.prototype.h,Dg.prototype.open=Dg.prototype.g,Dg.prototype.close=Dg.prototype.close,Qf.NO_ERROR=0,Qf.TIMEOUT=8,Qf.HTTP_ERROR=6,zf.COMPLETE="complete",Wf.EventType=$f,$f.OPEN="a",$f.CLOSE="b",$f.ERROR="c",$f.MESSAGE="d",lf.prototype.listen=lf.prototype.va,tg.prototype.listenOnce=tg.prototype.wa,tg.prototype.getLastError=tg.prototype.Qa,tg.prototype.getLastErrorCode=tg.prototype.ua,tg.prototype.getStatus=tg.prototype.W,tg.prototype.getResponseJson=tg.prototype.Pa,tg.prototype.getResponseText=tg.prototype.$,tg.prototype.send=tg.prototype.ba;var Ug=Qf,Vg=zf,qg=Df,Bg=Wf,Hg=tg,Qg=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Qg.o=-1;var zg=new qh.b("@firebase/firestore");function Gg(){return zg.logLevel}function Wg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(zg.logLevel<=qh.a.DEBUG){var r=e.map(Yg);zg.debug.apply(zg,Object(Pi.f)(["Firestore (8.3.1): "+t],r))}}function Kg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(zg.logLevel<=qh.a.ERROR){var r=e.map(Yg);zg.error.apply(zg,Object(Pi.f)(["Firestore (8.3.1): "+t],r))}}function $g(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(zg.logLevel<=qh.a.WARN){var r=e.map(Yg);zg.warn.apply(zg,Object(Pi.f)(["Firestore (8.3.1): "+t],r))}}function Yg(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(eT){return t}}function Xg(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw Kg(e),new Error(e)}function Zg(t,e){t||Xg()}function Jg(t,e){return t}function tm(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var em=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=tm(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function nm(t,e){return t<e?-1:t>e?1:0}function rm(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function im(t){return t+"\0"}function om(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sm(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function am(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function um(t){return null==t}function cm(t){return 0===t&&1/t==-1/0}function lm(t){return"number"==typeof t&&Number.isInteger(t)&&!cm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var hm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},dm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Pi.c)(e,t),e}(Error),fm=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Xg(),void 0===n?n=t.length-e:n>t.length-e&&Xg(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),pm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Pi.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new dm(hm.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(fm),gm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Pi.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return gm.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new dm(hm.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new dm(hm.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new dm(hm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new dm(hm.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(fm),ym=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(pm.fromString(e))},t.fromName=function(e){return new t(pm.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===pm.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return pm.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new pm(e.slice()))},t}(),vm=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return nm(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();vm.EMPTY_BYTE_STRING=new vm("");var bm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _m(t){if(Zg(!!t),"string"==typeof t){var e=0,n=bm.exec(t);if(Zg(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wm(t.seconds),nanos:wm(t.nanos)}}function wm(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Cm(t){return"string"==typeof t?vm.fromBase64String(t):vm.fromUint8Array(t)}var Em=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new dm(hm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new dm(hm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new dm(hm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dm(hm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?nm(this.nanoseconds,t.nanoseconds):nm(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function Om(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sm(t){var e=t.mapValue.fields.__previous_value__;return Om(e)?Sm(e):e}function Tm(t){var e=_m(t.mapValue.fields.__local_write_time__.timestampValue);return new Em(e.seconds,e.nanos)}function Im(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Om(t)?4:10:Xg()}function xm(t,e){var n=Im(t);if(n!==Im(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tm(t).isEqual(Tm(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=_m(t.timestampValue),r=_m(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Cm(t.bytesValue).isEqual(Cm(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return wm(t.geoPointValue.latitude)===wm(e.geoPointValue.latitude)&&wm(t.geoPointValue.longitude)===wm(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return wm(t.integerValue)===wm(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=wm(t.doubleValue),r=wm(e.doubleValue);return n===r?cm(n)===cm(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return rm(t.arrayValue.values||[],e.arrayValue.values||[],xm);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(om(n)!==om(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!xm(n[i],r[i])))return!1;return!0}(t,e);default:return Xg()}}function km(t,e){return void 0!==(t.values||[]).find(function(t){return xm(t,e)})}function Am(t,e){var n=Im(t),r=Im(e);if(n!==r)return nm(n,r);switch(n){case 0:return 0;case 1:return nm(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=wm(t.integerValue||t.doubleValue),r=wm(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return jm(t.timestampValue,e.timestampValue);case 4:return jm(Tm(t),Tm(e));case 5:return nm(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Cm(t),r=Cm(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=nm(n[i],r[i]);if(0!==o)return o}return nm(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=nm(wm(t.latitude),wm(e.latitude));return 0!==n?n:nm(wm(t.longitude),wm(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Am(n[i],r[i]);if(o)return o}return nm(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=nm(r[s],o[s]);if(0!==a)return a;var u=Am(n[r[s]],i[o[s]]);if(0!==u)return u}return nm(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Xg()}}function jm(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return nm(t,e);var n=_m(t),r=_m(e),i=nm(n.seconds,r.seconds);return 0!==i?i:nm(n.nanos,r.nanos)}function Pm(t){return Rm(t)}function Rm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=_m(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Cm(t.bytesValue).toBase64():"referenceValue"in t?ym.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Rm(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Rm(t.fields[o])}return e+"}"}(t.mapValue):Xg();var e}function Nm(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Dm(t){return!!t&&"integerValue"in t}function Lm(t){return!!t&&"arrayValue"in t}function Fm(t){return!!t&&"nullValue"in t}function Mm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Um(t){return!!t&&"mapValue"in t}var Vm=function(t,e){this.key=t,this.version=e},qm=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Pi.c)(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Vm),Bm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Pi.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Vm),Hm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Pi.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Vm),Qm=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function zm(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Qm(t,e,n,r,i,o,s)}function Gm(t){var e=Jg(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Pm(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),um(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=oy(e.startAt)),e.endAt&&(n+="|ub:",n+=oy(e.endAt)),e.h=n}return e.h}function Wm(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ay(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!xm(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cy(t.startAt,e.startAt)&&cy(t.endAt,e.endAt)}function Km(t){return ym.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var $m=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Pi.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ym(t,n,r):"array-contains"===n?new ty(t,r):"in"===n?new ey(t,r):"not-in"===n?new ny(t,r):"array-contains-any"===n?new ry(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Xm(t,n):new Zm(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(Am(e,this.value)):null!==e&&Im(this.value)===Im(e)&&this.m(Am(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Xg()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Ym=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ym.fromName(r.referenceValue),i}return Object(Pi.c)(e,t),e.prototype.matches=function(t){var e=ym.comparator(t.key,this.key);return this.m(e)},e}($m),Xm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Jm(0,n),r}return Object(Pi.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}($m),Zm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Jm(0,n),r}return Object(Pi.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}($m);function Jm(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return ym.fromName(t.referenceValue)})}var ty=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Pi.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Lm(e)&&km(e.arrayValue,this.value)},e}($m),ey=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Pi.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&km(this.value.arrayValue,e)},e}($m),ny=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Pi.c)(e,t),e.prototype.matches=function(t){if(km(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!km(this.value.arrayValue,e)},e}($m),ry=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Pi.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Lm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return km(e.value.arrayValue,t)})},e}($m),iy=function(t,e){this.position=t,this.before=e};function oy(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Pm(t)}).join(",")}var sy=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ay(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function uy(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ym.comparator(ym.fromName(s.referenceValue),n.key):Am(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function cy(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!xm(t.position[n],e.position[n]))return!1;return!0}var ly=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function hy(t,e,n,r,i,o,s,a){return new ly(t,e,n,r,i,o,s,a)}function dy(t){return new ly(t)}function fy(t){return!um(t.limit)&&"F"===t.limitType}function py(t){return!um(t.limit)&&"L"===t.limitType}function gy(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function my(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function yy(t){return null!==t.collectionGroup}function vy(t){var e=Jg(t);if(null===e.p){e.p=[];var n=my(e),r=gy(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new sy(n)),e.p.push(new sy(mm.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new sy(mm.keyField(),u))}}}return e.p}function by(t){var e=Jg(t);if(!e.T)if("F"===e.limitType)e.T=zm(e.path,e.collectionGroup,vy(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=vy(e);r<i.length;r++){var o=i[r];n.push(new sy(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new iy(e.endAt.position,!e.endAt.before):null,a=e.startAt?new iy(e.startAt.position,!e.startAt.before):null;e.T=zm(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function _y(t,e,n){return new ly(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wy(t,e){return Wm(by(t),by(e))&&t.limitType===e.limitType}function Cy(t){return Gm(by(t))+"|lt:"+t.limitType}function Ey(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Pm(e.value);var e}).join(", ")+"]"),um(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+oy(t.startAt)),t.endAt&&(e+=", endAt: "+oy(t.endAt)),"Target("+e+")"}(by(t))+"; limitType="+t.limitType+")"}function Oy(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ym.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!uy(t.startAt,vy(t),e)||t.endAt&&uy(t.endAt,vy(t),e))}(t,e)}function Sy(t){return function(e,n){for(var r=!1,i=0,o=vy(t);i<o.length;i++){var s=o[i],a=Ty(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Ty(t,e,n){var r=t.field.isKeyField()?ym.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Am(r,i):Xg()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Xg()}}var Iy=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Em(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),xy=function(){function t(t){this.fields=t,t.sort(mm.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return rm(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),ky=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Um(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return xm(this.proto,t.proto)},t}(),Ay=function(){function t(t){void 0===t&&(t=ky.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Im(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(mm.emptyPath(),this.A);return null!=t?new ky(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=Um(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.P(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function jy(t){var e=[];return sm(t.fields||{},function(t,n){var r=new mm([t]);if(Um(n)){var i=jy(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new xy(e)}function Py(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cm(e)?"-0":e}}function Ry(t){return{integerValue:""+t}}function Ny(t,e){return lm(e)?Ry(e):Py(t,e)}var Dy=function(){this._=void 0};function Ly(t,e,n){return t instanceof Uy?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Vy?qy(t,e):t instanceof By?Hy(t,e):function(t,e){var n=My(t,e),r=zy(n)+zy(t.S);return Dm(n)&&Dm(t.S)?Ry(r):Py(t.D,r)}(t,e)}function Fy(t,e,n){return t instanceof Vy?qy(t,e):t instanceof By?Hy(t,e):n}function My(t,e){return t instanceof Qy?Dm(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Uy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Pi.c)(e,t),e}(Dy),Vy=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Pi.c)(e,t),e}(Dy);function qy(t,e){for(var n=Gy(e),r=function(t){n.some(function(e){return xm(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var By=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Pi.c)(e,t),e}(Dy);function Hy(t,e){for(var n=Gy(e),r=function(t){n=n.filter(function(e){return!xm(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Qy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Object(Pi.c)(e,t),e}(Dy);function zy(t){return wm(t.integerValue||t.doubleValue)}function Gy(t){return Lm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Wy=function(t,e){this.field=t,this.transform=e},Ky=function(t,e){this.version=t,this.transformResults=e},$y=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Yy(t,e){return void 0!==t.updateTime?e instanceof qm&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof qm}var Xy=function(){};function Zy(t,e,n){return t instanceof rv?function(t,e,n){var r=t.value,i=sv(t.fieldTransforms,e,n.transformResults);return r=uv(t.fieldTransforms,r,i),new qm(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof iv?function(t,e,n){if(!Yy(t.precondition,e))return new Hm(t.key,n.version);var r=ov(t,e,sv(t.fieldTransforms,e,n.transformResults));return new qm(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Bm(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Jy(t,e,n){return t instanceof rv?function(t,e,n){if(!Yy(t.precondition,e))return e;var r=t.value,i=av(t.fieldTransforms,n,e);r=uv(t.fieldTransforms,r,i);var o=nv(e);return new qm(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof iv?function(t,e,n){if(!Yy(t.precondition,e))return e;var r=nv(e),i=ov(t,e,av(t.fieldTransforms,n,e));return new qm(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return Yy(t.precondition,e)?new Bm(t.key,Iy.min()):e}(t,e)}function tv(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof qm?e.field(o.field):void 0,a=My(o.transform,s||null);null!=a&&(n=null==n?(new Ay).set(o.field,a):n.set(o.field,a))}return n?n.v():null}(t.fieldTransforms,e)}function ev(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&rm(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Vy&&e instanceof Vy||t instanceof By&&e instanceof By?rm(t.elements,e.elements,xm):t instanceof Qy&&e instanceof Qy?xm(t.S,e.S):t instanceof Uy&&e instanceof Uy}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function nv(t){return t instanceof qm?t.version:Iy.min()}var rv=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Pi.c)(e,t),e}(Xy),iv=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Pi.c)(e,t),e}(Xy);function ov(t,e,n){var r;return r=function(t,e){var n=new Ay(e);return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.v()}(t,r=e instanceof qm?e.data():ky.empty()),uv(t.fieldTransforms,r,n)}function sv(t,e,n){var r=[];Zg(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof qm&&(a=e.field(o.field)),r.push(Fy(s,a,n[i]))}return r}function av(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof qm&&(u=n.field(s.field)),r.push(Ly(a,u,e))}return r}function uv(t,e,n){for(var r=new Ay(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var cv,lv,hv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Pi.c)(e,t),e}(Xy),dv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Pi.c)(e,t),e}(Xy),fv=function(t){this.count=t};function pv(t){switch(t){case hm.OK:return Xg();case hm.CANCELLED:case hm.UNKNOWN:case hm.DEADLINE_EXCEEDED:case hm.RESOURCE_EXHAUSTED:case hm.INTERNAL:case hm.UNAVAILABLE:case hm.UNAUTHENTICATED:return!1;case hm.INVALID_ARGUMENT:case hm.NOT_FOUND:case hm.ALREADY_EXISTS:case hm.PERMISSION_DENIED:case hm.FAILED_PRECONDITION:case hm.ABORTED:case hm.OUT_OF_RANGE:case hm.UNIMPLEMENTED:case hm.DATA_LOSS:return!0;default:return Xg()}}function gv(t){if(void 0===t)return Kg("GRPC error has no .code"),hm.UNKNOWN;switch(t){case cv.OK:return hm.OK;case cv.CANCELLED:return hm.CANCELLED;case cv.UNKNOWN:return hm.UNKNOWN;case cv.DEADLINE_EXCEEDED:return hm.DEADLINE_EXCEEDED;case cv.RESOURCE_EXHAUSTED:return hm.RESOURCE_EXHAUSTED;case cv.INTERNAL:return hm.INTERNAL;case cv.UNAVAILABLE:return hm.UNAVAILABLE;case cv.UNAUTHENTICATED:return hm.UNAUTHENTICATED;case cv.INVALID_ARGUMENT:return hm.INVALID_ARGUMENT;case cv.NOT_FOUND:return hm.NOT_FOUND;case cv.ALREADY_EXISTS:return hm.ALREADY_EXISTS;case cv.PERMISSION_DENIED:return hm.PERMISSION_DENIED;case cv.FAILED_PRECONDITION:return hm.FAILED_PRECONDITION;case cv.ABORTED:return hm.ABORTED;case cv.OUT_OF_RANGE:return hm.OUT_OF_RANGE;case cv.UNIMPLEMENTED:return hm.UNIMPLEMENTED;case cv.DATA_LOSS:return hm.DATA_LOSS;default:return Xg()}}(lv=cv||(cv={}))[lv.OK=0]="OK",lv[lv.CANCELLED=1]="CANCELLED",lv[lv.UNKNOWN=2]="UNKNOWN",lv[lv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lv[lv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lv[lv.NOT_FOUND=5]="NOT_FOUND",lv[lv.ALREADY_EXISTS=6]="ALREADY_EXISTS",lv[lv.PERMISSION_DENIED=7]="PERMISSION_DENIED",lv[lv.UNAUTHENTICATED=16]="UNAUTHENTICATED",lv[lv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lv[lv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lv[lv.ABORTED=10]="ABORTED",lv[lv.OUT_OF_RANGE=11]="OUT_OF_RANGE",lv[lv.UNIMPLEMENTED=12]="UNIMPLEMENTED",lv[lv.INTERNAL=13]="INTERNAL",lv[lv.UNAVAILABLE=14]="UNAVAILABLE",lv[lv.DATA_LOSS=15]="DATA_LOSS";var mv=function(){function t(t,e){this.comparator=t,this.root=e||vv.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vv.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vv.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new yv(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new yv(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new yv(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new yv(this.root,t,this.comparator,!0)},t}(),yv=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),vv=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Xg();if(this.right.isRed())throw Xg();var t=this.left.check();if(t!==this.right.check())throw Xg();return t+(this.isRed()?0:1)},t}();vv.EMPTY=null,vv.RED=!0,vv.BLACK=!1,vv.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Xg()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Xg()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Xg()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Xg()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Xg()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new vv(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var bv=function(){function t(t){this.comparator=t,this.data=new mv(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new _v(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new _v(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),_v=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),wv=new mv(ym.comparator);function Cv(){return wv}function Ev(){return Cv()}var Ov=new mv(ym.comparator);function Sv(){return Ov}var Tv=new mv(ym.comparator);function Iv(){return Tv}var xv=new bv(ym.comparator);function kv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=xv,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Av=new bv(nm);function jv(){return Av}var Pv=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Rv.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Iy.min(),r,jv(),Cv(),kv())},t}(),Rv=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(vm.EMPTY_BYTE_STRING,n,kv(),kv(),kv())},t}(),Nv=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},Dv=function(t,e){this.targetId=t,this.$=e},Lv=function(t,e,n,r){void 0===n&&(n=vm.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Fv=function(){function t(){this.F=0,this.O=Vv(),this.k=vm.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=kv(),e=kv(),n=kv();return this.O.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Xg()}}),new Rv(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=Vv()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),Mv=function(){function t(t){this.X=t,this.Z=new Map,this.tt=Cv(),this.et=Uv(),this.nt=new bv(nm)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof qm?this.it(r,t.N):t.N instanceof Bm&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:Xg()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach(function(t,r){n.at(r)&&e(r)})},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(Km(i))if(0===n){var o=new ym(i.path);this.rt(e,o,new Bm(o,Iy.min()))}else Zg(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach(function(r,i){var o=e.lt(i);if(o){if(r.current&&Km(o.target)){var s=new ym(o.target.path);null!==e.tt.get(s)||e.wt(i,s)||e.rt(i,s,new Bm(s,t))}r.q&&(n.set(i,r.K()),r.W())}});var r=kv();this.et.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Pv(t,n,this.nt,this.tt,r);return this.tt=Cv(),this.et=Uv(),this.nt=new bv(nm),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new Fv,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new bv(nm),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||Wg("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new Fv),this.X.getRemoteKeysForTarget(t).forEach(function(n){e.rt(t,n,null)})},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function Uv(){return new mv(ym.comparator)}function Vv(){return new mv(ym.comparator)}var qv={asc:"ASCENDING",desc:"DESCENDING"},Bv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hv=function(t,e){this.databaseId=t,this.V=e};function Qv(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function zv(t,e){return t.V?e.toBase64():e.toUint8Array()}function Gv(t,e){return Qv(t,e.toTimestamp())}function Wv(t){return Zg(!!t),Iy.fromTimestamp(function(t){var e=_m(t);return new Em(e.seconds,e.nanos)}(t))}function Kv(t,e){return function(t){return new pm(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function $v(t){var e=pm.fromString(t);return Zg(bb(e)),e}function Yv(t,e){return Kv(t.databaseId,e.path)}function Xv(t,e){var n=$v(e);if(n.get(1)!==t.databaseId.projectId)throw new dm(hm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new dm(hm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ym(eb(n))}function Zv(t,e){return Kv(t.databaseId,e)}function Jv(t){var e=$v(t);return 4===e.length?pm.emptyPath():eb(e)}function tb(t){return new pm(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eb(t){return Zg(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function nb(t,e,n){return{name:Yv(t,e),fields:n.proto.mapValue.fields}}function rb(t,e,n){var r=Xv(t,e.name),i=Wv(e.updateTime),o=new ky({mapValue:{fields:e.fields}});return new qm(r,i,o,{hasCommittedMutations:!!n})}function ib(t,e){var n;if(e instanceof rv)n={update:nb(t,e.key,e.value)};else if(e instanceof hv)n={delete:Yv(t,e.key)};else if(e instanceof iv)n={update:nb(t,e.key,e.data),updateMask:vb(e.fieldMask)};else{if(!(e instanceof dv))return Xg();n={verify:Yv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Uy)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Vy)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof By)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qy)return{fieldPath:e.field.canonicalString(),increment:n.S};throw Xg()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Gv(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Xg()}(t,e.precondition)),n}function ob(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?$y.updateTime(Wv(t.updateTime)):void 0!==t.exists?$y.exists(t.exists):$y.none()}(e.currentDocument):$y.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Zg("REQUEST_TIME"===e.setToServerValue),n=new Uy):"appendMissingElements"in e?n=new Vy(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new By(e.removeAllFromArray.values||[]):"increment"in e?n=new Qy(t,e.increment):Xg();var r=mm.fromServerFormat(e.fieldPath);return new Wy(r,n)}(t,e)}):[];if(e.update){var i=Xv(t,e.update.name),o=new ky({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new xy((t.fieldPaths||[]).map(function(t){return mm.fromServerFormat(t)}))}(e.updateMask);return new iv(i,o,s,n,r)}return new rv(i,o,n,r)}if(e.delete){var a=Xv(t,e.delete);return new hv(a,n)}if(e.verify){var u=Xv(t,e.verify);return new dv(u,n)}return Xg()}function sb(t,e){return{documents:[Zv(t,e.path)]}}function ab(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Zv(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Zv(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Mm(t.value))return{unaryFilter:{field:pb(t.field),op:"IS_NAN"}};if(Fm(t.value))return{unaryFilter:{field:pb(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Mm(t.value))return{unaryFilter:{field:pb(t.field),op:"IS_NOT_NAN"}};if(Fm(t.value))return{unaryFilter:{field:pb(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pb(t.field),op:fb(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:pb(t.field),direction:db(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.V||um(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=lb(e.startAt)),e.endAt&&(n.structuredQuery.endAt=lb(e.endAt)),n}function ub(t){var e=Jv(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Zg(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=cb(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new sy(gb(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return um(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=hb(n.startAt));var l=null;return n.endAt&&(l=hb(n.endAt)),hy(e,i,a,s,u,"F",c,l)}function cb(t){return t?void 0!==t.unaryFilter?[yb(t)]:void 0!==t.fieldFilter?[mb(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return cb(t)}).reduce(function(t,e){return t.concat(e)}):Xg():[]}function lb(t){return{before:t.before,values:t.position}}function hb(t){return new iy(t.values||[],!!t.before)}function db(t){return qv[t]}function fb(t){return Bv[t]}function pb(t){return{fieldPath:t.canonicalString()}}function gb(t){return mm.fromServerFormat(t.fieldPath)}function mb(t){return $m.create(gb(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Xg()}}(t.fieldFilter.op),t.fieldFilter.value)}function yb(t){switch(t.unaryFilter.op){case"IS_NAN":var e=gb(t.unaryFilter.field);return $m.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=gb(t.unaryFilter.field);return $m.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=gb(t.unaryFilter.field);return $m.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=gb(t.unaryFilter.field);return $m.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Xg()}}function vb(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function bb(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function _b(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Cb(e)),e=wb(t.get(n),e);return Cb(e)}function wb(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Cb(t){return t+"\x01\x01"}function Eb(t){var e=t.length;if(Zg(e>=2),2===e)return Zg("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),pm.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Xg(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Xg()}o=s+2}return new pm(r)}var Ob=function(t,e){this.seconds=t,this.nanoseconds=e},Sb=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Sb.store="owner",Sb.key="owner";var Tb=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Tb.store="mutationQueues",Tb.keyPath="userId";var Ib=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ib.store="mutations",Ib.keyPath="batchId",Ib.userMutationsIndex="userMutationsIndex",Ib.userMutationsKeyPath=["userId","batchId"];var xb=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,_b(e)]},t.key=function(t,e,n){return[t,_b(e),n]},t}();xb.store="documentMutations",xb.PLACEHOLDER=new xb;var kb=function(t,e){this.path=t,this.readTime=e},Ab=function(t,e){this.path=t,this.version=e},jb=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};jb.store="remoteDocuments",jb.readTimeIndex="readTimeIndex",jb.readTimeIndexPath="readTime",jb.collectionReadTimeIndex="collectionReadTimeIndex",jb.collectionReadTimeIndexPath=["parentPath","readTime"];var Pb=function(t){this.byteSize=t};Pb.store="remoteDocumentGlobal",Pb.key="remoteDocumentGlobalKey";var Rb=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Rb.store="targets",Rb.keyPath="targetId",Rb.queryTargetsIndexName="queryTargetsIndex",Rb.queryTargetsKeyPath=["canonicalId","targetId"];var Nb=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Nb.store="targetDocuments",Nb.keyPath=["targetId","path"],Nb.documentTargetsIndex="documentTargetsIndex",Nb.documentTargetsKeyPath=["path","targetId"];var Db=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Db.key="targetGlobalKey",Db.store="targetGlobal";var Lb=function(t,e){this.collectionId=t,this.parent=e};Lb.store="collectionParents",Lb.keyPath=["collectionId","parent"];var Fb=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Fb.store="clientMetadata",Fb.keyPath="clientId";var Mb=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Mb.store="bundles",Mb.keyPath="bundleId";var Ub=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ub.store="namedQueries",Ub.keyPath="name";var Vb=Object(Pi.f)(Object(Pi.f)([],Object(Pi.f)(Object(Pi.f)([],Object(Pi.f)(Object(Pi.f)([],Object(Pi.f)(Object(Pi.f)([],[Tb.store,Ib.store,xb.store,jb.store,Rb.store,Sb.store,Db.store,Nb.store]),[Fb.store])),[Pb.store])),[Lb.store])),[Mb.store,Ub.store]),qb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Bb=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Hb=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Qb=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Xg(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),zb=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new Hb,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new Kb(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=Jb(e.target.error);n.gt.reject(new Kb(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Kb(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(Wg("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Yb(e)},t}(),Gb=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(Ri.n)())&&Kg("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Wg("SimpleDb","Removing database:",t),Xb(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(Ri.n)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Object(Pi.b)(this,void 0,void 0,function(){var e,n=this;return Object(Pi.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Wg("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Kb(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new dm(hm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Kb(t,n))},i.onupgradeneeded=function(t){Wg("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Wg("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}})})},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Pi.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Pi.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Pi.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Vt(t)];case 2:return a.db=h.sent(),e=zb.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Qb.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.Et];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Wg("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Wb=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return Xb(this.xt.delete())},t}(),Kb=function(t){function e(e,n){var r=this;return(r=t.call(this,hm.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Pi.c)(e,t),e}(dm);function $b(t){return"IndexedDbTransactionError"===t.name}var Yb=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Wg("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Wg("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Xb(n)},t.prototype.add=function(t){return Wg("SimpleDb","ADD",this.store.name,t,t),Xb(this.store.add(t))},t.prototype.get=function(t){var e=this;return Xb(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Wg("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Wg("SimpleDb","DELETE",this.store.name,t),Xb(this.store.delete(t))},t.prototype.count=function(){return Wg("SimpleDb","COUNT",this.store.name),Xb(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Lt=function(t,e){Wg("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,function(t,e,n){return n.delete()})},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new Qb(function(n,r){e.onerror=function(t){var e=Jb(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Mt=function(t,e){var n=[];return new Qb(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Wb(i),s=e(i.primaryKey,i.value,o);if(s instanceof Qb){var a=s.catch(function(t){return o.done(),Qb.reject(t)});n.push(a)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return Qb.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Xb(t){return new Qb(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Jb(t.target.error);n(e)}})}var Zb=!1;function Jb(t){var e=Gb.It(Object(Ri.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new dm("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Zb||(Zb=!0,setTimeout(function(){throw r},0)),r}}return t}var t_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Object(Pi.c)(e,t),e}(Bb);function e_(t,e){var n=Jg(t);return Gb.Pt(n.Qt,e)}var n_=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Zy(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Jy(s,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Jy(s,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},kv())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&rm(this.mutations,t.mutations,function(t,e){return ev(t,e)})&&rm(this.baseMutations,t.baseMutations,function(t,e){return ev(t,e)})},t}(),r_=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Zg(e.mutations.length===r.length);for(var i=Iv(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),i_=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Iy.min()),void 0===o&&(o=Iy.min()),void 0===s&&(s=vm.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),o_=function(t){this.Kt=t};function s_(t,e){if(e.document)return rb(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ym.fromSegments(e.noDocument.path),r=h_(e.noDocument.readTime);return new Bm(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ym.fromSegments(e.unknownDocument.path);return r=h_(e.unknownDocument.version),new Hm(i,r)}return Xg()}function a_(t,e,n){var r=u_(n),i=e.key.path.popLast().toArray();if(e instanceof qm){var o=function(t,e){return{name:Yv(t,e.key),fields:e.toProto().mapValue.fields,updateTime:Qv(t,e.version.toTimestamp())}}(t.Kt,e),s=e.hasCommittedMutations;return new jb(null,null,o,s,r,i)}if(e instanceof Bm){var a=e.key.path.toArray(),u=l_(e.version);return s=e.hasCommittedMutations,new jb(null,new kb(a,u),null,s,r,i)}if(e instanceof Hm){var c=e.key.path.toArray(),l=l_(e.version);return new jb(new Ab(c,l),null,null,!0,r,i)}return Xg()}function u_(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function c_(t){var e=new Em(t[0],t[1]);return Iy.fromTimestamp(e)}function l_(t){var e=t.toTimestamp();return new Ob(e.seconds,e.nanoseconds)}function h_(t){var e=new Em(t.seconds,t.nanoseconds);return Iy.fromTimestamp(e)}function d_(t,e){for(var n=(e.baseMutations||[]).map(function(e){return ob(t.Kt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return ob(t.Kt,e)}),o=Em.fromMillis(e.localWriteTimeMs);return new n_(e.batchId,o,n,i)}function f_(t){var e,n,r=h_(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?h_(t.lastLimboFreeSnapshotVersion):Iy.min();return void 0!==t.query.documents?(Zg(1===(n=t.query).documents.length),e=by(dy(Jv(n.documents[0])))):e=function(t){return by(ub(t))}(t.query),new i_(e,t.targetId,0,t.lastListenSequenceNumber,r,i,vm.fromBase64String(t.resumeToken))}function p_(t,e){var n,r=l_(e.snapshotVersion),i=l_(e.lastLimboFreeSnapshotVersion);n=Km(e.target)?sb(t.Kt,e.target):ab(t.Kt,e.target);var o=e.resumeToken.toBase64();return new Rb(e.targetId,Gm(e.target),r,o,e.sequenceNumber,i,n)}function g_(t){var e=ub({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?_y(e,e.limit,"L"):e}var m_=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return y_(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:h_(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return y_(t).put({bundleId:(n=e).id,createTime:l_(Wv(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return v_(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:g_(e.bundledQuery),readTime:h_(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return v_(t).put(function(t){return{name:t.name,readTime:l_(Wv(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function y_(t){return e_(t,Mb.store)}function v_(t){return e_(t,Ub.store)}var b_=function(){function t(){this.Wt=new __}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),Qb.resolve()},t.prototype.getCollectionParents=function(t,e){return Qb.resolve(this.Wt.getEntries(e))},t}(),__=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new bv(pm.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new bv(pm.comparator)).toArray()},t}(),w_=function(){function t(){this.jt=new __}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});var o={collectionId:r,parent:_b(i)};return C_(t).put(o)}return Qb.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[im(e),""],!1,!0);return C_(t).kt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Eb(o.parent))}return n})},t}();function C_(t){return e_(t,Lb.store)}var E_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O_=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function S_(t,e,n){var r=t.store(Ib.store),i=t.store(xb.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.qt({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Zg(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=xb.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Qb.waitFor(o).next(function(){return c})}function T_(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Xg();e=t.noDocument}return JSON.stringify(e).length}O_.DEFAULT_COLLECTION_PERCENTILE=10,O_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,O_.DEFAULT=new O_(41943040,O_.DEFAULT_COLLECTION_PERCENTILE,O_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),O_.DISABLED=new O_(-1,0,0);var I_=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return Zg(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return k_(t).qt({index:Ib.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=A_(t),s=k_(t);return s.add({}).next(function(a){Zg("number"==typeof a);for(var u=new n_(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return ib(t.Kt,e)}),i=n.mutations.map(function(e){return ib(t.Kt,e)});return new Ib(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new bv(function(t,e){return nm(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=xb.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,xb.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.zt[a]=u.keys()}),Qb.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return k_(t).get(e).next(function(t){return t?(Zg(t.userId===n.userId),d_(n.D,t)):null})},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?Qb.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return k_(t).qt({index:Ib.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Zg(e.batchId>=r),o=d_(n.D,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return k_(t).qt({index:Ib.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return k_(t).kt(Ib.userMutationsIndex,n).next(function(t){return t.map(function(t){return d_(e.D,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=xb.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return A_(t).qt({range:i},function(r,i,s){var a=r[0],u=r[2],c=Eb(r[1]);if(a===n.userId&&e.path.isEqual(c))return k_(t).get(u).next(function(t){if(!t)throw Xg();Zg(t.userId===n.userId),o.push(d_(n.D,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new bv(nm),i=[];return e.forEach(function(e){var o=xb.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=A_(t).qt({range:s},function(t,i,o){var s=t[0],a=t[2],u=Eb(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Qb.waitFor(i).next(function(){return n.Yt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=xb.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new bv(nm);return A_(t).qt({range:s},function(t,e,o){var s=t[0],u=t[2],c=Eb(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Yt(t,a)})},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(k_(t).get(e).next(function(t){if(null===t)throw Xg();Zg(t.userId===n.userId),r.push(d_(n.D,t))}))}),Qb.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return S_(t.Qt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Xt(e.batchId)}),Qb.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Qb.resolve();var r=IDBKeyRange.lowerBound(xb.prefixForUser(e.userId)),i=[];return A_(t).qt({range:r},function(t,n,r){if(t[0]===e.userId){var o=Eb(t[1]);i.push(o)}else r.done()}).next(function(){Zg(0===i.length)})})},t.prototype.containsKey=function(t,e){return x_(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return j_(t).get(this.userId).next(function(t){return t||new Tb(e.userId,-1,"")})},t}();function x_(t,e,n){var r=xb.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return A_(t).qt({range:o,Bt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function k_(t){return e_(t,Ib.store)}function A_(t){return e_(t,xb.store)}function j_(t){return e_(t,Tb.store)}var P_=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),R_=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next(function(n){var r=new P_(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return Iy.fromTimestamp(new Em(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next(function(){return n.se(t).next(function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return N_(t).delete(e.targetId)}).next(function(){return n.se(t)}).next(function(e){return Zg(e.targetCount>0),e.targetCount-=1,n.ie(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return N_(t).qt(function(s,a){var u=f_(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Qb.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return N_(t).qt(function(t,n){var r=f_(n);e(r)})},t.prototype.se=function(t){return D_(t).get(Db.key).next(function(t){return Zg(null!==t),t})},t.prototype.ie=function(t,e){return D_(t).put(Db.key,e)},t.prototype.re=function(t,e){return N_(t).put(p_(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Gm(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return N_(t).qt({range:r,index:Rb.queryTargetsIndexName},function(t,n,r){var o=f_(n);Wm(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=L_(t);return e.forEach(function(e){var s=_b(e.path);i.push(o.put(new Nb(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Qb.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=L_(t);return Qb.forEach(e,function(e){var o=_b(e.path);return Qb.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=L_(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=L_(t),i=kv();return r.qt({range:n,Bt:!0},function(t,e,n){var r=Eb(t[1]),o=new ym(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=_b(e.path),r=IDBKeyRange.bound([n],[im(n)],!1,!0),i=0;return L_(t).qt({index:Nb.documentTargetsIndex,Bt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.yt=function(t,e){return N_(t).get(e).next(function(t){return t?f_(t):null})},t}();function N_(t){return e_(t,Rb.store)}function D_(t){return e_(t,Db.store)}function L_(t){return e_(t,Nb.store)}function F_(t){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(e){if(t.code!==hm.FAILED_PRECONDITION||t.message!==qb)throw t;return Wg("LocalStore","Unexpectedly lost primary lease"),[2]})})}function M_(t,e){var n=t[1],r=e[1],i=nm(t[0],e[0]);return 0===i?nm(n,r):i}var U_=function(){function t(t){this.ce=t,this.buffer=new bv(M_),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();M_(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),V_=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;Wg("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Pi.b)(e,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return $b(e=n.sent())?(Wg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,F_(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}})})})},t}(),q_=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Qb.resolve(Qg.o);var r=new U_(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Wg("LruGarbageCollector","Garbage collection skipped; disabled"),Qb.resolve(E_)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Wg("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),E_):n.ye(t,e)})},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Wg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Gg()<=qh.a.DEBUG&&Wg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Qb.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),B_=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new q_(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return H_(t,n)},t.prototype.removeReference=function(t,e,n){return H_(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return H_(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return j_(t).Ut(function(r){return x_(t,r,e).next(function(t){return t&&(n=!0),Qb.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,function(s,a){if(a<=e){var u=n.Ee(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),L_(t).delete([0,_b(s.path)])})});i.push(u)}}).next(function(){return Qb.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return H_(t,e)},t.prototype.pe=function(t,e){var n,r=L_(t),i=Qg.o;return r.qt({index:Nb.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Qg.o&&e(new ym(Eb(n)),i),i=s,n=o):i=Qg.o}).next(function(){i!==Qg.o&&e(new ym(Eb(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function H_(t,e){return L_(t).put(function(t,e){return new Nb(0,_b(t.path),e)}(e,t.currentSequenceNumber))}var Q_=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){sm(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return am(this.inner)},t}(),z_=function(){function t(){this.changes=new Q_(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Iy.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Qb.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),G_=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return $_(t).put(Y_(e),n)},t.prototype.removeEntry=function(t,e){var n=$_(t),r=Y_(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Te(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return $_(t).get(Y_(e)).next(function(t){return n.Ie(t)})},t.prototype.Ae=function(t,e){var n=this;return $_(t).get(Y_(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:T_(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Ev();return this.Re(t,e,function(t,e){var i=n.Ie(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.be=function(t,e){var n=this,r=Ev(),i=new mv(ym.comparator);return this.Re(t,e,function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,T_(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{ve:r,Pe:i}})},t.prototype.Re=function(t,e,n){if(e.isEmpty())return Qb.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return $_(t).qt({range:r},function(t,e,r){for(var s=ym.fromSegments(t);o&&ym.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Sv(),o=e.path.length+1,s={};if(n.isEqual(Iy.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=u_(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=jb.collectionReadTimeIndex}return $_(t).qt(s,function(t,n,s){if(t.length===o){var a=s_(r.D,n);e.path.isPrefixOf(a.key.path)?a instanceof qm&&Oy(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new W_(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return K_(t).get(Pb.key).next(function(t){return Zg(!!t),t})},t.prototype.Te=function(t,e){return K_(t).put(Pb.key,e)},t.prototype.Ie=function(t){if(t){var e=s_(this.D,t);return e instanceof Bm&&e.version.isEqual(Iy.min())?null:e}return null},t}(),W_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new Q_(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Pi.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new bv(function(t,e){return nm(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Se.get(o);if(s.maybeDocument){var u=a_(e.Ve.D,s.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=T_(u);r+=c-a,n.push(e.Ve.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=a_(e.Ve.D,new Bm(o,Iy.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))}),n.push(this.Ve.updateMetadata(t,r)),Qb.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},e}(z_);function K_(t){return e_(t,Pb.store)}function $_(t){return e_(t,jb.store)}function Y_(t){return t.path.toArray()}var X_=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;Zg(n<r&&n>=0&&r<=11);var o=new zb("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Sb.store)}(t),function(t){t.createObjectStore(Tb.store,{keyPath:Tb.keyPath}),t.createObjectStore(Ib.store,{keyPath:Ib.keyPath,autoIncrement:!0}).createIndex(Ib.userMutationsIndex,Ib.userMutationsKeyPath,{unique:!0}),t.createObjectStore(xb.store)}(t),Z_(t),function(t){t.createObjectStore(jb.store)}(t));var s=Qb.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Nb.store),t.deleteObjectStore(Rb.store),t.deleteObjectStore(Db.store)}(t),Z_(t)),s=s.next(function(){return function(t){var e=t.store(Db.store),n=new Db(0,0,Iy.min().toTimestamp(),0);return e.put(Db.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Ib.store).kt().next(function(n){t.deleteObjectStore(Ib.store),t.createObjectStore(Ib.store,{keyPath:Ib.keyPath,autoIncrement:!0}).createIndex(Ib.userMutationsIndex,Ib.userMutationsKeyPath,{unique:!0});var r=e.store(Ib.store),i=n.map(function(t){return r.put(t)});return Qb.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Fb.store,{keyPath:Fb.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.De(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Pb.store)}(t),i.Ce(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Ne(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(jb.store);e.createIndex(jb.readTimeIndex,jb.readTimeIndexPath,{unique:!1}),e.createIndex(jb.collectionReadTimeIndex,jb.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Mb.store,{keyPath:Mb.keyPath})}(t),function(t){t.createObjectStore(Ub.store,{keyPath:Ub.keyPath})}(t)})),s},t.prototype.Ce=function(t){var e=0;return t.store(jb.store).qt(function(t,n){e+=T_(n)}).next(function(){var n=new Pb(e);return t.store(Pb.store).put(Pb.key,n)})},t.prototype.De=function(t){var e=this,n=t.store(Tb.store),r=t.store(Ib.store);return n.kt().next(function(n){return Qb.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(Ib.userMutationsIndex,i).next(function(r){return Qb.forEach(r,function(r){Zg(r.userId===n.userId);var i=d_(e.D,r);return S_(t,n.userId,i).next(function(){})})})})})},t.prototype.xe=function(t){var e=t.store(Nb.store),n=t.store(jb.store);return t.store(Db.store).get(Db.key).next(function(t){var r=[];return n.qt(function(n,i){var o=new pm(n),s=function(t){return[0,_b(t)]}(o);r.push(e.get(s).next(function(n){return n?Qb.resolve():function(n){return e.put(new Nb(0,_b(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Qb.waitFor(r)})})},t.prototype.Ne=function(t,e){t.createObjectStore(Lb.store,{keyPath:Lb.keyPath});var n=e.store(Lb.store),r=new __,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:_b(i)})}};return e.store(jb.store).qt({Bt:!0},function(t,e){var n=new pm(t);return i(n.popLast())}).next(function(){return e.store(xb.store).qt({Bt:!0},function(t,e){var n=Eb(t[1]);return i(n.popLast())})})},t.prototype.$e=function(t){var e=this,n=t.store(Rb.store);return n.qt(function(t,r){var i=f_(r),o=p_(e.D,i);return n.put(o)})},t}();function Z_(t){t.createObjectStore(Nb.store,{keyPath:Nb.keyPath}).createIndex(Nb.documentTargetsIndex,Nb.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Rb.store,{keyPath:Rb.keyPath}).createIndex(Rb.queryTargetsIndexName,Rb.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Db.store)}var J_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",tw=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=s,this.document=a,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new dm(hm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new B_(this,i),this.We=n+"main",this.D=new o_(u),this.je=new Gb(this.We,11,new X_(this.D)),this.Ge=new R_(this.referenceDelegate,this.D),this.Gt=new w_,this.ze=function(t,e){return new G_(t,e)}(this.D,this.Gt),this.He=new m_,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&Kg("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new dm(hm.FAILED_PRECONDITION,J_);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Ge.getHighestSequenceNumber(e)})}).then(function(e){t.Me=new Qg(e,t.Oe)}).then(function(){t.Le=!0}).catch(function(e){return t.je&&t.je.close(),Promise.reject(e)})},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Object(Pi.b)(e,void 0,void 0,function(){return Object(Pi.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct(function(n){return Object(Pi.b)(e,void 0,void 0,function(){return Object(Pi.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return Object(Pi.b)(e,void 0,void 0,function(){return Object(Pi.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return nw(e).put(new Fb(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nn(e).next(function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable(function(){return t.Ke(!1)}))})}).next(function(){return t.sn(e)}).next(function(n){return t.isPrimary&&!n?t.rn(e).next(function(){return!1}):!!n&&t.on(e).next(function(){return!0})})}).catch(function(e){if($b(e))return Wg("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Wg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable(function(){return t.Ke(e)}),t.isPrimary=e})},t.prototype.nn=function(t){var e=this;return ew(t).get(Sb.key).next(function(t){return Qb.resolve(e.cn(t))})},t.prototype.an=function(t){return nw(t).delete(this.clientId)},t.prototype.un=function(){return Object(Pi.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Pi.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=e_(t,Fb.store);return e.kt().next(function(t){var n=r.ln(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Qb.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?Qb.resolve(!0):ew(t).get(Sb.key).next(function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new dm(hm.FAILED_PRECONDITION,J_);return!1}}return!(!e.networkEnabled||!e.inForeground)||nw(t).kt().next(function(t){return void 0===e.ln(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Wg("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Pi.b)(this,void 0,void 0,function(){var t=this;return Object(Pi.d)(this,function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[Sb.store,Fb.store],function(e){var n=new t_(e,Qg.o);return t.rn(n).next(function(){return t.an(n)})})];case 1:return e.sent(),this.je.close(),this.yn(),[2]}})})},t.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return nw(e).kt().next(function(e){return t.ln(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return I_.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Wg("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",Vb,function(o){return r=new t_(o,i.Me?i.Me.next():Qg.o),"readwrite-primary"===e?i.nn(r).next(function(t){return!!t||i.sn(r)}).next(function(e){if(!e)throw Kg("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new dm(hm.FAILED_PRECONDITION,qb);return n(r)}).next(function(t){return i.on(r).next(function(){return t})}):i.pn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.pn=function(t){var e=this;return ew(t).get(Sb.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new dm(hm.FAILED_PRECONDITION,J_)})},t.prototype.on=function(t){var e=new Sb(this.clientId,this.allowTabSynchronization,Date.now());return ew(t).put(Sb.key,e)},t.At=function(){return Gb.At()},t.prototype.rn=function(t){var e=this,n=ew(t);return n.get(Sb.key).next(function(t){return e.cn(t)?(Wg("IndexedDbPersistence","Releasing primary lease."),n.delete(Sb.key)):Qb.resolve()})},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Kg("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return Wg("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Kg("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){Kg("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ew(t){return e_(t,Sb.store)}function nw(t){return e_(t,Fb.store)}function rw(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var iw=function(t,e){this.progress=t,this.En=e},ow=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.An(t,e,r)})},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.Rn=function(t,e,n){var r=Ev();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next(function(e){return n.vn(t,e)})},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.Rn(t,e,r),o=Cv();return i.forEach(function(t,e){e||(e=new Bm(t,Iy.min())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ym.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):yy(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new ym(e)).next(function(t){var e=Sv();return t instanceof qm&&(e=e.insert(t.key,t)),e})},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=Sv();return this.Gt.getCollectionParents(t,i).next(function(s){return Qb.forEach(s,function(s){var a=function(t,e){return new ly(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sn(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Dn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=Jy(u,r.get(c),o.localWriteTime);r=l instanceof qm?r.insert(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Oy(e,n)||(r=r.remove(t))}),r})},t.prototype.Dn=function(t,e,n){for(var r=kv(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof iv&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof qm&&(c=c.insert(t,e))}),c})},t}(),sw=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=kv(),i=kv(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),aw=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Iy.min())?this.On(t,e):this.Fn.bn(t,r).next(function(o){var s=i.kn(e,o);return(fy(e)||py(e))&&i.Mn(e.limitType,s,r,n)?i.On(t,e):(Gg()<=qh.a.DEBUG&&Wg("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ey(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.kn=function(t,e){var n=new bv(Sy(t));return e.forEach(function(e,r){r instanceof qm&&Oy(t,r)&&(n=n.add(r))}),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return Gg()<=qh.a.DEBUG&&Wg("QueryEngine","Using full collection scan to execute query:",Ey(e)),this.Fn.getDocumentsMatchingQuery(t,e,Iy.min())},t}(),uw=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new mv(nm),this.qn=new Q_(function(t){return Gm(t)},Wm),this.Un=Iy.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new ow(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Bn)})},t}();function cw(t,e,n,r){return new uw(t,e,n,r)}function lw(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Pi.d)(this,function(s){switch(s.label){case 0:return n=Jg(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Tn.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new ow(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=kv(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.bn(t,s).next(function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}})})}function hw(t,e){var n=Jg(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Qb.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=e,s=n.docVersions.get(t);Zg(null!==s),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)})}),s.next(function(){return t.Tn.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}function dw(t){var e=Jg(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function fw(t,e){var n=Jg(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Zg(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.Ge.updateTargetData(t,c))}}});var a=Cv();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(pw(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Iy.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next(function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Qb.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Kn.vn(t,a)})}).then(function(t){return n.Bn=i,t})}function pw(t,e,n,r,i){var o=kv();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Cv();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Bm&&s.version.isEqual(Iy.min())?(e.removeEntry(n,u),o=o.insert(n,s)):null==a||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Wg("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function gw(t,e){var n=Jg(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)})}function mw(t,e){var n=Jg(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ge.getTargetData(t,e).next(function(i){return i?Qb.resolve(r=i):n.Ge.allocateTargetId(t).next(function(i){return r=new i_(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function yw(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Pi.d)(this,function(a){switch(a.label){case 0:r=Jg(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!$b(s=a.sent()))throw s;return Wg("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}})})}function vw(t,e,n){var r=Jg(t),i=Iy.min(),o=kv();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Jg(t),i=r.qn.get(n);return void 0!==i?Qb.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,by(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:Iy.min(),n?o:kv())}).next(function(t){return{documents:t,jn:o}})})}function bw(t,e){var n=Jg(t),r=Jg(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function _w(t){var e=Jg(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Jg(t),i=Cv(),o=u_(n),s=$_(e),a=IDBKeyRange.lowerBound(o,!0);return s.qt({index:jb.readTimeIndex,range:a},function(t,e){var n=s_(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:c_(o)}})}(e.Qn,t,e.Un)}).then(function(t){var n=t.En;return e.Un=t.readTime,n})}function ww(t){return Object(Pi.b)(this,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(n){return[2,(e=Jg(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=$_(t),n=Iy.min();return e.qt({index:jb.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=c_(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Un=t})]})})}function Cw(t,e,n,r){return Object(Pi.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(Pi.d)(this,function(p){switch(p.label){case 0:for(i=Jg(t),o=kv(),s=Cv(),a=Iv(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.zn(l)),a=a.insert(h,e.Hn(l.metadata.readTime));return d=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,mw(i,function(t){return by(dy(pm.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return pw(t,d,s,Iy.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.Ge.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.Ge.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Kn.vn(t,e)})})})]}})})}function Ew(t,e,n){return void 0===n&&(n=kv()),Object(Pi.b)(this,void 0,void 0,function(){var r,i;return Object(Pi.d)(this,function(o){switch(o.label){case 0:return[4,mw(t,by(g_(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Jg(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Wv(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var s=r.withResumeToken(vm.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(s.targetId,s),i.Ge.updateTargetData(t,s).next(function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.Ge.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.He.saveNamedQuery(t,e)})})]}})})}var Ow=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Qb.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:Wv(n.createTime)}),Qb.resolve()},t.prototype.getNamedQuery=function(t,e){return Qb.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:g_(t.bundledQuery),readTime:Wv(t.readTime)}}(e)),Qb.resolve()},t}(),Sw=function(){function t(){this.Xn=new bv(Tw.Zn),this.ts=new bv(Tw.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Tw(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.ss(new Tw(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.os=function(t){var e=this,n=new ym(new pm([])),r=new Tw(n,t),i=new Tw(n,t+1),o=[];return this.ts.forEachInRange([r,i],function(t){e.ss(t),o.push(t.key)}),o},t.prototype.cs=function(){var t=this;this.Xn.forEach(function(e){return t.ss(e)})},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new ym(new pm([])),n=new Tw(e,t),r=new Tw(e,t+1),i=kv();return this.ts.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Tw(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Tw=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return ym.comparator(t.key,e.key)||nm(t.hs,e.hs)},t.es=function(t,e){return nm(t.hs,e.hs)||ym.comparator(t.key,e.key)},t}(),Iw=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new bv(Tw.Zn)}return t.prototype.checkEmpty=function(t){return Qb.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new n_(i,e,n,r);this.Tn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.fs=this.fs.add(new Tw(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return Qb.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Qb.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return Qb.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Qb.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return Qb.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Tw(e,0),i=new Tw(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],function(t){var e=n.ds(t.hs);o.push(e)}),Qb.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new bv(nm);return e.forEach(function(t){var e=new Tw(t,0),i=new Tw(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],function(t){r=r.add(t.hs)})}),Qb.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ym.isDocumentKey(i)||(i=i.child(""));var o=new Tw(new ym(i),0),s=new bv(nm);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.hs)),!0)},o),Qb.resolve(this._s(s))},t.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.ds(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Zg(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return Qb.forEach(e.mutations,function(i){var o=new Tw(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.fs=r})},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new Tw(e,0),r=this.fs.firstAfterOrEqual(n);return Qb.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Qb.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),xw=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new mv(ym.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Qb.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ev();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),Qb.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Sv(),i=new ym(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof qm&&Oy(e,u)&&(r=r.insert(u.key,u))}return Qb.resolve(r)},t.prototype.ps=function(t,e){return Qb.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new kw(this)},t.prototype.getSize=function(t){return Qb.resolve(this.size)},t}(),kw=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Object(Pi.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)}),Qb.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(z_),Aw=function(){function t(t){this.persistence=t,this.Es=new Q_(function(t){return Gm(t)},Wm),this.lastRemoteSnapshotVersion=Iy.min(),this.highestTargetId=0,this.Ts=0,this.Is=new Sw,this.targetCount=0,this.As=P_.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach(function(t,n){return e(n)}),Qb.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Qb.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Qb.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),Qb.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),Qb.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new P_(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,Qb.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),Qb.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,Qb.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Es.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Qb.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Qb.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return Qb.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),Qb.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Qb.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),Qb.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return Qb.resolve(n)},t.prototype.containsKey=function(t,e){return Qb.resolve(this.Is.containsKey(e))},t}(),jw=function(){function t(t,e){var n=this;this.Rs={},this.Me=new Qg(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new Aw(this),this.Gt=new b_,this.ze=function(t,e){return new xw(t,function(t){return n.referenceDelegate.bs(t)})}(this.Gt),this.D=new o_(e),this.He=new Ow(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new Iw(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;Wg("MemoryPersistence","Starting transaction:",t);var i=new Pw(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Vs=function(t,e){return Qb.or(Object.values(this.Rs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Pw=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Pi.c)(e,t),e}(Bb),Rw=function(){function t(t){this.persistence=t,this.Ss=new Sw,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw Xg()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),Qb.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),Qb.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),Qb.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qb.forEach(this.xs,function(r){var i=ym.fromPath(r);return e.Ns(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Ds=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return Qb.or([function(){return Qb.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),Nw=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Dw(t,e){return"firestore_clients_"+t+"_"+e}function Lw(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Fw(t,e){return"firestore_targets_"+t+"_"+e}Nw.UNAUTHENTICATED=new Nw(null),Nw.GOOGLE_CREDENTIALS=new Nw("google-credentials-uid"),Nw.FIRST_PARTY=new Nw("first-party-uid");var Mw=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new dm(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Kg("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Uw=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new dm(i.error.code,i.error.message)),o?new t(e,i.state,r):(Kg("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Vw=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=jv(),s=0;i&&s<r.activeTargetIds.length;++s)i=lm(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Kg("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),qw=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Kg("SharedClientState","Failed to parse online state: "+e),null)},t}(),Bw=function(){function t(){this.activeTargetIds=jv()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Hw=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new mv(nm),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=Dw(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new Bw),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Pi.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Pi.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(Dw(this.persistenceKey,r)))&&(o=Vw.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Fw(this.persistenceKey,t));if(n){var r=Uw.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Fw(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Wg("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Wg("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Wg("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Wg("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Kg("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable(function(){return Object(Pi.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Pi.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(s=function(t){var e=Qg.o;if(null!=t)try{var n=JSON.parse(t);Zg("number"==typeof n),e=n}catch(t){Kg("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Qg.o&&this.sequenceNumberHandler(s);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new Mw(this.currentUser,t,e,n),i=Lw(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=Lw(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=Fw(this.persistenceKey,t),i=new Uw(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return Vw.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return Mw.$s(new Nw(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return Uw.$s(r,e)},t.prototype.Ys=function(t){return qw.$s(t)},t.prototype.hi=function(t){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(Wg("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=jv();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Qw=function(){function t(){this.yi=new Bw,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new Bw,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),zw=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),Gw=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){Wg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){Wg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ww={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Kw=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),$w=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Pi.c)(e,t),e.prototype.qi=function(t,e,n,r){return new Promise(function(i,o){var s=new Hg;s.listenOnce(Vg.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Ug.NO_ERROR:var e=s.getResponseJson();Wg("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ug.TIMEOUT:Wg("Connection",'RPC "'+t+'" timed out'),o(new dm(hm.DEADLINE_EXCEEDED,"Request time out"));break;case Ug.HTTP_ERROR:var n=s.getStatus();if(Wg("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(hm).indexOf(e)>=0?e:hm.UNKNOWN}(r.status);o(new dm(a,r.message))}else o(new dm(hm.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new dm(hm.UNAVAILABLE,"Connection failed."));break;default:Xg()}}finally{Wg("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Ng,i=Ff(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(Ri.u)()||Object(Ri.x)()||Object(Ri.r)()||Object(Ri.t)()||Object(Ri.y)()||Object(Ri.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Wg("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Kw({vi:function(t){c?Wg("Connection","Not sending because WebChannel is closed:",t):(u||(Wg("Connection","Opening WebChannel transport."),a.open(),u=!0),Wg("Connection","WebChannel sending:",t),a.send(t))},Pi:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Bg.EventType.OPEN,function(){c||Wg("Connection","WebChannel transport opened.")}),h(a,Bg.EventType.CLOSE,function(){c||(c=!0,Wg("Connection","WebChannel transport closed"),l.$i())}),h(a,Bg.EventType.ERROR,function(t){c||(c=!0,$g("Connection","WebChannel transport errored:",t),l.$i(new dm(hm.UNAVAILABLE,"The operation could not be completed")))}),h(a,Bg.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Zg(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Wg("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=cv[t];if(void 0!==e)return gv(e)}(i),s=r.message;void 0===o&&(o=hm.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new dm(o,s)),a.close()}else Wg("Connection","WebChannel received:",n),l.Fi(n)}}),h(i,qg.STAT_EVENT,function(t){10===t.stat?Wg("Connection","Detected buffering proxy"):11===t.stat&&Wg("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ni()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);Wg("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then(function(t){return Wg("RestConnection","Received: ",t),t},function(e){throw $g("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+Ww[t]},t}());function Yw(){return"undefined"!=typeof window?window:null}function Xw(){return"undefined"!=typeof document?document:null}function Zw(t){return new Hv(t,!0)}var Jw=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&Wg("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),tC=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Jw(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===hm.RESOURCE_EXHAUSTED?(Kg(e.toString()),Kg("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===hm.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}})})},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then(function(e){t.sr===n&&t.gr(e)},function(n){e(function(){var e=new dm(hm.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)})})},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return Object(Pi.b)(t,void 0,void 0,function(){return Object(Pi.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.pr=function(t){return Wg("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget(function(){return e.sr===t?n():(Wg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),eC=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,s}return Object(Pi.c)(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Xg()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(Zg(void 0===e||"string"==typeof e),vm.fromBase64String(e||"")):(Zg(void 0===e||e instanceof Uint8Array),vm.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?hm.UNKNOWN:gv(t.code);return new dm(e,t.message||"")}(a);n=new Lv(r,i,o,s||null)}else if("documentChange"in e){i=Xv(t,(r=e.documentChange).document.name),o=Wv(r.document.updateTime);var a=new ky({mapValue:{fields:r.document.fields}}),u=(s=new qm(i,o,a,{}),r.targetIds||[]);n=new Nv(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Xv(t,(r=e.documentDelete).document),o=r.readTime?Wv(r.readTime):Iy.min(),a=new Bm(i,o),n=new Nv([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Xv(t,(r=e.documentRemove).document),n=new Nv([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Xg();var c=e.filter;i=new fv(r=c.count||0),n=new Dv(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return Iy.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Iy.min():e.readTime?Wv(e.readTime):Iy.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=tb(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=Km(r)?{documents:sb(t,r)}:{query:ab(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=zv(t,e.resumeToken):e.snapshotVersion.compareTo(Iy.min())>0&&(n.readTime=Qv(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xg()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=tb(this.D),e.removeTarget=t,this.wr(e)},e}(tC),nC=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,s.Rr=!1,s}return Object(Pi.c)(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(Zg(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(Zg(void 0!==e),t.map(function(t){return function(t,e){var n=Wv(t.updateTime?t.updateTime:e);return n.isEqual(Iy.min())&&(n=Wv(e)),new Ky(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Wv(t.commitTime);return this.listener.Pr(n,e)}return Zg(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=tb(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return ib(e.D,t)})};this.wr(n)},e}(tC),rC=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Object(Pi.c)(e,t),e.prototype.Cr=function(){if(this.Dr)throw new dm(hm.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Mi(t,e,n,i)}).catch(function(t){throw t.code===hm.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Ui(t,e,n,i)}).catch(function(t){throw t.code===hm.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Dr=!1},e}(function(){}),iC=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(Kg(e),this.Fr=!1):Wg("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),oC=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return Object(Pi.b)(o,void 0,void 0,function(){return Object(Pi.d)(this,function(t){switch(t.label){case 0:return pC(this)?(Wg("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Pi.b)(this,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(n){switch(n.label){case 0:return(e=Jg(t)).Qr.add(4),[4,aC(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,sC(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new iC(n,r)};function sC(t){return Object(Pi.b)(this,void 0,void 0,function(){var e,n;return Object(Pi.d)(this,function(r){switch(r.label){case 0:if(!pC(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function aC(t){return Object(Pi.b)(this,void 0,void 0,function(){var e,n;return Object(Pi.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function uC(t,e){var n=Jg(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),fC(n)?dC(n):kC(n).ar()&&lC(n,e))}function cC(t,e){var n=Jg(t),r=kC(n);n.Ur.delete(e),r.ar()&&hC(n,e),0===n.Ur.size&&(r.ar()?r.lr():pC(n)&&n.jr.set("Unknown"))}function lC(t,e){t.Gr.H(e.targetId),kC(t).Ir(e)}function hC(t,e){t.Gr.H(e),kC(t).Ar(e)}function dC(t){t.Gr=new Mv({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),kC(t).start(),t.jr.Or()}function fC(t){return pC(t)&&!kC(t).cr()&&t.Ur.size>0}function pC(t){return 0===Jg(t).Qr.size}function gC(t){t.Gr=void 0}function mC(t){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(e){return t.Ur.forEach(function(e,n){lC(t,e)}),[2]})})}function yC(t,e){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(n){return gC(t),fC(t)?(t.jr.Lr(e),dC(t)):t.jr.set("Unknown"),[2]})})}function vC(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var r,i,o;return Object(Pi.d)(this,function(s){switch(s.label){case 0:if(t.jr.set("Online"),!(e instanceof Lv&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Pi.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Wg("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,bC(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Nv?t.Gr.st(e):e instanceof Dv?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(Iy.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,dw(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(vm.EMPTY_BYTE_STRING,n.snapshotVersion)),hC(t,e);var r=new i_(n.target,e,1,n.sequenceNumber);lC(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Wg("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,bC(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function bC(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var r=this;return Object(Pi.d)(this,function(i){switch(i.label){case 0:if(!$b(e))throw e;return t.Qr.add(1),[4,aC(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return dw(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Pi.b)(r,void 0,void 0,function(){return Object(Pi.d)(this,function(e){switch(e.label){case 0:return Wg("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,sC(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function _C(t,e){return e().catch(function(n){return bC(t,n,e)})}function wC(t){return Object(Pi.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Pi.d)(this,function(s){switch(s.label){case 0:e=Jg(t),n=AC(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return pC(t)&&t.qr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,gw(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=AC(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,bC(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return CC(e)&&EC(e),[2]}})})}function CC(t){return pC(t)&&!AC(t).cr()&&t.qr.length>0}function EC(t){AC(t).start()}function OC(t){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(e){return AC(t).Sr(),[2]})})}function SC(t){return Object(Pi.b)(this,void 0,void 0,function(){var e,n,r;return Object(Pi.d)(this,function(i){for(e=AC(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]})})}function TC(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var r,i;return Object(Pi.d)(this,function(o){switch(o.label){case 0:return r=t.qr.shift(),i=r_.from(r,e,n),[4,_C(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,wC(t)];case 2:return o.sent(),[2]}})})}function IC(t,e){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(n){switch(n.label){case 0:return e&&AC(t).br?[4,function(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r;return Object(Pi.d)(this,function(i){switch(i.label){case 0:return pv(r=e.code)&&r!==hm.ABORTED?(n=t.qr.shift(),AC(t).hr(),[4,_C(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,wC(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return CC(t)&&EC(t),[2]}})})}function xC(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n;return Object(Pi.d)(this,function(r){switch(r.label){case 0:return n=Jg(t),e?(n.Qr.delete(2),[4,sC(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,aC(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function kC(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=Jg(t);return r.Cr(),new eC(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:mC.bind(null,t),Di:yC.bind(null,t),Tr:vC.bind(null,t)}),t.Kr.push(function(n){return Object(Pi.b)(e,void 0,void 0,function(){return Object(Pi.d)(this,function(e){switch(e.label){case 0:return n?(t.zr.hr(),fC(t)?dC(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),gC(t),e.label=3;case 3:return[2]}})})})),t.zr}function AC(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=Jg(t);return r.Cr(),new nC(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:OC.bind(null,t),Di:IC.bind(null,t),Vr:SC.bind(null,t),Pr:TC.bind(null,t)}),t.Kr.push(function(n){return Object(Pi.b)(e,void 0,void 0,function(){return Object(Pi.d)(this,function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,wC(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(Wg("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}})})})),t.Hr}var jC=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Hb,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dm(hm.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function PC(t,e){if(Kg("AsyncQueue",e+": "+t),$b(t))return new dm(hm.UNAVAILABLE,e+": "+t);throw t}var RC=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ym.comparator(e.key,n.key)}:function(t,e){return ym.comparator(t.key,e.key)},this.keyedMap=Sv(),this.sortedSet=new mv(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),NC=function(){function t(){this.Jr=new mv(ym.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Xg():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),DC=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,RC.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&wy(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),LC=function(){this.Xr=void 0,this.listeners=[]},FC=function(){this.queries=new Q_(function(t){return Cy(t)},wy),this.onlineState="Unknown",this.Zr=new Set};function MC(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Pi.d)(this,function(c){switch(c.label){case 0:if(n=Jg(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new LC),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=c.sent(),[3,4];case 3:return a=c.sent(),u=PC(a,"Initialization of query '"+Ey(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&BC(n),[2]}})})}function UC(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Pi.d)(this,function(a){return n=Jg(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function VC(t,e){for(var n=Jg(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&BC(n)}function qC(t,e,n){var r=Jg(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function BC(t){t.Zr.forEach(function(t){t.next()})}var HC=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new DC(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=DC.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),QC=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),zC=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return Xv(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?rb(this.D,t.document,!1):new Bm(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return Wv(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new zC(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||kv()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Pi.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Pi.d)(this,function(o){switch(o.label){case 0:return[4,Cw(this.localStore,new zC(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Ew(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new iw(Object.assign({},this.progress),t))]}})})}}();var GC=function(t){this.key=t},WC=function(t){this.key=t},KC=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=kv(),this.mutatedKeys=kv(),this.po=Sy(t),this.Eo=new RC(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new NC,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=fy(this.query)&&i.size===this.query.limit?i.last():null,c=py(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof qm?e:null;h&&(h=Oy(n.query,h)?h:null);var d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?d!==f&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),fy(this.query)||py(this.query))for(;s.size>this.query.limit;){var l=fy(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:s,Ao:r,Mn:a,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xg()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)}),this.bo(n);var s=e?this.vo():[],a=0===this.yo.size&&this.current?1:0,u=a!==this.mo;return this.mo=a,0!==o.length||u?{snapshot:new DC(this.query,t.Eo,i,o,t.mutatedKeys,0===a,u,!1),Po:s}:{Po:s}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new NC,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=kv(),this.Eo.forEach(function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))});var n=[];return e.forEach(function(e){t.yo.has(e)||n.push(new WC(e))}),this.yo.forEach(function(t){e.has(t)||n.push(new GC(t))}),n},t.prototype.So=function(t){this._o=t.jn,this.yo=kv();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return DC.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),$C=function(t,e,n){this.query=t,this.targetId=e,this.view=n},YC=function(t){this.key=t,this.Co=!1},XC=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new Q_(function(t){return Cy(t)},wy),this.$o=new Map,this.Fo=new Set,this.Oo=new mv(ym.comparator),this.ko=new Map,this.Mo=new Sw,this.Lo={},this.Bo=new Map,this.qo=P_.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function ZC(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Pi.d)(this,function(a){switch(a.label){case 0:return n=IE(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,mw(n.localStore,by(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,JC(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&uC(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function JC(t,e,n,r){return Object(Pi.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Pi.d)(this,function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Object(Pi.b)(this,void 0,void 0,function(){var i,o,s;return Object(Pi.d)(this,function(a){switch(a.label){case 0:return(i=e.view.Io(n)).Mn?[4,vw(t.localStore,e.query,!1).then(function(t){return e.view.Io(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(dE(t,e.targetId,s.Po),s.snapshot)]}})})}(t,e,n,r)},[4,vw(t.localStore,e,!0)];case 1:return i=l.sent(),o=new KC(e,i.jn),s=o.Io(i.documents),a=Rv.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),dE(t,n,u.Po),c=new $C(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}})})}function tE(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Pi.d)(this,function(o){switch(o.label){case 0:return n=Jg(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter(function(t){return!wy(t,e)})),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,yw(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),cC(n.remoteStore,r.targetId),lE(n,r.targetId)}).catch(F_)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return lE(n,r.targetId),[4,yw(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function eE(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Pi.d)(this,function(a){switch(a.label){case 0:r=xE(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Jg(t),i=Em.now(),o=e.reduce(function(t,e){return t.add(e.key)},kv());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Kn.bn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=tv(c,n.get(c.key));null!=l&&s.push(new iv(c.key,l,jy(l.proto.mapValue),$y.exists(!0)))}return r.Tn.addMutationBatch(t,i,s,e)})}).then(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new mv(nm)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,gE(r,i.changes)];case 3:return a.sent(),[4,wC(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=PC(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function nE(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r;return Object(Pi.d)(this,function(i){switch(i.label){case 0:n=Jg(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,fw(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.ko.get(e);r&&(Zg(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?Zg(r.Co):t.removedDocuments.size>0&&(Zg(r.Co),r.Co=!1))}),[4,gE(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,F_(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function rE(t,e,n){var r=Jg(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach(function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Jg(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)}),r&&BC(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iE(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Pi.d)(this,function(c){switch(c.label){case 0:return(r=Jg(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(s=(s=new mv(ym.comparator)).insert(o,new Bm(o,Iy.min())),a=kv().add(o),u=new Pv(Iy.min(),new Map,new bv(nm),s,a),[4,nE(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),pE(r),[3,4];case 2:return[4,yw(r.localStore,e,!1).then(function(){return lE(r,e,n)}).catch(F_)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function oE(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Pi.d)(this,function(o){switch(o.label){case 0:n=Jg(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,hw(n.localStore,e)];case 2:return i=o.sent(),cE(n,r,null),uE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,gE(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,F_(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function sE(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var r,i;return Object(Pi.d)(this,function(o){switch(o.label){case 0:r=Jg(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Jg(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Tn.lookupMutationBatch(t,e).next(function(e){return Zg(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),cE(r,e,n),uE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,gE(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,F_(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function aE(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Pi.d)(this,function(a){switch(a.label){case 0:pC((n=Jg(t)).remoteStore)||Wg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Jg(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=PC(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function uE(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function cE(t,e,n){var r=Jg(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function lE(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach(function(e){t.Mo.containsKey(e)||hE(t,e)})}function hE(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(cC(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),pE(t))}function dE(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof GC?(t.Mo.addReference(o.key,e),fE(t,o)):o instanceof WC?(Wg("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||hE(t,o.key)):Xg()}}function fE(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(Wg("SyncEngine","New document in limbo: "+n),t.Fo.add(r),pE(t))}function pE(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new ym(pm.fromString(e)),r=t.qo.next();t.ko.set(r,new YC(n)),t.Oo=t.Oo.insert(n,r),uC(t.remoteStore,new i_(by(dy(n.path)),r,2,Qg.o))}}function gE(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Pi.d)(this,function(a){switch(a.label){case 0:return r=Jg(t),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach(function(t,a){s.push(r.Qo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=sw.Nn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.xo.Tr(i),[4,function(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Pi.d)(this,function(l){switch(l.label){case 0:n=Jg(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Qb.forEach(e,function(e){return Qb.forEach(e.Cn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Qb.forEach(e.xn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!$b(r=l.sent()))throw r;return Wg("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Bn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function mE(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r;return Object(Pi.d)(this,function(i){switch(i.label){case 0:return(n=Jg(t)).currentUser.isEqual(e)?[3,3]:(Wg("SyncEngine","User change. New user:",e.toKey()),[4,lw(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach(function(t){t.forEach(function(t){t.reject(new dm(hm.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,gE(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function yE(t,e){var n=Jg(t),r=n.ko.get(e);if(r&&r.Co)return kv().add(r.key);var i=kv(),o=n.$o.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.No.get(a[s]);i=i.unionWith(u.view.To)}return i}function vE(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Pi.d)(this,function(o){switch(o.label){case 0:return[4,vw((n=Jg(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&dE(n,e.targetId,i.Po),i)]}})})}function bE(t){return Object(Pi.b)(this,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(n){return[2,_w((e=Jg(t)).localStore).then(function(t){return gE(e,t)})]})})}function _E(t,e,n,r){return Object(Pi.b)(this,void 0,void 0,function(){var i,o;return Object(Pi.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Jg(t),r=Jg(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Jt(t,e).next(function(e){return e?n.Kn.bn(t,e):Qb.resolve(null)})})}((i=Jg(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,wC(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(cE(i,e,r||null),uE(i,e),function(t,e){Jg(Jg(t).Tn).Xt(e)}(i.localStore,e)):Xg(),s.label=4;case 4:return[4,gE(i,o)];case 5:return s.sent(),[3,7];case 6:Wg("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function wE(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Pi.d)(this,function(c){switch(c.label){case 0:return IE(n=Jg(t)),xE(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,CE(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,xC(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)uC(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(a=[],u=Promise.resolve(),n.$o.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return lE(n,e),yw(n.localStore,e,!0)}),cC(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,CE(n,a)];case 5:return c.sent(),function(t){var e=Jg(t);e.ko.forEach(function(t,n){cC(e.remoteStore,n)}),e.Mo.cs(),e.ko=new Map,e.Oo=new mv(ym.comparator)}(n),n.Uo=!1,[4,xC(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function CE(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(Pi.d)(this,function(g){switch(g.label){case 0:n=Jg(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.$o.get(a=s[o]))&&0!==c.length?[4,mw(n.localStore,by(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.No.get(h[l]),[4,vE(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,bw(n.localStore,a)];case 8:return p=g.sent(),[4,mw(n.localStore,p)];case 9:return u=g.sent(),[4,JC(n,EE(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}})})}function EE(t){return hy(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function OE(t){var e=Jg(t);return Jg(Jg(e.localStore).persistence).gn()}function SE(t,e,n,r){return Object(Pi.b)(this,void 0,void 0,function(){var i,o,s;return Object(Pi.d)(this,function(a){switch(a.label){case 0:return(i=Jg(t)).Uo?(Wg("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,_w(i.localStore)];case 3:return o=a.sent(),s=Pv.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,gE(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,yw(i.localStore,e,!0)];case 6:return a.sent(),lE(i,e,r),[3,8];case 7:Xg(),a.label=8;case 8:return[2]}})})}function TE(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Pi.d)(this,function(d){switch(d.label){case 0:if(!(r=IE(t)).Uo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.$o.has(s=o[i])?(Wg("SyncEngine","Adding an already active target "+s),[3,5]):[4,bw(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,mw(r.localStore,a)];case 3:return u=d.sent(),[4,JC(r,EE(a),u.targetId,!1)];case 4:d.sent(),uC(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Pi.d)(this,function(e){switch(e.label){case 0:return r.$o.has(t)?[4,yw(r.localStore,t,!1).then(function(){cC(r.remoteStore,t),lE(r,t)}).catch(F_)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function IE(t){var e=Jg(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iE.bind(null,e),e.xo.Tr=VC.bind(null,e.eventManager),e.xo.Ko=qC.bind(null,e.eventManager),e}function xE(t){var e=Jg(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sE.bind(null,e),e}var kE=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(e){switch(e.label){case 0:return this.D=Zw(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}})})},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return cw(this.persistence,new aw,t.initialUser,this.D)},t.prototype.Go=function(t){return new jw(Rw.Cs,this.D)},t.prototype.jo=function(t){return new Qw},t.prototype.terminate=function(){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),AE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Pi.c)(e,t),e.prototype.initialize=function(e){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,ww(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,xE(this.Jo.syncEngine)];case 4:return n.sent(),[4,wC(this.Jo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ho=function(t){return cw(this.persistence,new aw,t.initialUser,this.D)},e.prototype.zo=function(t){return new V_(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=rw(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?O_.withCacheSize(this.cacheSizeBytes):O_.DEFAULT;return new tw(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Yw(),Xw(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new Qw},e}(kE),jE=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Pi.c)(e,t),e.prototype.initialize=function(e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r=this;return Object(Pi.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof Hw?(this.sharedClientState.syncEngine={wi:_E.bind(null,n),_i:SE.bind(null,n),mi:TE.bind(null,n),gn:OE.bind(null,n),di:bE.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en(function(t){return Object(Pi.b)(r,void 0,void 0,function(){return Object(Pi.d)(this,function(e){switch(e.label){case 0:return[4,wE(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jo=function(t){var e=Yw();if(!Hw.At(e))throw new dm(hm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=rw(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Hw(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(AE),PE=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n=this;return Object(Pi.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return rE(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=mE.bind(null,this.syncEngine),[4,xC(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new FC},t.prototype.createDatastore=function(t){var e=Zw(t.databaseInfo.databaseId),n=new $w(t.databaseInfo);return function(t,e,n){return new rC(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return rE(s.syncEngine,t,0)},o=Gw.At()?new Gw:new zw,new oC(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new XC(t,e,n,r,i,o);return s&&(a.Uo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Pi.b)(this,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(n){switch(n.label){case 0:return e=Jg(t),Wg("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,aC(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),RE=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),NE=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new Hb,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Wo=function(){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},t.prototype.ec=function(){return Object(Pi.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Pi.d)(this,function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new QC(JSON.parse(r),t.length+n)]}})})},t.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.nc=function(){return Object(Pi.b)(this,void 0,void 0,function(){var t,e;return Object(Pi.d)(this,function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.ic=function(t){return Object(Pi.b)(this,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Object(Pi.b)(this,void 0,void 0,function(){var t,e;return Object(Pi.d)(this,function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Pi.b)(this,void 0,void 0,function(){var e,n=this;return Object(Pi.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new dm(hm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Pi.d)(this,function(u){switch(u.label){case 0:return n=Jg(t),r=tb(n.D)+"/documents",i={documents:e.map(function(t){return Yv(n.D,t)})},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Zg(!!e.found);var n=Xv(t,e.found.name),r=Wv(e.found.updateTime),i=new ky({mapValue:{fields:e.found.fields}});return new qm(n,r,i,{})}(t,e):"missing"in e?function(t,e){Zg(!!e.missing),Zg(!!e.readTime);var n=Xv(t,e.missing),r=Wv(e.readTime);return new Bm(n,r)}(t,e):Xg()}(n.D,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Zg(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Bm||t instanceof qm?n.recordVersion(t):Xg()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new hv(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Pi.b)(this,void 0,void 0,function(){var t,e=this;return Object(Pi.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=ym.fromPath(n);e.mutations.push(new dv(r,e.precondition(r)))}),[4,function(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Pi.d)(this,function(o){switch(o.label){case 0:return n=Jg(t),r=tb(n.D)+"/documents",i={writes:e.map(function(t){return ib(n.D,t)})},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof qm)e=t.version;else{if(!(t instanceof Bm))throw Xg();e=Iy.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new dm(hm.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?$y.updateTime(e):$y.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Iy.min()))throw new dm(hm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $y.updateTime(e)}return $y.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),DE=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new Jw(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi(function(){return Object(Pi.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Pi.d)(this,function(r){return t=new NE(this.datastore),(e=this.uc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.hc(t)})})}).catch(function(t){n.hc(t)}),[2]})})})},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!um(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!pv(e)}return!1},t}(),LE=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Nw.UNAUTHENTICATED,this.clientId=em.u(),this.credentialListener=function(){},this.receivedInitialUser=new Hb,this.credentials.setChangeListener(function(t){Wg("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new dm(hm.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Hb;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Pi.b)(t,void 0,void 0,function(){var t,n;return Object(Pi.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=PC(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function FE(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Pi.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Wg("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Pi.b)(i,void 0,void 0,function(){return Object(Pi.d)(this,function(t){switch(t.label){case 0:return[4,lw(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function ME(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r;return Object(Pi.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,UE(t)];case 1:return n=i.sent(),Wg("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Pi.b)(this,void 0,void 0,function(){var n,r;return Object(Pi.d)(this,function(i){switch(i.label){case 0:return(n=Jg(t)).asyncQueue.verifyOperationInProgress(),Wg("RemoteStore","RemoteStore received new credentials"),r=pC(n),n.Qr.add(3),[4,aC(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,sC(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function UE(t){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Wg("FirestoreClient","Using default OfflineComponentProvider"),[4,FE(t,new kE)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function VE(t){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Wg("FirestoreClient","Using default OnlineComponentProvider"),[4,ME(t,new PE)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function qE(t){return UE(t).then(function(t){return t.persistence})}function BE(t){return UE(t).then(function(t){return t.localStore})}function HE(t){return VE(t).then(function(t){return t.remoteStore})}function QE(t){return VE(t).then(function(t){return t.syncEngine})}function zE(t){return Object(Pi.b)(this,void 0,void 0,function(){var e,n;return Object(Pi.d)(this,function(r){switch(r.label){case 0:return[4,VE(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=ZC.bind(null,e.syncEngine),n.onUnlisten=tE.bind(null,e.syncEngine),n)]}})})}function GE(t,e,n){var r=this;void 0===n&&(n={});var i=new Hb;return t.asyncQueue.enqueueAndForget(function(){return Object(Pi.b)(r,void 0,void 0,function(){var r;return Object(Pi.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new RE({next:function(o){e.enqueueAndForget(function(){return UC(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new dm(hm.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new dm(hm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new HC(dy(n.path),o,{includeMetadataChanges:!0,uo:!0});return MC(t,s)},[4,zE(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function WE(t,e,n){var r=this;void 0===n&&(n={});var i=new Hb;return t.asyncQueue.enqueueAndForget(function(){return Object(Pi.b)(r,void 0,void 0,function(){var r;return Object(Pi.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new RE({next:function(n){e.enqueueAndForget(function(){return UC(t,s)}),n.fromCache&&"server"===r.source?i.reject(new dm(hm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new HC(n,o,{includeMetadataChanges:!0,uo:!0});return MC(t,s)},[4,zE(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var KE=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},$E=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),YE=new Map,XE=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},ZE=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Nw.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),JE=function(){function t(t){var e=this;this.fc=null,this.currentUser=Nw.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.dc!==e?(Wg("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Zg("string"==typeof n.accessToken),new XE(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return Zg(null===t||"string"==typeof t),new Nw(t)},t}(),tO=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=Nw.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),eO=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new tO(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(Nw.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function nO(t,e,n){if(!n)throw new dm(hm.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function rO(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new dm(hm.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function iO(t,e,n,r){if(!0===e&&!0===r)throw new dm(hm.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function oO(t){if(!ym.isDocumentKey(t))throw new dm(hm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function sO(t){if(ym.isDocumentKey(t))throw new dm(hm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function aO(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Xg()}function uO(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new dm(hm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=aO(t);throw new dm(hm.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function cO(t,e){if(e<=0)throw new dm(hm.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var lO=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new dm(hm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new dm(hm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,iO("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),hO=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new lO({}),this._settingsFrozen=!1,t instanceof $E?(this._databaseId=t,this._credentials=new ZE):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new dm(hm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $E(t.options.projectId)}(t),this._credentials=new JE(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new dm(hm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new dm(hm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lO(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ZE;switch(t.type){case"gapi":var e=t.client;return Zg(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new eO(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new dm(hm.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=YE.get(this))&&(Wg("ComponentProvider","Removing Datastore"),YE.delete(this),t.terminate()),Promise.resolve();var t},t}(),dO=function(t){this._delegate=t},fO=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new gO(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),pO=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),gO=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,dy(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(Pi.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new fO(this.firestore,null,new ym(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(pO);function mO(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof dO&&(t=t._delegate),nO("collection","path",e),t instanceof hO)return sO(n=pm.fromString.apply(pm,Object(Pi.f)([e],r))),new gO(t,null,n);if(!(t instanceof fO||t instanceof gO))throw new dm(hm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return sO(n=pm.fromString.apply(pm,Object(Pi.f)([t.path],r)).child(pm.fromString(e))),new gO(t.firestore,null,n)}function yO(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof dO&&(t=t._delegate),1===arguments.length&&(e=em.u()),nO("doc","path",e),t instanceof hO)return oO(n=pm.fromString.apply(pm,Object(Pi.f)([e],r))),new fO(t,null,new ym(n));if(!(t instanceof fO||t instanceof gO))throw new dm(hm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return oO(n=t._path.child(pm.fromString.apply(pm,Object(Pi.f)([e],r)))),new fO(t.firestore,t instanceof gO?t._converter:null,new ym(n))}function vO(t,e){return t instanceof dO&&(t=t._delegate),e instanceof dO&&(e=e._delegate),(t instanceof fO||t instanceof gO)&&(e instanceof fO||e instanceof gO)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function bO(t,e){return t instanceof dO&&(t=t._delegate),e instanceof dO&&(e=e._delegate),t instanceof pO&&e instanceof pO&&t.firestore===e.firestore&&wy(t._query,e._query)&&t._converter===e._converter}var _O=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new Jw(this,"async_queue_retry"),this.bc=function(){var e=Xw();e&&Wg("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=Xw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=Xw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},t.prototype.Vc=function(){return Object(Pi.b)(this,void 0,void 0,function(){var t,e=this;return Object(Pi.d)(this,function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!$b(t=n.sent()))throw t;return Wg("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi(function(){return e.Vc()}),n.label=5;case 5:return[2]}})})},t.prototype.Pc=function(t){var e=this,n=this.yc.then(function(){return e.Ac=!0,t().catch(function(t){throw e.Ic=t,e.Ac=!1,Kg("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Ac=!1,t})});return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=jC.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&Xg()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Object(Pi.b)(this,void 0,void 0,function(){var t;return Object(Pi.d)(this,function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then(function(){e.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()})},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function wO(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Hb,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var CO=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new _O,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Pi.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||OO(this),this._firestoreClient.terminate()},e}(hO);function EO(t){return t._firestoreClient||OO(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function OO(t){var e=t._freezeSettings(),n=function(t,e,n){return new KE(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new LE(t._credentials,t._queue,n)}function SO(t,e,n){var r=this,i=new Hb;return t.asyncQueue.enqueue(function(){return Object(Pi.b)(r,void 0,void 0,function(){var r;return Object(Pi.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,FE(t,n)];case 1:return o.sent(),[4,ME(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===hm.FAILED_PRECONDITION||t.code===hm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function TO(t){if(t._initialized||t._terminated)throw new dm(hm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var IO=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new dm(hm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mm(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),xO=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(vm.fromBase64String(e))}catch(e){throw new dm(hm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(vm.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),kO=function(t){this._methodName=t},AO=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new dm(hm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new dm(hm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return nm(this._lat,t._lat)||nm(this._long,t._long)},t}(),jO=/^__.*__$/,PO=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new iv(t,this.data,this.fieldMask,e,this.fieldTransforms):new rv(t,this.data,e,this.fieldTransforms)},t}(),RO=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new iv(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function NO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xg()}}var DO=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return eS(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(NO(this.Fc)&&jO.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),LO=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||Zw(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new DO({Fc:t,methodName:e,Kc:n,path:mm.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function FO(t){var e=t._freezeSettings(),n=Zw(t._databaseId);return new LO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function MO(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);XO("Data must be an object, but it was:",s,r);var a,u,c=$O(r,s);if(o.merge)a=new xy(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=ZO(e,d[h],n);if(!s.contains(f))throw new dm(hm.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");nS(l,f)||l.push(f)}a=new xy(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new PO(new ky(c),a,u)}var UO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Pi.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(kO);function VO(t,e,n){return new DO({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var qO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Pi.c)(e,t),e.prototype._toFieldTransform=function(t){return new Wy(t.path,new Uy)},e.prototype.isEqual=function(t){return t instanceof e},e}(kO),BO=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Pi.c)(e,t),e.prototype._toFieldTransform=function(t){var e=VO(this,t,!0),n=this.jc.map(function(t){return KO(t,e)}),r=new Vy(n);return new Wy(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(kO),HO=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Pi.c)(e,t),e.prototype._toFieldTransform=function(t){var e=VO(this,t,!0),n=this.jc.map(function(t){return KO(t,e)}),r=new By(n);return new Wy(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(kO),QO=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Object(Pi.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Qy(t.D,Ny(t.D,this.Gc));return new Wy(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(kO);function zO(t,e,n,r){var i=t.Wc(1,e,n);XO("Data must be an object, but it was:",i,r);var o=[],s=new Ay;sm(r,function(t,r){var a=tS(e,t,n);r instanceof dO&&(r=r._delegate);var u=i.Bc(a);if(r instanceof UO)o.push(a);else{var c=KO(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new xy(o);return new RO(s.v(),a,i.fieldTransforms)}function GO(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[ZO(e,r,n)],u=[i];if(o.length%2!=0)throw new dm(hm.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(ZO(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Ay,d=a.length-1;d>=0;--d)if(!nS(l,a[d])){var f=a[d],p=u[d];p instanceof dO&&(p=p._delegate);var g=s.Bc(f);if(p instanceof UO)l.push(f);else{var m=KO(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new xy(l);return new RO(h.v(),y,s.fieldTransforms)}function WO(t,e,n,r){return void 0===r&&(r=!1),KO(n,t.Wc(r?4:3,e))}function KO(t,e){if(t instanceof dO&&(t=t._delegate),YO(t))return XO("Unsupported field value:",e,t),$O(t,e);if(t instanceof kO)return function(t,e){if(!NO(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=KO(o[i],e.qc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof dO&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ny(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Em.fromDate(t);return{timestampValue:Qv(e.D,n)}}if(t instanceof Em)return n=new Em(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Qv(e.D,n)};if(t instanceof AO)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xO)return{bytesValue:zv(e.D,t._byteString)};if(t instanceof fO){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Kv(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+aO(t))}(t,e)}function $O(t,e){var n={};return am(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sm(t,function(t,r){var i=KO(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function YO(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Em||t instanceof AO||t instanceof xO||t instanceof fO||t instanceof kO)}function XO(t,e,n){if(!YO(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=aO(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function ZO(t,e,n){if(e instanceof dO&&(e=e._delegate),e instanceof IO)return e._internalPath;if("string"==typeof e)return tS(t,e);throw eS("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var JO=new RegExp("[~\\*/\\[\\]]");function tS(t,e,n){if(e.search(JO)>=0)throw eS("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(IO.bind.apply(IO,Object(Pi.f)([void 0],e.split(".")))))._internalPath}catch(r){throw eS("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function eS(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new dm(hm.INVALID_ARGUMENT,(a+=". ")+t+u)}function nS(t,e){return t.some(function(t){return t.isEqual(e)})}var rS=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new fO(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new iS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(oS("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),iS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Pi.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(rS);function oS(t,e){return"string"==typeof e?tS(t,e):e instanceof dO?e._delegate._internalPath:e._internalPath}var sS=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),aS=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Pi.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new uS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(oS("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(rS),uS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Pi.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(aS),cS=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new sS(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new uS(n._firestore,n._userDataWriter,r.key,r,new sS(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new dm(hm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new uS(t._firestore,t._userDataWriter,e.doc.key,e.doc,new sS(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new uS(t._firestore,t._userDataWriter,e.doc.key,e.doc,new sS(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:lS(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function lS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xg()}}function hS(t,e){return t instanceof aS&&e instanceof aS?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof cS&&e instanceof cS&&t._firestore===e._firestore&&bO(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function dS(t){if(py(t)&&0===t.explicitOrderBy.length)throw new dm(hm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var fS=function(){};function pS(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var gS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Object(Pi.c)(e,t),e.prototype._apply=function(t){var e=FO(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new dm(hm.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){CS(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(wS(r,t,l[c]));a={arrayValue:{values:u}}}else a=wS(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||CS(s,o),a=WO(n,"where",s,"in"===o||"not-in"===o);var h=$m.create(i,o,a);return function(t,e){if(e.g()){var n=my(t);if(null!==n&&!n.isEqual(e.field))throw new dm(hm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=gy(t);null!==r&&ES(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new dm(hm.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new pO(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new ly(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(fS),mS=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Object(Pi.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new dm(hm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new dm(hm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new sy(e,n);return function(t,e){if(null===gy(t)){var n=my(t);null!==n&&ES(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new pO(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new ly(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(fS),yS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(Pi.c)(e,t),e.prototype._apply=function(t){return new pO(t.firestore,t._converter,_y(t._query,this.Xc,this.Zc))},e}(fS),vS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(Pi.c)(e,t),e.prototype._apply=function(t){var e=_S(t,this.type,this.ta,this.ea);return new pO(t.firestore,t._converter,function(t,e){return new ly(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(fS),bS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(Pi.c)(e,t),e.prototype._apply=function(t){var e=_S(t,this.type,this.ta,this.ea);return new pO(t.firestore,t._converter,function(t,e){return new ly(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(fS);function _S(t,e,n,r){if(n[0]instanceof dO&&(n[0]=n[0]._delegate),n[0]instanceof rS)return function(t,e,n,r,i){if(!r)throw new dm(hm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=vy(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Nm(e,r.key));else{var c=r.field(u.field);if(Om(c))throw new dm(hm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new dm(hm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new iy(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=FO(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new dm(hm.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new dm(hm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!yy(t)&&-1!==c.indexOf("/"))throw new dm(hm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(pm.fromString(c));if(!ym.isDocumentKey(l))throw new dm(hm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ym(l);a.push(Nm(e,h))}else{var d=WO(n,r,c);a.push(d)}}return new iy(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function wS(t,e,n){if(n instanceof dO&&(n=n._delegate),"string"==typeof n){if(""===n)throw new dm(hm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!yy(e)&&-1!==n.indexOf("/"))throw new dm(hm.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(pm.fromString(n));if(!ym.isDocumentKey(r))throw new dm(hm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Nm(t,new ym(r))}if(n instanceof fO)return Nm(t,n._key);throw new dm(hm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+aO(n)+".")}function CS(t,e){if(!Array.isArray(t)||0===t.length)throw new dm(hm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new dm(hm.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ES(t,e,n){if(!n.isEqual(e))throw new dm(hm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var OS=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Im(t)){case 0:return null;case 1:return t.booleanValue;case 2:return wm(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Cm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Xg()}},t.prototype.convertObject=function(t,e){var n=this,r={};return sm(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new AO(wm(t.latitude),wm(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Sm(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Tm(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=_m(t);return new Em(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=pm.fromString(t);Zg(bb(n));var r=new $E(n.get(1),n.get(3)),i=new ym(n.popFirst(5));return r.isEqual(e)||Kg("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function SS(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var TS=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Pi.c)(e,t),e.prototype.convertBytes=function(t){return new xO(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new fO(this.firestore,null,e)},e}(OS),IS=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=FO(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=xS(t,this._firestore),i=SS(r._converter,e,n),o=MO(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,$y.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=xS(t,this._firestore);return e instanceof dO&&(e=e._delegate),o="string"==typeof e||e instanceof IO?GO(this._dataReader,"WriteBatch.update",s._key,e,n,r):zO(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,$y.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=xS(t,this._firestore);return this._mutations=this._mutations.concat(new hv(e._key,$y.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new dm(hm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function xS(t,e){if(t instanceof dO&&(t=t._delegate),t.firestore!==e)throw new dm(hm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var kS=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Pi.c)(e,t),e.prototype.convertBytes=function(t){return new xO(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new fO(this.firestore,null,e)},e}(OS);function AS(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=uO(t,fO);var o=uO(t.firestore,CO),s=FO(o);return e instanceof dO&&(e=e._delegate),PS(o,[("string"==typeof e||e instanceof IO?GO(s,"updateDoc",t._key,e,n,r):zO(s,"updateDoc",t._key,e)).toMutation(t._key,$y.exists(!0))])}function jS(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof dO&&(t=t._delegate);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||wO(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(wO(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof fO)c=uO(t.firestore,CO),l=dy(t._key.path),u={next:function(e){i[a]&&i[a](RS(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=uO(t,pO);c=uO(f.firestore,CO),l=f._query;var p=new kS(c);u={next:function(t){i[a]&&i[a](new cS(c,p,f,t))},error:i[a+1],complete:i[a+2]},dS(t._query)}return function(t,e,n,r){var i=this,o=new RE(r),s=new HC(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Pi.b)(i,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(n){switch(n.label){case 0:return e=MC,[4,zE(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(Pi.b)(i,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(n){switch(n.label){case 0:return e=UC,[4,zE(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(EO(c),l,h,u)}function PS(t,e){return function(t,e){var n=this,r=new Hb;return t.asyncQueue.enqueueAndForget(function(){return Object(Pi.b)(n,void 0,void 0,function(){var n;return Object(Pi.d)(this,function(i){switch(i.label){case 0:return n=eE,[4,QE(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(EO(t),e)}function RS(t,e,n){var r=n.docs.get(e._key),i=new kS(t);return new aS(t,i,e._key,r,new sS(n.hasPendingWrites,n.fromCache),e._converter)}var NS=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Pi.c)(e,t),e.prototype.get=function(e){var n=this,r=xS(e,this._firestore),i=new kS(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new aS(n._firestore,i,r._key,t._document,new sS(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=FO(t)}return t.prototype.get=function(t){var e=this,n=xS(t,this._firestore),r=new TS(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Xg();var i=t[0];if(i instanceof Bm)return new rS(e._firestore,r,n._key,null,n._converter);if(i instanceof qm)return new rS(e._firestore,r,i.key,i,n._converter);throw Xg()})},t.prototype.set=function(t,e,n){var r=xS(t,this._firestore),i=SS(r._converter,e,n),o=MO(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=xS(t,this._firestore);return e instanceof dO&&(e=e._delegate),o="string"==typeof e||e instanceof IO?GO(this._dataReader,"Transaction.update",s._key,e,n,r):zO(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=xS(t,this._firestore);return this._transaction.delete(e._key),this},t}());function DS(){if("undefined"==typeof Uint8Array)throw new dm(hm.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function LS(){if("undefined"==typeof atob)throw new dm(hm.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var FS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Pi.c)(e,t),e.fromBase64String=function(t){return LS(),new e(xO.fromBase64String(t))},e.fromUint8Array=function(t){return DS(),new e(xO.fromUint8Array(t))},e.prototype.toBase64=function(){return LS(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return DS(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(dO),MS=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){TO(t=uO(t,CO));var n=EO(t),r=t._freezeSettings(),i=new PE;return SO(n,i,new AE(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){TO(t=uO(t,CO));var e=EO(t),n=t._freezeSettings(),r=new PE;return SO(e,r,new jE(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new dm(hm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Hb;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Pi.b)(e,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Pi.b)(this,void 0,void 0,function(){return Object(Pi.d)(this,function(e){switch(e.label){case 0:return Gb.At()?[4,Gb.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(rw(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),US=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof $E||(i.sa=e),i}return Object(Pi.c)(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=uO(t,hO))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&$g("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Pi.b)(e,void 0,void 0,function(){var e,n;return Object(Pi.d)(this,function(r){switch(r.label){case 0:return[4,qE(t)];case 1:return e=r.sent(),[4,HE(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Jg(t);return e.Qr.delete(0),sC(e)}(n))]}})})})}(EO(uO(this._delegate,CO)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Pi.b)(e,void 0,void 0,function(){var e,n;return Object(Pi.d)(this,function(r){switch(r.label){case 0:return[4,qE(t)];case 1:return e=r.sent(),[4,HE(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Pi.b)(this,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(n){switch(n.label){case 0:return(e=Jg(t)).Qr.add(0),[4,aC(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}(EO(uO(this._delegate,CO)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&iO("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Hb;return t.asyncQueue.enqueueAndForget(function(){return Object(Pi.b)(e,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(r){switch(r.label){case 0:return e=aE,[4,QE(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(EO(uO(this._delegate,CO)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new RE(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Pi.b)(n,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Jg(t).Zr.add(e),e.next()},[4,zE(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(Pi.b)(n,void 0,void 0,function(){var e;return Object(Pi.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Jg(t).Zr.delete(e)},[4,zE(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(EO(t=uO(t,CO)),wO(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new dm(hm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new JS(this,mO(this._delegate,t))}catch(t){throw zS(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new QS(this,yO(this._delegate,t))}catch(t){throw zS(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new YS(this,function(t,e){if(t=uO(t,hO),nO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new dm(hm.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new pO(t,null,function(t){return new ly(pm.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw zS(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Hb;return t.asyncQueue.enqueueAndForget(function(){return Object(Pi.b)(n,void 0,void 0,function(){var n;return Object(Pi.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return VE(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new DE(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(EO(t),function(n){return e(new NS(t,n))})}(this._delegate,function(n){return t(new qS(e,n))})},e.prototype.batch=function(){var t=this;return EO(this._delegate),new BS(new IS(this._delegate,function(e){return PS(t._delegate,e)}))},e.prototype.loadBundle=function(t){throw new dm(hm.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new dm(hm.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(dO),VS=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Pi.c)(e,t),e.prototype.convertBytes=function(t){return new FS(new xO(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return QS.ia(e,this.firestore,null)},e}(OS),qS=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new VS(e),r}return Object(Pi.c)(e,t),e.prototype.get=function(t){var e=this,n=tT(t);return this._delegate.get(n).then(function(t){return new KS(e._firestore,new aS(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},e.prototype.set=function(t,e,n){var r=tT(t);return n?(rO("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=tT(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Pi.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=tT(t);return this._delegate.delete(e),this},e}(dO),BS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Pi.c)(e,t),e.prototype.set=function(t,e,n){var r=tT(t);return n?(rO("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=tT(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Pi.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=tT(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(dO),HS=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Object(Pi.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new uS(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new $S(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new VS(t),n),i.set(n,o)),o},e}(dO);HS.oa=new WeakMap;var QS=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new VS(e),r}return Object(Pi.c)(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new dm(hm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new fO(n._delegate,r,new ym(t)))},e.ia=function(t,n,r){return new e(n,new fO(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new JS(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new JS(this.firestore,mO(this._delegate,t))}catch(t){throw zS(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof dO&&(t=t._delegate),t instanceof fO&&vO(this._delegate,t)},e.prototype.set=function(t,e){e=rO("DocumentReference.set",e);try{return function(t,e,n){t=uO(t,fO);var r=uO(t.firestore,CO),i=SS(t._converter,e,n);return PS(r,[MO(FO(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,$y.none())])}(this._delegate,t,e)}catch(t){throw zS(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?AS(this._delegate,t):AS.apply(void 0,Object(Pi.f)([this._delegate,t,e],n))}catch(t){throw zS(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return PS(uO((t=this._delegate).firestore,CO),[new hv(t._key,$y.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=GS(e),i=WS(e,function(e){return new KS(t.firestore,new aS(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return jS(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=uO(t,fO);var e=uO(t.firestore,CO),n=EO(e),r=new kS(e);return function(t,e){var n=this,r=new Hb;return t.asyncQueue.enqueueAndForget(function(){return Object(Pi.b)(n,void 0,void 0,function(){var n;return Object(Pi.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var r,i;return Object(Pi.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Jg(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof qm?n.resolve(i):i instanceof Bm?n.resolve(null):n.reject(new dm(hm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=PC(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,BE(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new aS(e,r,t._key,n,new sS(n instanceof qm&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=uO(t,fO);var e=uO(t.firestore,CO);return GE(EO(e),t._key,{source:"server"}).then(function(n){return RS(e,t,n)})}(this._delegate):function(t){t=uO(t,fO);var e=uO(t.firestore,CO);return GE(EO(e),t._key).then(function(n){return RS(e,t,n)})}(this._delegate)).then(function(t){return new KS(e.firestore,new aS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?HS.ra(this.firestore,t):null))},e}(dO);function zS(t,e,n){return t.message=t.message.replace(e,n),t}function GS(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!wO(r))return r}return{}}function WS(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=wO(t[0])?t[0]:wO(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var KS=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Pi.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new QS(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return hS(this._delegate,t._delegate)},e}(dO),$S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Pi.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(KS),YS=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new VS(e),r}return Object(Pi.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,pS(this._delegate,function(t,e,n){var r=e,i=oS("where",t);return new gS(i,r,n)}(t,n,r)))}catch(t){throw zS(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,pS(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=oS("orderBy",t);return new mS(r,n)}(t,n)))}catch(t){throw zS(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,pS(this._delegate,function(t){return cO("limit",t),new yS("limit",t,"F")}(t)))}catch(t){throw zS(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,pS(this._delegate,function(t){return cO("limitToLast",t),new yS("limitToLast",t,"L")}(t)))}catch(t){throw zS(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,pS(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vS("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw zS(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,pS(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vS("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw zS(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,pS(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bS("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw zS(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,pS(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bS("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw zS(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return bO(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=uO(t,pO);var e=uO(t.firestore,CO),n=EO(e),r=new kS(e);return function(t,e){var n=this,r=new Hb;return t.asyncQueue.enqueueAndForget(function(){return Object(Pi.b)(n,void 0,void 0,function(){var n;return Object(Pi.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Pi.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Pi.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,vw(t,e,!0)];case 1:return a=u.sent(),r=new KC(e,a.jn),i=r.Io(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=PC(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,BE(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new cS(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=uO(t,pO);var e=uO(t.firestore,CO),n=EO(e),r=new kS(e);return WE(n,t._query,{source:"server"}).then(function(n){return new cS(e,r,t,n)})}(this._delegate):function(t){t=uO(t,pO);var e=uO(t.firestore,CO),n=EO(e),r=new kS(e);return dS(t._query),WE(n,t._query).then(function(n){return new cS(e,r,t,n)})}(this._delegate)).then(function(t){return new ZS(e.firestore,new cS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=GS(e),i=WS(e,function(e){return new ZS(t.firestore,new cS(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return jS(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?HS.ra(this.firestore,t):null))},e}(dO),XS=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Pi.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new $S(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(dO),ZS=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Pi.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new YS(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new $S(t._firestore,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new XS(e._firestore,t)})},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new $S(n._firestore,r))})},e.prototype.isEqual=function(t){return hS(this._delegate,t._delegate)},e}(dO),JS=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Pi.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new QS(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new QS(this.firestore,void 0===t?yO(this._delegate):yO(this._delegate,t))}catch(t){throw zS(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=uO(t.firestore,CO),r=yO(t),i=SS(t._converter,e);return PS(n,[MO(FO(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,$y.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new QS(e.firestore,t)})},e.prototype.isEqual=function(t){return vO(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?HS.ra(this.firestore,t):null))},e}(YS);function tT(t){return t instanceof dO&&(t=t._delegate),uO(t,fO)}var eT,nT=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(IO.bind.apply(IO,Object(Pi.f)([void 0],e))))||this}return Object(Pi.c)(e,t),e.documentId=function(){return new e(mm.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof dO&&(t=t._delegate),t instanceof IO&&this._delegate._internalPath.isEqual(t._internalPath)},e}(dO),rT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Pi.c)(e,t),e.serverTimestamp=function(){var t=new qO("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new UO("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new BO("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new HO("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new QO("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(dO),iT={Firestore:US,GeoPoint:AO,Timestamp:Em,Blob:FS,Transaction:qS,WriteBatch:BS,DocumentReference:QS,DocumentSnapshot:KS,Query:YS,QueryDocumentSnapshot:$S,QuerySnapshot:ZS,CollectionReference:JS,FieldPath:nT,FieldValue:rT,setLogLevel:function(t){zg.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function oT(t,e){return function(t,e=rr.b){return new ir.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function sT(t,e){return oT(t,e).pipe(Object(ar.a)(t=>({payload:t,type:"query"})))}function aT(t,e){return sT(t,e).pipe(_s(void 0),Mh(),Object(ar.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function uT(t,e,n){return aT(t,n).pipe(gr((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return cT(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return cT(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cT(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),vr(),Object(ar.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function cT(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function lT(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new Ni.a("firestore",function(t){return function(t,e){return new US(t,new CO(t,e),new MS)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},iT)))})(eT=ji.a),eT.registerVersion("@firebase/firestore","2.2.1");class hT{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=aT(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(ar.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(_s(void 0),Mh(),Ur(([t,e])=>e.length>0||!t),Object(ar.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(gr((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=lT(t);return uT(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return sT(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ar.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(cr.a)(this.query.get(t)).pipe(Object(Ar.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new dT(this.ref.doc(t),this.afs)}}class dT{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=vT(n,e);return new hT(r,i,this.afs)}snapshotChanges(){return oT(this.ref,this.afs.schedulers.outsideAngular).pipe(_s(void 0),Mh(),Object(ar.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(ar.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(cr.a)(this.ref.get(t)).pipe(Object(Ar.b)(this.afs.schedulers.insideAngular))}}class fT{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?aT(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ar.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Ur(t=>t.length>0),this.afs.keepUnstableUntilFirst):aT(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(gr((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=lT(t);return uT(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return sT(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ar.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(cr.a)(this.query.get(t)).pipe(Object(Ar.b)(this.afs.schedulers.insideAngular))}}const pT=new r.r("angularfire2.enableFirestorePersistence"),gT=new r.r("angularfire2.firestore.persistenceSettings"),mT=new r.r("angularfire2.firestore.settings"),yT=new r.r("angularfire2.firestore.use-emulator");function vT(t,e=(t=>t)){return{query:e(t),ref:t}}let bT=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new nr.d(o),this.keepUnstableUntilFirst=Object(nr.h)(this.schedulers);const c=Object(nr.g)(t,o,e);!hi.a.auth&&u&&Object(nr.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(nr.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!F(i)){const e=()=>{try{return Object(cr.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(eT){return"undefined"!=typeof console&&console.warn(eT),Object(or.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(or.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=vT(n,e),o=this.schedulers.ngZone.run(()=>r);return new hT(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new fT(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new dT(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(nr.c),r.Ub(nr.b,8),r.Ub(pT,8),r.Ub(mT,8),r.Ub(r.C),r.Ub(r.A),r.Ub(gT,8),r.Ub(yT,8),r.Ub(ii,8))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Ub)(nr.c),Object(r.Ub)(nr.b,8),Object(r.Ub)(pT,8),Object(r.Ub)(mT,8),Object(r.Ub)(r.C),Object(r.Ub)(r.A),Object(r.Ub)(gT,8),Object(r.Ub)(yT,8),Object(r.Ub)(ii,8))},token:t,providedIn:"any"}),t})();const _T=["*"];let wT=(()=>{class t{constructor(t,e,n){this.el=t,this.zone=e,this.platformId=n,this.afterChange=new r.n,this.beforeChange=new r.n,this.breakpoint=new r.n,this.destroy=new r.n,this.init=new r.n,this.currentIndex=0,this.slides=[],this.initialized=!1,this._removedSlides=[],this._addedSlides=[]}ngOnDestroy(){this.unslick()}ngAfterViewInit(){this.ngAfterViewChecked()}ngAfterViewChecked(){if(!F(this.platformId)&&(this._addedSlides.length>0||this._removedSlides.length>0)){const t=this.slides.length-this._removedSlides.length+this._addedSlides.length;this.initialized?0===t?this.unslick():(this._addedSlides.forEach(t=>{this.slides.push(t),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickAdd",t.el.nativeElement)})}),this._addedSlides=[],this._removedSlides.forEach(t=>{const e=this.slides.indexOf(t);this.slides=this.slides.filter(e=>e!==t),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickRemove",e)})}),this._removedSlides=[]):t>0&&this.initSlick()}}initSlick(){this.slides=this._addedSlides,this._addedSlides=[],this._removedSlides=[],this.zone.runOutsideAngular(()=>{this.$instance=jQuery(this.el.nativeElement),this.$instance.on("init",(t,e)=>{this.zone.run(()=>{this.init.emit({event:t,slick:e})})}),this.$instance.slick(this.config),this.zone.run(()=>{var t;this.initialized=!0,this.currentIndex=(null===(t=this.config)||void 0===t?void 0:t.initialSlide)||0}),this.$instance.on("afterChange",(t,e,n)=>{this.zone.run(()=>{this.afterChange.emit({event:t,slick:e,currentSlide:n,first:0===n,last:e.$slides.length===n+e.options.slidesToScroll}),this.currentIndex=n})}),this.$instance.on("beforeChange",(t,e,n,r)=>{this.zone.run(()=>{this.beforeChange.emit({event:t,slick:e,currentSlide:n,nextSlide:r}),this.currentIndex=r})}),this.$instance.on("breakpoint",(t,e,n)=>{this.zone.run(()=>{this.breakpoint.emit({event:t,slick:e,breakpoint:n})})}),this.$instance.on("destroy",(t,e)=>{this.zone.run(()=>{this.destroy.emit({event:t,slick:e}),this.initialized=!1})})})}addSlide(t){this._addedSlides.push(t)}removeSlide(t){this._removedSlides.push(t)}slickGoTo(t){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickGoTo",t)})}slickNext(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickNext")})}slickPrev(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPrev")})}slickPause(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPause")})}slickPlay(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPlay")})}unslick(){this.$instance&&(this.zone.runOutsideAngular(()=>{this.$instance.slick("unslick")}),this.$instance=void 0),this.initialized=!1}ngOnChanges(t){if(this.initialized){const e=t.config;if(e.previousValue!==e.currentValue&&void 0!==e.currentValue){const t=e.currentValue.refresh,n=Object.assign({},e.currentValue);delete n.refresh,this.zone.runOutsideAngular(()=>{this.$instance.slick("slickSetOption",n,t)})}}}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.l),r.Lb(r.A),r.Lb(r.C))},t.\u0275cmp=r.Fb({type:t,selectors:[["ngx-slick-carousel"]],inputs:{config:"config"},outputs:{afterChange:"afterChange",beforeChange:"beforeChange",breakpoint:"breakpoint",destroy:"destroy",init:"init"},exportAs:["slick-carousel"],features:[r.zb([{provide:jc,useExisting:Object(r.U)(()=>t),multi:!0}]),r.yb],ngContentSelectors:_T,decls:1,vars:0,template:function(t,e){1&t&&(r.bc(),r.ac(0))},encapsulation:2}),t})(),CT=(()=>{class t{constructor(t,e,n){this.el=t,this.platformId=e,this.carousel=n}ngOnInit(){L(this.platformId)&&this.carousel.addSlide(this)}ngOnDestroy(){L(this.platformId)&&this.carousel.removeSlide(this)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.l),r.Lb(r.C),r.Lb(wT,1))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngxSlickItem",""]]}),t})(),ET=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[D]]}),t})();const OT=["slickModal"];function ST(t,e){if(1&t){const t=r.Rb();r.Qb(0,"tr"),r.Qb(1,"td"),r.qc(2),r.Pb(),r.Qb(3,"td"),r.qc(4),r.Pb(),r.Qb(5,"td"),r.qc(6),r.Pb(),r.Qb(7,"td"),r.qc(8),r.Pb(),r.Qb(9,"td"),r.qc(10),r.Pb(),r.Qb(11,"td"),r.qc(12),r.Pb(),r.Qb(13,"td"),r.qc(14),r.Pb(),r.Qb(15,"td"),r.qc(16),r.Pb(),r.Qb(17,"td"),r.Qb(18,"button",31),r.Xb("click",function(){r.ic(t);const n=e.$implicit;return r.Zb(2).onImage(n.imagesPath)}),r.qc(19," View Image "),r.Pb(),r.Pb(),r.Qb(20,"td"),r.Qb(21,"a",36),r.Xb("click",function(){r.ic(t);const n=e.$implicit,i=e.index;return r.Zb(2).onEditProduct(n,i)}),r.Mb(22,"img",37),r.Pb(),r.Qb(23,"a",38),r.Xb("click",function(){r.ic(t);const n=e.$implicit;return r.Zb(2).onDelete(n.id)}),r.Mb(24,"img",39),r.Pb(),r.Pb(),r.Pb()}if(2&t){const t=e.$implicit;r.Ab(2),r.rc(t.title),r.Ab(2),r.rc(t.amount),r.Ab(2),r.rc(t.category),r.Ab(2),r.rc(t.color),r.Ab(2),r.rc(t.description),r.Ab(2),r.rc(t.con_no),r.Ab(2),r.rc(t.shop_no),r.Ab(2),r.rc(t.item_no)}}function TT(t,e){if(1&t&&(r.Qb(0,"tbody"),r.oc(1,ST,25,8,"tr",35),r.Pb()),2&t){const t=r.Zb();r.Ab(1),r.cc("ngForOf",t.data)}}function IT(t,e){1&t&&(r.Qb(0,"tbody"),r.Qb(1,"tr"),r.Qb(2,"td",40),r.qc(3,"No data!"),r.Pb(),r.Pb(),r.Pb())}function xT(t,e){if(1&t&&(r.Qb(0,"div",41),r.Mb(1,"img",42),r.Pb()),2&t){const t=e.$implicit;r.Ab(1),r.dc("src",t,r.kc)}}function kT(t,e){1&t&&(r.Qb(0,"button",43),r.Ob(1),r.Mb(2,"div",44),r.Nb(),r.Pb())}function AT(t,e){if(1&t){const t=r.Rb();r.Qb(0,"button",45,33),r.Xb("click",function(){r.ic(t);const e=r.Zb(),n=r.hc(59);return e.onImageUpload(n.value)}),r.qc(2," Upload Image "),r.Pb()}if(2&t){const t=r.Zb();r.cc("hidden",t.isLoading)("disabled",!t.button)}}function jT(t,e){if(1&t&&(r.Qb(0,"option",46),r.qc(1),r.Pb()),2&t){const t=e.$implicit;r.dc("value",t),r.Ab(1),r.sc(" ",t," ")}}function PT(t,e){if(1&t){const t=r.Rb();r.Qb(0,"div",41),r.Qb(1,"span",47),r.Xb("click",function(){r.ic(t);const n=e.index;return r.Zb(2).onImageClose(n)}),r.qc(2,"\xd7"),r.Pb(),r.Mb(3,"img",42),r.Pb()}if(2&t){const t=e.$implicit;r.Ab(3),r.dc("src",t,r.kc)}}function RT(t,e){if(1&t&&(r.Qb(0,"ngx-slick-carousel",10,11),r.oc(2,PT,4,1,"div",12),r.Pb()),2&t){const t=r.Zb();r.cc("config",t.slideConfigImg),r.Ab(2),r.cc("ngForOf",t.fb)}}function NT(t,e){1&t&&(r.Qb(0,"button",43),r.Ob(1),r.Mb(2,"div",44),r.Nb(),r.Pb())}function DT(t,e){if(1&t){const t=r.Rb();r.Qb(0,"button",48,33),r.Xb("click",function(){return r.ic(t),r.Zb().onEditSubmit()}),r.qc(2," Save "),r.Pb()}if(2&t){const t=r.Zb();r.cc("hidden",t.isLoading)}}function LT(t,e){if(1&t){const t=r.Rb();r.Qb(0,"div",62),r.Qb(1,"span",47),r.Xb("click",function(){r.ic(t);const n=e.index;return r.Zb(3).onEditImageClose(n)}),r.qc(2,"\xd7"),r.Pb(),r.Mb(3,"img",42),r.Pb()}if(2&t){const t=e.$implicit;r.Ab(3),r.dc("src",t,r.kc)}}function FT(t,e){if(1&t&&(r.Qb(0,"ngx-slick-carousel",10,11),r.oc(2,LT,4,1,"div",61),r.Pb()),2&t){const t=r.Zb(2);r.cc("config",t.slideConfigImg),r.Ab(2),r.cc("ngForOf",t.image1)}}function MT(t,e){if(1&t&&(r.Qb(0,"option",46),r.qc(1),r.Pb()),2&t){const t=e.$implicit;r.dc("value",t),r.Ab(1),r.sc(" ",t," ")}}function UT(t,e){if(1&t){const t=r.Rb();r.Qb(0,"div",64),r.Xb("click",function(){r.ic(t);const n=e.index,i=e.$implicit,o=r.Zb(3);return[o.selected[n]=!o.selected[n],o.onImgSelect(i)]}),r.Qb(1,"span",47),r.Xb("click",function(){r.ic(t);const n=e.index;return r.Zb(3).onImageClose(n)}),r.qc(2,"\xd7"),r.Pb(),r.Mb(3,"img",42),r.Pb()}if(2&t){const t=e.$implicit,n=e.index,i=r.Zb(3);r.Db("img-select",i.selected[n]),r.Ab(3),r.dc("src",t,r.kc)}}function VT(t,e){if(1&t&&(r.Qb(0,"ngx-slick-carousel",10,11),r.oc(2,UT,4,3,"div",63),r.Pb()),2&t){const t=r.Zb(2);r.cc("config",t.slideConfigImg),r.Ab(2),r.cc("ngForOf",t.fb)}}function qT(t,e){if(1&t){const t=r.Rb();r.Qb(0,"div",19),r.Qb(1,"form",49),r.Qb(2,"div",21),r.oc(3,FT,3,2,"ngx-slick-carousel",28),r.Pb(),r.Qb(4,"div",50),r.Qb(5,"strong",51),r.qc(6,"Title :"),r.Pb(),r.Mb(7,"input",52),r.Pb(),r.Qb(8,"div",21),r.Qb(9,"strong",51),r.qc(10,"Price :"),r.Pb(),r.Mb(11,"br"),r.Mb(12,"input",53),r.Pb(),r.Qb(13,"div",21),r.Qb(14,"strong",51),r.qc(15,"Con No :"),r.Pb(),r.Mb(16,"br"),r.Mb(17,"input",54),r.Pb(),r.Qb(18,"div",21),r.Qb(19,"strong",51),r.qc(20,"Shop No :"),r.Pb(),r.Mb(21,"br"),r.Mb(22,"input",55),r.Pb(),r.Qb(23,"div",21),r.Qb(24,"strong",51),r.qc(25,"Item No :"),r.Pb(),r.Mb(26,"br"),r.Mb(27,"input",56),r.Pb(),r.Qb(28,"div",21),r.Qb(29,"strong",51),r.qc(30,"Category :"),r.Pb(),r.Mb(31,"br"),r.Qb(32,"select",57),r.Qb(33,"option",58),r.qc(34),r.Pb(),r.oc(35,MT,2,2,"option",25),r.Pb(),r.Pb(),r.Qb(36,"div",21),r.Qb(37,"strong",51),r.qc(38,"Color :"),r.Pb(),r.Mb(39,"input",59),r.Pb(),r.Qb(40,"div",21),r.Qb(41,"strong",51),r.qc(42,"Description :"),r.Pb(),r.Mb(43,"input",60),r.Pb(),r.Qb(44,"div",21),r.Qb(45,"input",26,27),r.Xb("change",function(e){return r.ic(t),r.Zb().onImageSelect(e)}),r.Pb(),r.oc(47,VT,3,2,"ngx-slick-carousel",28),r.Pb(),r.Pb(),r.Pb()}if(2&t){const t=r.Zb();r.Ab(1),r.cc("formGroup",t.userForm),r.Ab(2),r.cc("ngIf",t.image1),r.Ab(4),r.cc("placeholder",t.editData.title),r.Ab(5),r.cc("placeholder",t.editData.amount),r.Ab(5),r.cc("placeholder",t.editData.con_no),r.Ab(5),r.cc("placeholder",t.editData.shop_no),r.Ab(5),r.cc("placeholder",t.editData.item_no),r.Ab(6),r.cc("selected",t.editData.category),r.Ab(1),r.sc(" ",t.editData.category," "),r.Ab(1),r.cc("ngForOf",t.category),r.Ab(4),r.cc("placeholder",t.editData.color),r.Ab(4),r.cc("placeholder",t.editData.description),r.Ab(4),r.cc("ngIf",t.fb)}}const BT=[{path:"",redirectTo:"product",pathMatch:"full"},{path:"login",component:Dh},{path:"product",component:(()=>{class t{constructor(t,e,n,r){this.db=t,this.formBuilder=e,this.storage=n,this.toastr=r,this.dtOptions={},this.dtTrigger=new kr.a,this.data=[],this.category=[],this.selectedFile=null,this.fb=[],this.files=[],this.selected={},this.button=!1,this.slideConfig={slidesToShow:1,slidesToScroll:1},this.slideConfigImg={slidesToShow:5,slidesToScroll:5},this.image=[],this.image1=[],this.image2=[],this.submitted=!1,this.isLoading=!1}ngOnInit(){this.dtOptions={pagingType:"simple_numbers",pageLength:20,destroy:!0,scrollY:"50vh",responsive:!0},this.userForm=this.formBuilder.group({amount:["",Vc.required],category:["",Vc.required],color:["",Vc.required],description:["",Vc.required],title:["",Vc.required],con_no:["",Vc.required],shop_no:["",Vc.required],item_no:["",Vc.required]}),this.db.collection("categories").ref.get().then(t=>{t.forEach(t=>{this.category.push(t.data().name)})}),this.getdbData().then(t=>{this.dtTrigger.next()})}getdbData(){return this.data=[],new Promise((t,e)=>{this.db.collection("products").ref.get().then(t=>{t.forEach(t=>{this.data.push(Object.assign({id:t.id},t.data()))})}).finally(()=>{t("")})})}get f(){return this.userForm.controls}ReloadDatatable(){this.datatableElement.dtInstance.then(t=>{this.getdbData().then(t=>{this.dtTrigger.next()})})}rerender(){this.datatableElement.dtInstance.then(t=>{this.dtTrigger.next()})}onImage(t){var e;this.image=[],this.image=t,null===(e=document.getElementById("imageModel"))||void 0===e||e.classList.add("block")}onAddProduct(){var t;this.userForm.reset(),this.image1=[],this.image2=[],this.submitted=!1,null===(t=document.getElementById("addModel"))||void 0===t||t.classList.add("block"),this.storage.ref("AdminImages/").listAll().subscribe(t=>{t.items.forEach(t=>{this.storage.ref(t.fullPath).getDownloadURL().subscribe(t=>{this.image1.push(t)})})})}onAddImage(){var t;this.fb=[],null===(t=document.getElementById("addImage"))||void 0===t||t.classList.add("block")}onEditProduct(t,e){var n;this.fb=[],this.userForm.reset(),this.submitted=!1,this.currentIndex=e,this.image1=t.imagesPath,this.editData=t,null===(n=document.getElementById("editModel"))||void 0===n||n.classList.add("block")}onNext(){this.image1=[],this.currentIndex++,this.editData=this.data[this.currentIndex],this.userForm.reset(),this.image1=this.editData.imagesPath}onPrev(){this.image1=[],this.currentIndex--,this.editData=this.data[this.currentIndex],this.userForm.reset(),this.image1=this.editData.imagesPath}onFileSelected(t,e){return this.isLoading=!0,new Promise((n,r)=>{this.image=[];for(let o=0;o<t.length;o++){var i=Math.floor(Math.pow(10,9)+Math.random()*(Math.pow(10,10)-Math.pow(10,9)-1));const r=t[o],s=this.storage.ref(`AdminImages/${i}`);this.storage.upload(`AdminImages/${i}`,r).snapshotChanges().pipe(js(()=>{this.downloadURL=s.getDownloadURL(),this.downloadURL.subscribe(r=>{r&&(this.image.push(r),this.db.collection("products").add({title:"--",amount:0,con_no:0,shop_no:0,item_no:0,category:e,color:"--",description:"--",imagesPath:[r]}),o==t.length-1&&n(""))})})).subscribe(t=>{})}})}onImageSelect(t){if(this.fb=[],this.files=[],t.target.files&&t.target.files[0])for(let n=0;n<t.target.files.length;n++){this.button=!0;var e=new FileReader;e.onload=t=>{this.fb.push(t.target.result)},this.files.push(t.target.files[n]),e.readAsDataURL(t.target.files[n])}document.getElementById("file").nodeValue=""}onSubmit(){var t;this.submitted=!0,null===(t=document.getElementById("addModel"))||void 0===t||t.classList.add("block"),this.userForm.invalid||(this.userForm.value.imagesPath=this.image2,this.db.collection("products").ref.add(this.userForm.value).then(t=>{var e;this.toastr.success("Added"),null===(e=document.getElementById("addModel"))||void 0===e||e.classList.remove("block")}).catch(t=>{this.toastr.error(t.message)}).finally(()=>{this.ReloadDatatable()}))}onDelete(t){this.db.collection("products").doc(t).ref.delete().then(t=>{this.ReloadDatatable(),this.toastr.success("Deleted")}).catch(t=>{this.toastr.error(t.message)})}onImageUpload(t){t?(alert(`Your selected image will go into ${t} category`),this.onFileSelected(this.files,t).then(t=>{var e;this.isLoading=!1,null===(e=document.getElementById("addImage"))||void 0===e||e.classList.remove("block"),this.fb=[]}).catch(t=>{this.toastr.error("Something went wrong")}).finally(()=>{this.toastr.success("Image uploaded successfully"),setTimeout(()=>{this.ReloadDatatable()},0)})):this.toastr.error("Please select category")}onEditFileSelected(t){return this.isLoading=!0,new Promise((e,n)=>{if(this.image=[],t.length>0)for(let i=0;i<t.length;i++){var r=Math.floor(Math.pow(10,9)+Math.random()*(Math.pow(10,10)-Math.pow(10,9)-1));const n=t[i],o=this.storage.ref(`AdminImages/${r}`);this.storage.upload(`AdminImages/${r}`,n).snapshotChanges().pipe(js(()=>{this.downloadURL=o.getDownloadURL(),this.downloadURL.subscribe(n=>{n&&(this.image.push(n),i==t.length-1&&e(this.image))})})).subscribe(t=>{})}else e([])})}onEditSubmit(){this.onEditFileSelected(this.files).then(t=>{this.userForm.value.imagesPath=[...this.image1,...t],this.isLoading=!1,Object.keys(this.userForm.value).forEach(t=>{this.userForm.value[t]||delete this.userForm.value[t]}),this.db.collection("products").doc(this.editData.id).ref.update(this.userForm.value).then(t=>{this.toastr.success("Updated"),this.ReloadDatatable()}).catch(t=>{this.toastr.error(t.message)})}).catch(t=>{this.toastr.error(t.message)})}onImageClose(t){this.fb.splice(t,1),this.files.splice(t,1)}onEditImageClose(t){this.image1.splice(t,1)}onImgSelect(t){this.image2.indexOf(t)>=0?this.image2=this.image2.filter(e=>e!==t):this.image2.push(t)}onClose(){var t,e,n,r;null===(t=document.getElementById("imageModel"))||void 0===t||t.classList.remove("block"),null===(e=document.getElementById("addModel"))||void 0===e||e.classList.remove("block"),null===(n=document.getElementById("editModel"))||void 0===n||n.classList.remove("block"),null===(r=document.getElementById("addImage"))||void 0===r||r.classList.remove("block")}ngOnDestroy(){this.dtTrigger.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(bT),r.Lb(Zl),r.Lb(ss),r.Lb(Ch))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-products"]],viewQuery:function(t,e){if(1&t&&(r.tc(OT,1),r.tc(Lh,1)),2&t){let t;r.gc(t=r.Yb())&&(e.slickModal=t.first),r.gc(t=r.Yb())&&(e.datatableElement=t.first)}},decls:84,vars:13,consts:[[1,"right-content"],["data-keyboard","false","data-backdrop","static","hidden","",1,"btn",2,"float","right","margin-bottom","7px","margin-left","5px",3,"click"],[1,"btn",2,"float","right","margin-bottom","7px",3,"click"],[1,"section-div"],["datatable","","id","users-list",1,"display",3,"dtOptions","dtTrigger"],[4,"ngIf"],["id","imageModel",1,"modal"],[1,"modal-content"],[1,"modal-header"],["id","model-close-btn",1,"close",3,"click"],[1,"carousel",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide",4,"ngFor","ngForOf"],["id","addImage",1,"modal"],[1,"col-12",2,"float","right"],[1,"btn-btm-inr-tabs","text-center","my-3"],["class","btn",4,"ngIf","ngIfElse"],["submitImage",""],["type","button",1,"btn",2,"margin-left","5px",3,"click"],[1,"modal-body"],[1,"row","comn-form"],[1,"col-md-6","form-group",2,"margin-top","10px"],["for","category"],["name","","id","category"],["selectCat",""],[3,"value",4,"ngFor","ngForOf"],["type","file","id","file","accept","image/*","multiple","",3,"change"],["userPhoto",""],["class","carousel",3,"config",4,"ngIf"],["id","editModel",1,"modal"],[1,"col-12"],[1,"btn",3,"click"],[1,"btn",2,"margin-left","5px",3,"click"],["submitProduct",""],["class","modal-body",4,"ngIf"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",3,"click"],["src","assets/edit-icon-table.svg"],["href","javascript:void(0)",2,"margin-left","5px",3,"click"],["src","assets/delete-icon.svg"],["colspan","8",1,"no-data-available"],["ngxSlickItem","",1,"slide"],["alt","","width","100%",3,"src"],[1,"btn"],[1,"loader",2,"margin","auto","height","20px","width","20px"],["type","submit",1,"btn",3,"hidden","disabled","click"],[3,"value"],["id","model-close-btn",1,"close-img",3,"click"],["type","submit",1,"btn",3,"hidden","click"],[1,"row","comn-form",3,"formGroup"],[1,"col-md-6","form-group"],[1,"lbl-class"],["type","text","name","","formControlName","title",1,"form-control","input-style",2,"margin-top","5px",3,"placeholder"],["type","number","name","","formControlName","amount",1,"form-control","input-style",2,"margin-top","5px",3,"placeholder"],["type","number","name","","formControlName","con_no",1,"form-control","input-style",2,"margin-top","5px",3,"placeholder"],["type","number","name","","formControlName","shop_no",1,"form-control","input-style",2,"margin-top","5px",3,"placeholder"],["type","number","name","","formControlName","item_no",1,"form-control","input-style",2,"margin-top","5px",3,"placeholder"],["name","","formControlName","category",1,"form-control","input-style",2,"margin-top","5px"],["disabled","",3,"selected"],["type","text","name","","formControlName","color",1,"form-control","input-style",2,"margin-top","5px",3,"placeholder"],["type","text","name","","formControlName","description",1,"form-control","input-style",2,"margin-top","5px",3,"placeholder"],["ngxSlickItem","",4,"ngFor","ngForOf"],["ngxSlickItem",""],["ngxSlickItem","",3,"img-select","click",4,"ngFor","ngForOf"],["ngxSlickItem","",3,"click"]],template:function(t,e){if(1&t&&(r.Qb(0,"div",0),r.Qb(1,"h3"),r.qc(2,"Products"),r.Pb(),r.Qb(3,"button",1),r.Xb("click",function(){return e.onAddProduct()}),r.qc(4," Add Product "),r.Pb(),r.Qb(5,"button",2),r.Xb("click",function(){return e.onAddImage()}),r.qc(6," Upload Images "),r.Pb(),r.Qb(7,"div",3),r.Qb(8,"table",4),r.Qb(9,"thead"),r.Qb(10,"tr"),r.Qb(11,"th"),r.qc(12,"Title"),r.Pb(),r.Qb(13,"th"),r.qc(14,"Price"),r.Pb(),r.Qb(15,"th"),r.qc(16,"Category"),r.Pb(),r.Qb(17,"th"),r.qc(18,"Color"),r.Pb(),r.Qb(19,"th"),r.qc(20,"Description"),r.Pb(),r.Qb(21,"th"),r.qc(22,"Con No"),r.Pb(),r.Qb(23,"th"),r.qc(24,"Shop No"),r.Pb(),r.Qb(25,"th"),r.qc(26,"Item No"),r.Pb(),r.Qb(27,"th"),r.qc(28,"Image"),r.Pb(),r.Qb(29,"th"),r.qc(30,"Action"),r.Pb(),r.Pb(),r.Pb(),r.oc(31,TT,2,1,"tbody",5),r.oc(32,IT,4,0,"tbody",5),r.Pb(),r.Pb(),r.Pb(),r.Qb(33,"div",6),r.Qb(34,"div",7),r.Qb(35,"div",8),r.Qb(36,"span",9),r.Xb("click",function(){return e.onClose()}),r.qc(37,"\xd7"),r.Pb(),r.Pb(),r.Qb(38,"ngx-slick-carousel",10,11),r.oc(40,xT,2,1,"div",12),r.Pb(),r.Pb(),r.Pb(),r.Qb(41,"div",13),r.Qb(42,"div",7),r.Qb(43,"div",8),r.Qb(44,"span",9),r.Xb("click",function(){return e.onClose()}),r.qc(45,"\xd7"),r.Pb(),r.Qb(46,"div",14),r.Qb(47,"div",15),r.oc(48,kT,3,0,"button",16),r.oc(49,AT,3,2,"ng-template",null,17,r.pc),r.Qb(51,"button",18),r.Xb("click",function(){return e.onClose()}),r.qc(52," Cancel "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(53,"div",19),r.Qb(54,"form",20),r.Qb(55,"div",21),r.Qb(56,"label",22),r.qc(57,"Select category --\x3e "),r.Pb(),r.Qb(58,"select",23,24),r.oc(60,jT,2,2,"option",25),r.Pb(),r.Pb(),r.Qb(61,"div",21),r.Qb(62,"input",26,27),r.Xb("change",function(t){return e.onImageSelect(t)}),r.Pb(),r.oc(64,RT,3,2,"ngx-slick-carousel",28),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(65,"div",29),r.Qb(66,"div",7),r.Qb(67,"div",8),r.Qb(68,"span",9),r.Xb("click",function(){return e.onClose()}),r.qc(69,"\xd7"),r.Pb(),r.Qb(70,"div",30),r.Qb(71,"div",15),r.Qb(72,"button",31),r.Xb("click",function(){return e.onPrev()}),r.qc(73,"Prev"),r.Pb(),r.Qb(74,"button",32),r.Xb("click",function(){return e.onNext()}),r.qc(75," Next "),r.Pb(),r.Pb(),r.Pb(),r.Qb(76,"div",14),r.Qb(77,"div",15),r.oc(78,NT,3,0,"button",16),r.oc(79,DT,3,1,"ng-template",null,33,r.pc),r.Qb(81,"button",18),r.Xb("click",function(){return e.onClose()}),r.qc(82," Cancel "),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.oc(83,qT,48,13,"div",34),r.Pb(),r.Pb()),2&t){const t=r.hc(50),n=r.hc(80);r.Ab(8),r.cc("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),r.Ab(23),r.cc("ngIf",0!=(null==e.data?null:e.data.length)),r.Ab(1),r.cc("ngIf",0==(null==e.data?null:e.data.length)),r.Ab(6),r.cc("config",e.slideConfig),r.Ab(2),r.cc("ngForOf",e.image),r.Ab(8),r.cc("ngIf",e.isLoading)("ngIfElse",t),r.Ab(12),r.cc("ngForOf",e.category),r.Ab(4),r.cc("ngIf",e.fb),r.Ab(14),r.cc("ngIf",e.isLoading)("ngIfElse",n),r.Ab(5),r.cc("ngIf",e.editData)}},directives:[Lh,P,wT,A,Pl,sl,jl,CT,Ql,Kl,Ml,Nc,ol,Vl,Nl,Hl],styles:[".invalid-feedback[_ngcontent-%COMP%]{text-align:left;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545;margin-bottom:20px}.form-group.is-invalid[_ngcontent-%COMP%]{border:1px solid #dc3545}.slick-slide[_ngcontent-%COMP%]{height:auto}.slick-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.slick-slider[_ngcontent-%COMP%]{margin:0 -5px}.slick-slide[_ngcontent-%COMP%]{text-align:center;margin-right:5px;margin-left:5px}.img-select[_ngcontent-%COMP%]{border:1.5px solid #00f}"]}),t})()}];let HT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[bc.forRoot(BT)],bc]}),t})();const QT=function(){return["/product"]};function zT(t,e){if(1&t){const t=r.Rb();r.Qb(0,"div",2),r.Qb(1,"div",3),r.Qb(2,"h3"),r.qc(3,"Welcome Admin!"),r.Pb(),r.Qb(4,"div"),r.Qb(5,"div",4),r.Qb(6,"a"),r.qc(7,"Products"),r.Pb(),r.Pb(),r.Qb(8,"div",5),r.Qb(9,"a",6),r.Xb("click",function(){return r.ic(t),r.Zb().logout()}),r.qc(10,"Logout"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(11,"div",7),r.Qb(12,"div",8),r.Qb(13,"h4",9),r.qc(14,"Beauty Art Gifts"),r.Pb(),r.Pb(),r.Mb(15,"router-outlet"),r.Pb(),r.Pb()}2&t&&(r.Ab(5),r.cc("routerLink",r.ec(2,QT))("routerLinkActive","active"))}function GT(t,e){1&t&&r.Mb(0,"router-outlet")}let WT=(()=>{class t{constructor(t){this.router=t}ngOnInit(){localStorage.getItem("User")?this.show=window.location.href.match("/login")?"login":"":(this.show="login",this.router.navigate(["login"]))}logout(){localStorage.clear(),this.show="login",window.location.href="login"}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(ic))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-root"]],decls:2,vars:2,consts:[["class","main-outer",4,"ngIf"],[4,"ngIf"],[1,"main-outer"],[1,"left-sidebar"],[1,"tab",3,"routerLink","routerLinkActive"],[1,"tab"],["href","javascript:void(0)",3,"click"],[1,"right-container"],[1,"right-header"],[2,"margin-left","10px"]],template:function(t,e){1&t&&(r.oc(0,zT,16,3,"div",0),r.oc(1,GT,1,0,"router-outlet",1)),2&t&&(r.cc("ngIf","login"!==e.show),r.Ab(1),r.cc("ngIf","login"===e.show))},directives:[P,oc,uc,cc],styles:[""]}),t})();const KT={apiKey:"AIzaSyAjxyBAcwJSWzfcGFCohgVYGLTQWZqgtts",authDomain:"beauty-art-gifts-e1206.firebaseapp.com",projectId:"beauty-art-gifts-e1206",storageBucket:"beauty-art-gifts-e1206.appspot.com",messagingSenderId:"564130659611",appId:"1:564130659611:web:a7812f40be92ddc701e7be",measurementId:"G-LN3ZCWF90F"};let $T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t,bootstrap:[WT]}),t.\u0275inj=r.Ib({providers:[{provide:ns,useValue:"your"}],imports:[[vt,er,HT,Yl,Xl,nr.a.initializeApp(KT),Ii,us,Fh,ET,Sh.forRoot()]]}),t})();Object(r.T)(),mt().bootstrapModule($T).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);